"use strict";var Cse=Object.defineProperty,Sse=Object.defineProperties,Ase=Object.getOwnPropertyDescriptors,g2=Object.getOwnPropertySymbols,xse=Object.prototype.hasOwnProperty,kse=Object.prototype.propertyIsEnumerable,m2=(ce,Dt,Ht)=>Dt in ce?Cse(ce,Dt,{enumerable:!0,configurable:!0,writable:!0,value:Ht}):ce[Dt]=Ht,_2=(ce,Dt)=>{for(var Ht in Dt||(Dt={}))xse.call(Dt,Ht)&&m2(ce,Ht,Dt[Ht]);if(g2)for(var Ht of g2(Dt))kse.call(Dt,Ht)&&m2(ce,Ht,Dt[Ht]);return ce},y2=(ce,Dt)=>Sse(ce,Ase(Dt));(self.webpackChunkVocApp=self.webpackChunkVocApp||[]).push([[179],{635:()=>{function ce(t){return"function"==typeof t}function Dt(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const Ht=Dt(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function fo(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class Gn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(ce(r))try{r()}catch(s){e=s instanceof Ht?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{MC(s)}catch(o){e=null!=e?e:[],o instanceof Ht?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Ht(e)}}add(e){var n;if(e&&e!==this)if(this.closed)MC(e);else{if(e instanceof Gn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&fo(n,e)}remove(e){const{_finalizers:n}=this;n&&fo(n,e),e instanceof Gn&&e._removeParent(this)}}Gn.EMPTY=(()=>{const t=new Gn;return t.closed=!0,t})();const kC=Gn.EMPTY;function NC(t){return t instanceof Gn||t&&"closed"in t&&ce(t.remove)&&ce(t.add)&&ce(t.unsubscribe)}function MC(t){ce(t)?t():t.unsubscribe()}const Xi={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ql={setTimeout(t,e,...n){const{delegate:r}=ql;return(null==r?void 0:r.setTimeout)?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=ql;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function RC(t){ql.setTimeout(()=>{const{onUnhandledError:e}=Xi;if(!e)throw t;e(t)})}function PC(){}const v2=Qp("C",void 0,void 0);function Qp(t,e,n){return{kind:t,value:e,error:n}}let Zi=null;function zl(t){if(Xi.useDeprecatedSynchronousErrorHandling){const e=!Zi;if(e&&(Zi={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=Zi;if(Zi=null,n)throw r}}else t()}class Yp extends Gn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,NC(e)&&e.add(this)):this.destination=C2}static create(e,n,r){return new ou(e,n,r)}next(e){this.isStopped?Xp(function I2(t){return Qp("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Xp(function w2(t){return Qp("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Xp(v2,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const T2=Function.prototype.bind;function Jp(t,e){return T2.call(t,e)}class b2{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Kl(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Kl(r)}else Kl(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Kl(n)}}}class ou extends Yp{constructor(e,n,r){let i;if(super(),ce(e)||!e)i={next:null!=e?e:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0};else{let s;this&&Xi.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Jp(e.next,s),error:e.error&&Jp(e.error,s),complete:e.complete&&Jp(e.complete,s)}):i=e}this.destination=new b2(i)}}function Kl(t){Xi.useDeprecatedSynchronousErrorHandling?function E2(t){Xi.useDeprecatedSynchronousErrorHandling&&Zi&&(Zi.errorThrown=!0,Zi.error=t)}(t):RC(t)}function Xp(t,e){const{onStoppedNotification:n}=Xi;n&&ql.setTimeout(()=>n(t,e))}const C2={closed:!0,next:PC,error:function D2(t){throw t},complete:PC},Zp="function"==typeof Symbol&&Symbol.observable||"@@observable";function eg(t){return t}let Ot=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function A2(t){return t&&t instanceof Yp||function S2(t){return t&&ce(t.next)&&ce(t.error)&&ce(t.complete)}(t)&&NC(t)}(n)?n:new ou(n,r,i);return zl(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=FC(r))((i,s)=>{const o=new ou({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Zp](){return this}pipe(...n){return function OC(t){return 0===t.length?eg:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=FC(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function FC(t){var e;return null!==(e=null!=t?t:Xi.Promise)&&void 0!==e?e:Promise}const x2=Dt(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let tg=(()=>{class t extends Ot{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new LC(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new x2}next(n){zl(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){zl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){zl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?kC:(this.currentObservers=null,s.push(n),new Gn(()=>{this.currentObservers=null,fo(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new Ot;return n.source=this,n}}return t.create=(e,n)=>new LC(e,n),t})();class LC extends tg{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:kC}}function po(t){return e=>{if(function k2(t){return ce(null==t?void 0:t.lift)}(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function au(t,e,n,r,i){return new N2(t,e,n,r,i)}class N2 extends Yp{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function BC(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function es(t){return this instanceof es?(this.v=t,this):new es(t)}function O2(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(p,g){s.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{!function u(h){h.value instanceof es?Promise.resolve(h.value.v).then(c,l):d(s[0][2],h)}(r[h](f))}catch(p){d(s[0][3],p)}}function c(h){a("next",h)}function l(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function F2(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function jC(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){!function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}(a,u,(o=t[s](o)).done,o.value)})}}}const $C=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function GC(t){return ce(null==t?void 0:t.then)}function HC(t){return ce(t[Zp])}function WC(t){return Symbol.asyncIterator&&ce(null==t?void 0:t[Symbol.asyncIterator])}function qC(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const zC=function V2(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function KC(t){return ce(null==t?void 0:t[zC])}function QC(t){return O2(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield es(n.read());if(i)return yield es(void 0);yield yield es(r)}}finally{n.releaseLock()}})}function YC(t){return ce(null==t?void 0:t.getReader)}function ts(t){if(t instanceof Ot)return t;if(null!=t){if(HC(t))return function B2(t){return new Ot(e=>{const n=t[Zp]();if(ce(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if($C(t))return function U2(t){return new Ot(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(GC(t))return function j2(t){return new Ot(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,RC)})}(t);if(WC(t))return JC(t);if(KC(t))return function $2(t){return new Ot(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(YC(t))return function G2(t){return JC(QC(t))}(t)}throw qC(t)}function JC(t){return new Ot(e=>{(function H2(t,e){var n,r,i,s;return function R2(t,e,n,r){return new(n||(n=Promise))(function(s,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):function i(s){return s instanceof n?s:new n(function(o){o(s)})}(l.value).then(a,u)}c((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=F2(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function li(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function XC(t,e,n=1/0){return ce(e)?XC((r,i)=>function M2(t,e){return po((n,r)=>{let i=0;n.subscribe(au(r,s=>{r.next(t.call(e,s,i++))}))})}((s,o)=>e(r,s,i,o))(ts(t(r,i))),n):("number"==typeof e&&(n=e),po((r,i)=>function W2(t,e,n,r,i,s,o,a){const u=[];let c=0,l=0,d=!1;const h=()=>{d&&!u.length&&!c&&e.complete()},f=g=>c<r?p(g):u.push(g),p=g=>{s&&e.next(g),c++;let m=!1;ts(n(g,l++)).subscribe(au(e,I=>{null==i||i(I),s?f(I):e.next(I)},()=>{m=!0},void 0,()=>{if(m)try{for(c--;u.length&&c<r;){const I=u.shift();o?li(e,o,()=>p(I)):p(I)}h()}catch(I){e.error(I)}}))};return t.subscribe(au(e,f,()=>{d=!0,h()})),()=>{null==a||a()}}(r,i,t,n)))}const ZC=new Ot(t=>t.complete());function rg(t){return t[t.length-1]}function Ql(t,e=0){return po((n,r)=>{n.subscribe(au(r,i=>li(r,t,()=>r.next(i),e),()=>li(r,t,()=>r.complete(),e),i=>li(r,t,()=>r.error(i),e)))})}function Yl(t,e=0){return po((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function e0(t,e){if(!t)throw new Error("Iterable cannot be null");return new Ot(n=>{li(n,e,()=>{const r=t[Symbol.asyncIterator]();li(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function iU(...t){const e=function Q2(t){return function K2(t){return t&&ce(t.schedule)}(rg(t))?t.pop():void 0}(t),n=function Y2(t,e){return"number"==typeof rg(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?ts(r[0]):function q2(t=1/0){return XC(eg,t)}(n)(function rU(t,e){return e?function nU(t,e){if(null!=t){if(HC(t))return function J2(t,e){return ts(t).pipe(Yl(e),Ql(e))}(t,e);if($C(t))return function Z2(t,e){return new Ot(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(GC(t))return function X2(t,e){return ts(t).pipe(Yl(e),Ql(e))}(t,e);if(WC(t))return e0(t,e);if(KC(t))return function eU(t,e){return new Ot(n=>{let r;return li(n,e,()=>{r=t[zC](),li(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>ce(null==r?void 0:r.return)&&r.return()})}(t,e);if(YC(t))return function tU(t,e){return e0(QC(t),e)}(t,e)}throw qC(t)}(t,e):ts(t)}(r,e)):ZC}function ig(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new ou({next:()=>{r.unsubscribe(),t()}});return e(...n).subscribe(r)}function we(t){for(let e in t)if(t[e]===we)return e;throw Error("Could not find renamed property on target object.")}function pe(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(pe).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function og(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const oU=we({__forward_ref__:we});function ag(t){return t.__forward_ref__=ag,t.toString=function(){return pe(this())},t}function Q(t){return function t0(t){return"function"==typeof t&&t.hasOwnProperty(oU)&&t.__forward_ref__===ag}(t)?t():t}class he extends Error{constructor(e,n){super(function ug(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function G(t){return"string"==typeof t?t:null==t?"":String(t)}function Ct(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():G(t)}function Jl(t,e){const n=e?` in ${e}`:"";throw new he(-201,`No provider for ${Ct(t)} found${n}`)}function _n(t,e){null==t&&function Ie(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function ke(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Or(t){return{providers:t.providers||[],imports:t.imports||[]}}function cg(t){return n0(t,Xl)||n0(t,s0)}function n0(t,e){return t.hasOwnProperty(e)?t[e]:null}function r0(t){return t&&(t.hasOwnProperty(lg)||t.hasOwnProperty(fU))?t[lg]:null}const Xl=we({\u0275prov:we}),lg=we({\u0275inj:we}),s0=we({ngInjectableDef:we}),fU=we({ngInjectorDef:we});var q=(()=>((q=q||{})[q.Default=0]="Default",q[q.Host=1]="Host",q[q.Self=2]="Self",q[q.SkipSelf=4]="SkipSelf",q[q.Optional=8]="Optional",q))();let dg;function di(t){const e=dg;return dg=t,e}function o0(t,e,n){const r=cg(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&q.Optional?null:void 0!==e?e:void Jl(pe(t),"Injector")}function hi(t){return{toString:t}.toString()}var Hn=(()=>((Hn=Hn||{})[Hn.OnPush=0]="OnPush",Hn[Hn.Default=1]="Default",Hn))(),ur=(()=>{return(t=ur||(ur={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",ur;var t})();const gU="undefined"!=typeof globalThis&&globalThis,mU="undefined"!=typeof window&&window,_U="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,me=gU||"undefined"!=typeof global&&global||mU||_U,go={},Ee=[],Zl=we({\u0275cmp:we}),hg=we({\u0275dir:we}),fg=we({\u0275pipe:we}),a0=we({\u0275mod:we}),Fr=we({\u0275fac:we}),uu=we({__NG_ELEMENT_ID__:we});let yU=0;function mo(t){return hi(()=>{const n={},r={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Hn.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Ee,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||ur.Emulated,id:"c",styles:t.styles||Ee,_:null,setInput:null,schemas:t.schemas||null,tView:null},i=t.directives,s=t.features,o=t.pipes;return r.id+=yU++,r.inputs=d0(t.inputs,n),r.outputs=d0(t.outputs),s&&s.forEach(a=>a(r)),r.directiveDefs=i?()=>("function"==typeof i?i():i).map(u0):null,r.pipeDefs=o?()=>("function"==typeof o?o():o).map(c0):null,r})}function u0(t){return Ft(t)||function pi(t){return t[hg]||null}(t)}function c0(t){return function ns(t){return t[fg]||null}(t)}const l0={};function fi(t){return hi(()=>{const e={type:t.type,bootstrap:t.bootstrap||Ee,declarations:t.declarations||Ee,imports:t.imports||Ee,exports:t.exports||Ee,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(l0[t.id]=t.type),e})}function d0(t,e){if(null==t)return go;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}function Ft(t){return t[Zl]||null}function Nn(t,e){const n=t[a0]||null;if(!n&&!0===e)throw new Error(`Type ${pe(t)} does not have '\u0275mod' property.`);return n}const Y=11;function cr(t){return Array.isArray(t)&&"object"==typeof t[1]}function qn(t){return Array.isArray(t)&&!0===t[1]}function mg(t){return 0!=(8&t.flags)}function id(t){return 1==(1&t.flags)}function zn(t){return null!==t.template}function bU(t){return 0!=(512&t[2])}function os(t,e){return t.hasOwnProperty(Fr)?t[Fr]:null}class SU{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function f0(t){return t.type.prototype.ngOnChanges&&(t.setInput=xU),AU}function AU(){const t=g0(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===go)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function xU(t,e,n,r){const i=g0(t)||function kU(t,e){return t[p0]=e}(t,{previous:go,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],u=o[a];s[a]=new SU(u&&u.currentValue,e,o===go),t[r]=e}const p0="__ngSimpleChanges__";function g0(t){return t[p0]||null}let Ig;function je(t){return!!t.listen}const m0={createRenderer:(t,e)=>function Eg(){return void 0!==Ig?Ig:"undefined"!=typeof document?document:void 0}()};function Je(t){for(;Array.isArray(t);)t=t[0];return t}function Pn(t,e){return Je(e[t.index])}function vn(t,e){const n=e[t];return cr(n)?n:n[0]}function bg(t){return 128==(128&t[2])}function gi(t,e){return null==e?null:t[e]}function y0(t){t[18]=0}function Dg(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const H={lFrame:S0(null),bindingsEnabled:!0};function w0(){return H.bindingsEnabled}function E(){return H.lFrame.lView}function ie(){return H.lFrame.tView}function rt(){let t=I0();for(;null!==t&&64===t.type;)t=t.parent;return t}function I0(){return H.lFrame.currentTNode}function lr(t,e){const n=H.lFrame;n.currentTNode=t,n.isParent=e}function Cg(){return H.lFrame.isParent}function KU(t,e){const n=H.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ag(e)}function Ag(t){H.lFrame.currentDirectiveIndex=t}function kg(t){H.lFrame.currentQueryIndex=t}function YU(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function D0(t,e,n){if(n&q.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&q.Host||(i=YU(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;e=i,t=s}const r=H.lFrame=C0();return r.currentTNode=e,r.lView=t,!0}function ud(t){const e=C0(),n=t[1];H.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function C0(){const t=H.lFrame,e=null===t?null:t.child;return null===e?S0(t):e}function S0(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function A0(){const t=H.lFrame;return H.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const x0=A0;function cd(){const t=A0();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function qt(){return H.lFrame.selectedIndex}function mi(t){H.lFrame.selectedIndex=t}function ld(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:l}=s;o&&(t.contentHooks||(t.contentHooks=[])).push(-n,o),a&&((t.contentHooks||(t.contentHooks=[])).push(n,a),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,a)),u&&(t.viewHooks||(t.viewHooks=[])).push(-n,u),c&&((t.viewHooks||(t.viewHooks=[])).push(n,c),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,c)),null!=l&&(t.destroyHooks||(t.destroyHooks=[])).push(n,l)}}function dd(t,e,n){k0(t,e,3,n)}function hd(t,e,n,r){(3&t[2])===n&&k0(t,e,n,r)}function Ng(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function k0(t,e,n,r){const s=null!=r?r:-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&t[18]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[18]+=65536),(a<s||-1==s)&&(sj(t,n,e,u),t[18]=(4294901760&t[18])+u+2),u++}function sj(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class fu{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function fd(t,e,n){const r=je(t);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,o):e.setAttributeNS(o,a,u)}else{const o=s,a=n[++i];Rg(o)?r&&t.setProperty(e,o,a):r?t.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function N0(t){return 3===t||4===t||6===t}function Rg(t){return 64===t.charCodeAt(0)}function pd(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||M0(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function M0(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}function To(t){return 32767&t}function bo(t,e){let n=function lj(t){return t>>16}(t),r=e;for(;n>0;)r=r[15],n--;return r}let Pg=!0;function gd(t){const e=Pg;return Pg=t,e}let dj=0;function gu(t,e){const n=Fg(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Og(r.data,t),Og(e,null),Og(r.blueprint,null));const i=md(t,e),s=t.injectorIndex;if(function R0(t){return-1!==t}(i)){const o=To(i),a=bo(i,e),u=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|u[o+c]}return e[s+8]=i,s}function Og(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Fg(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function md(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const s=i[1],o=s.type;if(r=2===o?s.declTNode:1===o?i[6]:null,null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function _d(t,e,n){!function hj(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(uu)&&(r=n[uu]),null==r&&(r=n[uu]=dj++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function F0(t,e,n){if(n&q.Optional)return t;Jl(e,"NodeInjector")}function L0(t,e,n,r){if(n&q.Optional&&void 0===r&&(r=null),0==(n&(q.Self|q.Host))){const i=t[9],s=di(void 0);try{return i?i.get(e,r,n&q.Optional):o0(e,r,n&q.Optional)}finally{di(s)}}return F0(r,e,n)}function V0(t,e,n,r=q.Default,i){if(null!==t){const s=function mj(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(uu)?t[uu]:void 0;return"number"==typeof e?e>=0?255&e:pj:e}(n);if("function"==typeof s){if(!D0(e,t,r))return r&q.Host?F0(i,n,r):L0(e,n,r,i);try{const o=s(r);if(null!=o||r&q.Optional)return o;Jl(n)}finally{x0()}}else if("number"==typeof s){let o=null,a=Fg(t,e),u=-1,c=r&q.Host?e[16][6]:null;for((-1===a||r&q.SkipSelf)&&(u=-1===a?md(t,e):e[a+8],-1!==u&&j0(r,!1)?(o=e[1],a=To(u),e=bo(u,e)):a=-1);-1!==a;){const l=e[1];if(U0(s,a,l.data)){const d=gj(a,e,n,o,r,c);if(d!==B0)return d}u=e[a+8],-1!==u&&j0(r,e[1].data[a+8]===c)&&U0(s,a,e)?(o=l,a=To(u),e=bo(u,e)):a=-1}}}return L0(e,n,r,i)}const B0={};function pj(){return new Do(rt(),E())}function gj(t,e,n,r,i,s){const o=e[1],a=o.data[t+8],l=function yd(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,l=s>>20,h=i?a+l:t.directiveEnd;for(let f=r?a:a+l;f<h;f++){const p=o[f];if(f<u&&n===p||f>=u&&p.type===n)return f}if(i){const f=o[u];if(f&&zn(f)&&f.type===n)return u}return null}(a,o,n,null==r?function rd(t){return 2==(2&t.flags)}(a)&&Pg:r!=o&&0!=(3&a.type),i&q.Host&&s===a);return null!==l?mu(e,o,l,a):B0}function mu(t,e,n,r){let i=t[n];const s=e.data;if(function oj(t){return t instanceof fu}(i)){const o=i;o.resolving&&function aU(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new he(-200,`Circular dependency in DI detected for ${t}${n}`)}(Ct(s[n]));const a=gd(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?di(o.injectImpl):null;D0(t,r,q.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function ij(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=f0(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==u&&di(u),gd(a),o.resolving=!1,x0()}}return i}function U0(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function j0(t,e){return!(t&q.Self||t&q.Host&&e)}class Do{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return V0(this._tNode,this._lView,e,r,n)}}const So="__parameters__";function xo(t,e,n){return hi(()=>{const r=function Bg(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,c,l){const d=u.hasOwnProperty(So)?u[So]:Object.defineProperty(u,So,{value:[]})[So];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class se{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=ke({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}function dr(t,e){t.forEach(n=>Array.isArray(n)?dr(n,e):e(n))}function vd(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const wu={},Gg="__NG_DI_FLAG__",Id="ngTempTokenPath",Aj=/\n/gm,K0="__source",kj=we({provide:String,useValue:we});let Iu;function Q0(t){const e=Iu;return Iu=t,e}function Nj(t,e=q.Default){if(void 0===Iu)throw new he(203,"");return null===Iu?o0(t,void 0,e):Iu.get(t,e&q.Optional?null:void 0,e)}function ge(t,e=q.Default){return(function pU(){return dg}()||Nj)(Q(t),e)}const Mj=ge;function Hg(t){const e=[];for(let n=0;n<t.length;n++){const r=Q(t[n]);if(Array.isArray(r)){if(0===r.length)throw new he(900,"");let i,s=q.Default;for(let o=0;o<r.length;o++){const a=r[o],u=Rj(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(ge(i,s))}else e.push(ge(r))}return e}function Eu(t,e){return t[Gg]=e,t.prototype[Gg]=e,t}function Rj(t){return t[Gg]}const ht=Eu(xo("Optional"),8),gS="__ngContext__";function Vt(t,e){t[gS]=e}function em(t){const e=function Su(t){return t[gS]||null}(t);return e?Array.isArray(e)?e:e.lView:null}function nm(t){return t.ngOriginalError}function D$(t,...e){t.error(...e)}class Au{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e),r=function b$(t){return t&&t.ngErrorLogger||D$}(e);r(this._console,"ERROR",e),n&&r(this._console,"ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&nm(e);for(;n&&nm(n);)n=nm(n);return n||null}}const O$=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(me))();function fr(t){return t instanceof Function?t():t}var In=(()=>((In=In||{})[In.Important=1]="Important",In[In.DashCase=2]="DashCase",In))();function im(t,e){return undefined(t,e)}function xu(t){const e=t[3];return qn(e)?e[3]:e}function sm(t){return bS(t[13])}function om(t){return bS(t[4])}function bS(t){for(;null!==t&&!qn(t);)t=t[4];return t}function Po(t,e,n,r,i){if(null!=r){let s,o=!1;qn(r)?s=r:cr(r)&&(o=!0,r=r[0]);const a=Je(r);0===t&&null!==n?null==i?kS(e,n,a):as(e,n,a,i||null,!0):1===t&&null!==n?as(e,n,a,i||null,!0):2===t?function LS(t,e,n){const r=function Ad(t,e){return je(t)?t.parentNode(e):e.parentNode}(t,e);r&&function Q$(t,e,n,r){je(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function X$(t,e,n,r,i){const s=n[7];s!==Je(n)&&Po(e,t,r,s,i);for(let a=10;a<n.length;a++){const u=n[a];ku(u[1],u,t,e,r,s)}}(e,t,s,n,i)}}function um(t,e,n){if(je(t))return t.createElement(e,n);{const r=null!==n?function PU(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(n):null;return null===r?t.createElement(e):t.createElementNS(r,e)}}function CS(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Dg(i,-1)),n.splice(r,1)}function lm(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function K$(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof fu)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];try{u.call(a)}finally{}}else try{s.call(i)}finally{}}}}(t,e),function z$(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+1],a="function"==typeof o?o(e):Je(e[o]),u=r[i=n[s+2]],c=n[s+3];"boolean"==typeof c?a.removeEventListener(n[s],u,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),s+=2}else{const o=r[i=n[s+1]];n[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)r[s]();e[7]=null}}(t,e),1===e[1].type&&je(e[Y])&&e[Y].destroy();const n=e[17];if(null!==n&&qn(e[3])){n!==e[3]&&CS(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function AS(t,e,n){return function xS(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const i=t.data[r.directiveStart].encapsulation;if(i===ur.None||i===ur.Emulated)return null}return Pn(r,n)}(t,e.parent,n)}function as(t,e,n,r,i){je(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function kS(t,e,n){je(t)?t.appendChild(e,n):e.appendChild(n)}function NS(t,e,n,r,i){null!==r?as(t,e,n,r,i):kS(t,e,n)}let PS=function RS(t,e,n){return 40&t.type?Pn(t,n):null};function xd(t,e,n,r){const i=AS(t,r,e),s=e[Y],a=function MS(t,e,n){return PS(t,e,n)}(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)NS(s,i,n[u],a,!1);else NS(s,i,n,a,!1)}function FS(t,e){return null!==e?t[16][6].projection[e.projection]:null}function fm(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&Vt(Je(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)fm(t,e,n.child,r,i,s,!1),Po(e,t,i,a,s);else if(32&u){const c=im(n,r);let l;for(;l=c();)Po(e,t,i,l,s);Po(e,t,i,a,s)}else 16&u?VS(t,e,r,n,i,s):Po(e,t,i,a,s);n=o?n.projectionNext:n.next}}function ku(t,e,n,r,i,s){fm(n,r,t.firstChild,e,i,s,!1)}function VS(t,e,n,r,i,s){const o=n[16],u=o[6].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++)Po(e,t,i,u[c],s);else fm(t,e,u,o[3],i,s,!0)}function BS(t,e,n){je(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function pm(t,e,n){je(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function US(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}const jS="ng-template";function eG(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==US(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function $S(t){return 4===t.type&&t.value!==jS}function tG(t,e,n){return e===(4!==t.type||n?t.value:jS)}function nG(t,e,n){let r=4;const i=t.attrs||[],s=function sG(t){for(let e=0;e<t.length;e++)if(N0(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!tG(t,u,n)||""===u&&1===e.length){if(Kn(r))return!1;o=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!eG(t.attrs,c,n)){if(Kn(r))return!1;o=!0}continue}const d=rG(8&r?"class":u,i,$S(t),n);if(-1===d){if(Kn(r))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==US(f,c,0)||2&r&&c!==h){if(Kn(r))return!1;o=!0}}}}else{if(!o&&!Kn(r)&&!Kn(u))return!1;if(o&&Kn(u))continue;o=!1,r=u|1&r}}return Kn(r)||o}function Kn(t){return 0==(1&t)}function rG(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function oG(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function GS(t,e,n=!1){for(let r=0;r<e.length;r++)if(nG(t,e[r],n))return!0;return!1}function HS(t,e){return t?":not("+e.trim()+")":e}function uG(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Kn(o)&&(e+=HS(s,i),i=""),r=o,s=s||!Kn(r);n++}return""!==i&&(e+=HS(s,i)),e}const W={};function on(t){WS(ie(),E(),qt()+t,!1)}function WS(t,e,n,r){if(!r)if(3==(3&e[2])){const s=t.preOrderCheckHooks;null!==s&&dd(e,s,n)}else{const s=t.preOrderHooks;null!==s&&hd(e,s,0,n)}mi(n)}function nA(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const o=t.data[s];kg(i),o.contentQueries(2,e[s],s)}}}function Nu(t,e,n,r,i,s,o,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,y0(l),l[3]=l[15]=t,l[8]=n,l[10]=o||t&&t[10],l[Y]=a||t&&t[Y],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=s,l[16]=2==e.type?t[16]:l,l}function Oo(t,e,n,r,i){let s=t.data[e];if(null===s)s=function Cm(t,e,n,r,i){const s=I0(),o=Cg(),u=t.data[e]=function CG(t,e,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u)),u}(t,e,n,r,i),function zU(){return H.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function hu(){const t=H.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return lr(s,!0),s}function Fo(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Mu(t,e,n){ud(e);try{const r=t.viewQuery;null!==r&&Om(1,r,n);const i=t.template;null!==i&&rA(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&nA(t,e),t.staticViewQueries&&Om(2,t.viewQuery,n);const s=t.components;null!==s&&function TG(t,e){for(let n=0;n<e.length;n++)HG(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[2]&=-5,cd()}}function Lo(t,e,n,r){const i=e[2];if(256!=(256&i)){ud(e);try{y0(e),function E0(t){return H.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&rA(t,e,n,2,r);const o=3==(3&i);if(o){const c=t.preOrderCheckHooks;null!==c&&dd(e,c,null)}else{const c=t.preOrderHooks;null!==c&&hd(e,c,0,null),Ng(e,0)}if(function $G(t){for(let e=sm(t);null!==e;e=om(e)){if(!e[2])continue;const n=e[9];for(let r=0;r<n.length;r++){const i=n[r],s=i[3];0==(1024&i[2])&&Dg(s,1),i[2]|=1024}}}(e),function jG(t){for(let e=sm(t);null!==e;e=om(e))for(let n=10;n<e.length;n++){const r=e[n],i=r[1];bg(r)&&Lo(i,r,i.template,r[8])}}(e),null!==t.contentQueries&&nA(t,e),o){const c=t.contentCheckHooks;null!==c&&dd(e,c)}else{const c=t.contentHooks;null!==c&&hd(e,c,1),Ng(e,1)}!function IG(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)mi(~i);else{const s=i,o=n[++r],a=n[++r];KU(o,s),a(2,e[s])}}}finally{mi(-1)}}(t,e);const a=t.components;null!==a&&function EG(t,e){for(let n=0;n<e.length;n++)GG(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Om(2,u,r),o){const c=t.viewCheckHooks;null!==c&&dd(e,c)}else{const c=t.viewHooks;null!==c&&hd(e,c,2),Ng(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[2]&=-73,1024&e[2]&&(e[2]&=-1025,Dg(e[3],-1))}finally{cd()}}}function bG(t,e,n,r){const i=e[10],o=function _0(t){return 4==(4&t[2])}(e);try{!o&&i.begin&&i.begin(),o&&Mu(t,e,r),Lo(t,e,n,r)}finally{!o&&i.end&&i.end()}}function rA(t,e,n,r,i){const s=qt(),o=2&r;try{mi(-1),o&&e.length>20&&WS(t,e,20,!1),n(r,i)}finally{mi(s)}}function sA(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Pd(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Pd(t,e,n,r,i,s,o,a,u,c){const l=20+r,d=l+i,h=function DG(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:W);return n}(l,d),f="function"==typeof c?c():c;return h[1]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function cA(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function dA(t,e,n,r,i,s){const o=s.hostBindings;if(o){let a=t.hostBindingOpCodes;null===a&&(a=t.hostBindingOpCodes=[]);const u=~e.index;(function MG(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(a)!=u&&a.push(u),a.push(r,i,o)}}function hA(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function fA(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function LG(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;zn(e)&&(n[""]=t)}}function pA(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function gA(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=os(i.type)),o=new fu(s,zn(i),null);t.blueprint[r]=o,n[r]=o,dA(t,e,0,r,Fo(t,n,i.hostVars,W),i)}function VG(t,e,n){const r=Pn(e,t),i=sA(n),s=t[10],o=Od(t,Nu(t,i,null,n.onPush?64:16,r,e,s,s.createRenderer(r,n),null,null));t[e.index]=o}function BG(t,e,n,r,i,s){const o=s[e];if(null!==o){const a=r.setInput;for(let u=0;u<o.length;){const c=o[u++],l=o[u++],d=o[u++];null!==a?r.setInput(n,d,c,l):n[l]=d}}}function UG(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function GG(t,e){const n=vn(e,t);if(bg(n)){const r=n[1];80&n[2]?Lo(r,n,r.template,n[8]):n[5]>0&&Nm(n)}}function Nm(t){for(let r=sm(t);null!==r;r=om(r))for(let i=10;i<r.length;i++){const s=r[i];if(1024&s[2]){const o=s[1];Lo(o,s,o.template,s[8])}else s[5]>0&&Nm(s)}const n=t[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=vn(n[r],t);bg(i)&&i[5]>0&&Nm(i)}}function HG(t,e){const n=vn(e,t),r=n[1];(function WG(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(r,n),Mu(r,n,n[8])}function Od(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Mm(t){for(;t;){t[2]|=64;const e=xu(t);if(bU(t)&&!e)return t;t=e}return null}function _A(t){!function Rm(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=em(n),i=r[1];bG(i,r,i.template,n)}}(t[8])}function Om(t,e,n){kg(0),e(t,n)}const zG=(()=>Promise.resolve(null))();function yA(t){return t[7]||(t[7]=[])}function vA(t){return t.cleanup||(t.cleanup=[])}function IA(t,e){const n=t[9],r=n?n.get(Au,null):null;r&&r.handleError(e)}function Ur(t,e,n){const r=function od(t,e){return Je(e[t])}(e,t);!function DS(t,e,n){je(t)?t.setValue(e,n):e.textContent=n}(t[Y],r,n)}function Fd(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=og(i,a):2==s&&(r=og(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Fm=new se("INJECTOR",-1);class TA{get(e,n=wu){if(n===wu){const r=new Error(`NullInjectorError: No provider for ${pe(e)}!`);throw r.name="NullInjectorError",r}return n}}const Lm=new se("Set Injector scope."),Ru={},YG={};let Vm;function bA(){return void 0===Vm&&(Vm=new TA),Vm}function DA(t,e=null,n=null,r){const i=CA(t,e,n,r);return i._resolveInjectorDefTypes(),i}function CA(t,e=null,n=null,r){return new JG(t,n,e||bA(),r)}class JG{constructor(e,n,r,i=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];n&&dr(n,a=>this.processProvider(a,e,n)),dr([e],a=>this.processInjectorType(a,[],s)),this.records.set(Fm,Vo(void 0,this));const o=this.records.get(Lm);this.scope=null!=o?o.value:null,this.source=i||("object"==typeof e?null:pe(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,n=wu,r=q.Default){this.assertNotDestroyed();const i=Q0(this),s=di(void 0);try{if(!(r&q.SkipSelf)){let a=this.records.get(e);if(void 0===a){const u=function sH(t){return"function"==typeof t||"object"==typeof t&&t instanceof se}(e)&&cg(e);a=u&&this.injectableDefInScope(u)?Vo(Bm(e),Ru):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&q.Self?bA():this.parent).get(e,n=r&q.Optional&&n===wu?null:n)}catch(o){if("NullInjectorError"===o.name){if((o[Id]=o[Id]||[]).unshift(pe(e)),i)throw o;return function Pj(t,e,n,r){const i=t[Id];throw e[K0]&&i.unshift(e[K0]),t.message=function Oj(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=pe(e);if(Array.isArray(e))i=e.map(pe).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):pe(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Aj,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[Id]=null,t}(o,e,"R3InjectorError",this.source)}throw o}finally{di(s),Q0(i)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((r,i)=>e.push(pe(i))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new he(205,!1)}processInjectorType(e,n,r){if(!(e=Q(e)))return!1;let i=r0(e);const s=null==i&&e.ngModule||void 0,o=void 0===s?e:s,a=-1!==r.indexOf(o);if(void 0!==s&&(i=r0(s)),null==i)return!1;if(null!=i.imports&&!a){let l;r.push(o);try{dr(i.imports,d=>{this.processInjectorType(d,n,r)&&(void 0===l&&(l=[]),l.push(d))})}finally{}if(void 0!==l)for(let d=0;d<l.length;d++){const{ngModule:h,providers:f}=l[d];dr(f,p=>this.processProvider(p,h,f||Ee))}}this.injectorDefTypes.add(o);const u=os(o)||(()=>new o);this.records.set(o,Vo(u,Ru));const c=i.providers;if(null!=c&&!a){const l=e;dr(c,d=>this.processProvider(d,l,c))}return void 0!==s&&void 0!==e.providers}processProvider(e,n,r){let i=Bo(e=Q(e))?e:Q(e&&e.provide);const s=function ZG(t,e,n){return AA(t)?Vo(void 0,t.useValue):Vo(function SA(t,e,n){let r;if(Bo(t)){const i=Q(t);return os(i)||Bm(i)}if(AA(t))r=()=>Q(t.useValue);else if(function tH(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Hg(t.deps||[]));else if(function eH(t){return!(!t||!t.useExisting)}(t))r=()=>ge(Q(t.useExisting));else{const i=Q(t&&(t.useClass||t.provide));if(!function rH(t){return!!t.deps}(t))return os(i)||Bm(i);r=()=>new i(...Hg(t.deps))}return r}(t),Ru)}(e);if(Bo(e)||!0!==e.multi)this.records.get(i);else{let o=this.records.get(i);o||(o=Vo(void 0,Ru,!0),o.factory=()=>Hg(o.multi),this.records.set(i,o)),i=e,o.multi.push(e)}this.records.set(i,s)}hydrate(e,n){return n.value===Ru&&(n.value=YG,n.value=n.factory()),"object"==typeof n.value&&n.value&&function iH(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this.onDestroy.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=Q(e.providedIn);return"string"==typeof n?"any"===n||n===this.scope:this.injectorDefTypes.has(n)}}function Bm(t){const e=cg(t),n=null!==e?e.factory:os(t);if(null!==n)return n;if(t instanceof se)throw new he(204,!1);if(t instanceof Function)return function XG(t){const e=t.length;if(e>0)throw function vu(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new he(204,!1);const n=function dU(t){const e=t&&(t[Xl]||t[s0]);if(e){const n=function hU(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new he(204,!1)}function Vo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function AA(t){return null!==t&&"object"==typeof t&&kj in t}function Bo(t){return"function"==typeof t}let Tn=(()=>{class t{static create(n,r){var i;if(Array.isArray(n))return DA({name:""},r,n,"");{const s=null!==(i=n.name)&&void 0!==i?i:"";return DA({name:s},n.parent,n.providers,s)}}}return t.THROW_IF_NOT_FOUND=wu,t.NULL=new TA,t.\u0275prov=ke({token:t,providedIn:"any",factory:()=>ge(Fm)}),t.__NG_ELEMENT_ID__=-1,t})();function fH(t,e){ld(em(t)[1],rt())}function $o(t,e,n,r){return function Bt(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}(t,function Eo(){return H.lFrame.bindingIndex++}(),n)?e+G(n)+r:W}function X(t,e=q.Default){const n=E();return null===n?ge(t,e):V0(rt(),n,Q(t),e)}function Km(t,e,n,r,i){const o=i?"class":"style";!function EA(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],u=e[o],c=t.data[o];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}(t,n,e.inputs[o],o,r)}function xe(t,e,n,r){const i=E(),s=ie(),o=20+t,a=i[Y],u=i[o]=um(a,e,function rj(){return H.lFrame.currentNamespace}()),c=s.firstCreatePass?function KH(t,e,n,r,i,s,o){const a=e.consts,c=Oo(e,t,2,i,gi(a,s));return function xm(t,e,n,r){let i=!1;if(w0()){const s=function OG(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];GS(n,o.selectors,!1)&&(i||(i=[]),_d(gu(n,e),t,o.type),zn(o)?(fA(t,n),i.unshift(o)):i.push(o))}return i}(t,e,n),o=null===r?null:{"":-1};if(null!==s){i=!0,pA(n,t.data.length,s.length);for(let l=0;l<s.length;l++){const d=s[l];d.providersResolver&&d.providersResolver(d)}let a=!1,u=!1,c=Fo(t,e,s.length,null);for(let l=0;l<s.length;l++){const d=s[l];n.mergedAttrs=pd(n.mergedAttrs,d.hostAttrs),gA(t,n,e,c,d),LG(c,d,o),null!==d.contentQueries&&(n.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(n.flags|=128);const h=d.type.prototype;!a&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),a=!0),!u&&(h.ngOnChanges||h.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),u=!0),c++}!function SG(t,e){const r=e.directiveEnd,i=t.data,s=e.attrs,o=[];let a=null,u=null;for(let c=e.directiveStart;c<r;c++){const l=i[c],d=l.inputs,h=null===s||$S(e)?null:UG(d,s);o.push(h),a=cA(d,c,a),u=cA(l.outputs,c,u)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=u}(t,n)}o&&function FG(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new he(-301,!1);r.push(e[i],s)}}}(n,r,o)}return n.mergedAttrs=pd(n.mergedAttrs,n.attrs),i}(e,n,c,gi(a,o)),null!==c.attrs&&Fd(c,c.attrs,!1),null!==c.mergedAttrs&&Fd(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,0,e,n,r):s.data[o];lr(c,!0);const l=c.mergedAttrs;null!==l&&fd(a,u,l);const d=c.classes;null!==d&&pm(a,u,d);const h=c.styles;return null!==h&&BS(a,u,h),64!=(64&c.flags)&&xd(s,i,u,c),0===function UU(){return H.lFrame.elementDepthCount}()&&Vt(u,i),function jU(){H.lFrame.elementDepthCount++}(),id(c)&&(function Sm(t,e,n){!w0()||(function RG(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;t.firstCreatePass||gu(n,e),Vt(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const u=t.data[a],c=zn(u);c&&VG(e,n,u);const l=mu(e,t,a,n);Vt(l,e),null!==o&&BG(0,a-i,l,u,0,o),c&&(vn(n.index,e)[8]=l)}}(t,e,n,Pn(n,e)),128==(128&n.flags)&&function PG(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,a=function QU(){return H.lFrame.currentDirectiveIndex}();try{mi(o);for(let u=r;u<i;u++){const c=t.data[u],l=e[u];Ag(u),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&hA(c,l)}}finally{mi(-1),Ag(a)}}(t,e,n))}(s,i,c),function iA(t,e,n){if(mg(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const o=t.data[s];o.contentQueries&&o.contentQueries(1,n[s],s)}}}(s,c,i)),null!==r&&function Am(t,e,n=Pn){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}(i,c),xe}function _e(){let t=rt();Cg()?function Sg(){H.lFrame.isParent=!1}():(t=t.parent,lr(t,!1));const e=t;!function $U(){H.lFrame.elementDepthCount--}();const n=ie();return n.firstCreatePass&&(ld(n,t),mg(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function uj(t){return 0!=(16&t.flags)}(e)&&Km(n,e,E(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function cj(t){return 0!=(32&t.flags)}(e)&&Km(n,e,E(),e.stylesWithoutHost,!1),_e}function Fu(t,e,n,r){return xe(t,e,n,r),_e(),Fu}function Jm(t){return!!t&&"function"==typeof t.then}const JH=function lx(t){return!!t&&"function"==typeof t.subscribe};function Ii(t,e,n,r){const i=E(),s=ie(),o=rt();return function hx(t,e,n,r,i,s,o,a){const u=id(r),l=t.firstCreatePass&&vA(t),d=e[8],h=yA(e);let f=!0;if(3&r.type||a){const m=Pn(r,e),I=a?a(m):m,_=h.length,b=a?k=>a(Je(k[r.index])):r.index;if(je(n)){let k=null;if(!a&&u&&(k=function XH(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[7],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==k)(k.__ngLastListenerFn__||k).__ngNextListenerFn__=s,k.__ngLastListenerFn__=s,f=!1;else{s=Xm(r,e,d,s,!1);const R=n.listen(I,i,s);h.push(s,R),l&&l.push(i,b,_,_+1)}}else s=Xm(r,e,d,s,!0),I.addEventListener(i,s,o),h.push(s),l&&l.push(i,b,_,o)}else s=Xm(r,e,d,s,!1);const p=r.outputs;let g;if(f&&null!==p&&(g=p[i])){const m=g.length;if(m)for(let I=0;I<m;I+=2){const B=e[g[I]][g[I+1]].subscribe(s),ve=h.length;h.push(s,B),l&&l.push(i,r.index,ve,-(ve+1))}}}(s,i,i[Y],o,t,e,!!n,r),Ii}function fx(t,e,n,r){try{return!1!==n(r)}catch(i){return IA(t,i),!1}}function Xm(t,e,n,r,i){return function s(o){if(o===Function)return r;const a=2&t.flags?vn(t.index,e):e;0==(32&e[2])&&Mm(a);let u=fx(e,0,r,o),c=s.__ngNextListenerFn__;for(;c;)u=fx(e,0,c,o)&&u,c=c.__ngNextListenerFn__;return i&&!1===u&&(o.preventDefault(),o.returnValue=!1),u}}function Fe(t,e=""){const n=E(),r=ie(),i=t+20,s=r.firstCreatePass?Oo(r,i,1,e,null):r.data[i],o=n[i]=function am(t,e){return je(t)?t.createText(e):t.createTextNode(e)}(n[Y],e);xd(r,n,o,s),lr(s,!1)}function Ut(t,e,n){const r=E(),i=$o(r,t,e,n);return i!==W&&Ur(r,qt(),i),Ut}const jd="en-US";let ok=jd;class Nk{}class Gq{resolveComponentFactory(e){throw function $q(t){const e=Error(`No component factory found for ${pe(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(e)}}let qd=(()=>{class t{}return t.NULL=new Gq,t})();function Hq(){return ea(rt(),E())}function ea(t,e){return new ta(Pn(t,e))}let ta=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=Hq,t})();class Rk{}let Kq=(()=>{class t{}return t.\u0275prov=ke({token:t,providedIn:"root",factory:()=>null}),t})();class zd{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Ok=new zd("13.3.11"),a_={};function Kd(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&r.push(Je(s)),qn(s))for(let a=10;a<s.length;a++){const u=s[a],c=u[1].firstChild;null!==c&&Kd(u[1],u,c,r)}const o=n.type;if(8&o)Kd(t,e,n.child,r);else if(32&o){const a=im(n,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=FS(e,n);if(Array.isArray(a))r.push(...a);else{const u=xu(e[16]);Kd(u[1],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}class Qq extends class $u{constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,n=e[1];return Kd(n,e,n.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(qn(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(function cm(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&CS(i,r),e>0&&(t[n-1][4]=r[4]);const s=vd(t,10+e);!function j$(t,e){ku(t,e,e[Y],2,null,null),e[0]=null,e[6]=null}(r[1],r);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}(e,r),vd(n,r))}this._attachedToViewContainer=!1}!function SS(t,e){if(!(256&e[2])){const n=e[Y];je(n)&&n.destroyNode&&ku(t,e,n,3,null,null),function H$(t){let e=t[13];if(!e)return lm(t[1],t);for(;e;){let n=null;if(cr(e))n=e[13];else{const r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)cr(e)&&lm(e[1],e),e=e[3];null===e&&(e=t),cr(e)&&lm(e[1],e),n=e&&e[4]}e=n}}(e)}}(this._lView[1],this._lView)}onDestroy(e){!function uA(t,e,n,r){const i=yA(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&vA(t).push(r,i.length-1))}(this._lView[1],this._lView,null,e)}markForCheck(){Mm(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function Pm(t,e,n){const r=e[10];r.begin&&r.begin();try{Lo(t,e,t.template,n)}catch(i){throw IA(e,i),i}finally{r.end&&r.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new he(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function G$(t,e){ku(t,e,e[Y],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new he(902,"");this._appRef=e}}{constructor(e){super(e),this._view=e}detectChanges(){_A(this._view)}checkNoChanges(){}get context(){return null}}class Fk extends qd{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Ft(e);return new u_(n,this.ngModule)}}function Lk(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class u_ extends Nk{constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function cG(t){return t.map(uG).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return Lk(this.componentDef.inputs)}get outputs(){return Lk(this.componentDef.outputs)}create(e,n,r,i){const s=(i=i||this.ngModule)?function Jq(t,e){return{get:(n,r,i)=>{const s=t.get(n,a_,i);return s!==a_||r===a_?s:e.get(n,r,i)}}}(e,i.injector):e,o=s.get(Rk,m0),a=s.get(Kq,null),u=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",l=r?function aA(t,e,n){if(je(t))return t.selectRootElement(e,n===ur.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(u,r,this.componentDef.encapsulation):um(o.createRenderer(null,this.componentDef),c,function Yq(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(c)),d=this.componentDef.onPush?576:528,h=function BA(t,e){return{components:[],scheduler:t||O$,clean:zG,playerHandler:e||null,flags:0}}(),f=Pd(0,null,null,1,0,null,null,null,null,null),p=Nu(null,f,h,d,null,null,o,u,a,s);let g,m;ud(p);try{const I=function LA(t,e,n,r,i,s){const o=n[1];n[20]=t;const u=Oo(o,20,2,"#host",null),c=u.mergedAttrs=e.hostAttrs;null!==c&&(Fd(u,c,!0),null!==t&&(fd(i,t,c),null!==u.classes&&pm(i,t,u.classes),null!==u.styles&&BS(i,t,u.styles)));const l=r.createRenderer(t,e),d=Nu(n,sA(e),null,e.onPush?64:16,n[20],u,r,l,s||null,null);return o.firstCreatePass&&(_d(gu(u,n),o,e.type),fA(o,u),pA(u,n.length,1)),Od(n,d),n[20]=d}(l,this.componentDef,p,o,u);if(l)if(r)fd(u,l,["ng-version",Ok.full]);else{const{attrs:_,classes:b}=function lG(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!Kn(i))break;i=s}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);_&&fd(u,l,_),b&&b.length>0&&pm(u,l,b.join(" "))}if(m=function Tg(t,e){return t.data[e]}(f,20),void 0!==n){const _=m.projection=[];for(let b=0;b<this.ngContentSelectors.length;b++){const k=n[b];_.push(null!=k?Array.from(k):null)}}g=function VA(t,e,n,r,i){const s=n[1],o=function NG(t,e,n){const r=rt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),gA(t,r,e,Fo(t,e,1,null),n));const i=mu(e,t,r.directiveStart,r);Vt(i,e);const s=Pn(r,e);return s&&Vt(s,e),i}(s,n,e);if(r.components.push(o),t[8]=o,i&&i.forEach(u=>u(o,e)),e.contentQueries){const u=rt();e.contentQueries(1,o,u.directiveStart)}const a=rt();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(mi(a.index),dA(n[1],a,0,a.directiveStart,a.directiveEnd,e),hA(e,o)),o}(I,this.componentDef,p,h,[fH]),Mu(f,p,null)}finally{cd()}return new Zq(this.componentType,g,ea(m,p),p,m)}}class Zq extends class jq{}{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=n,this.hostView=this.changeDetectorRef=new Qq(i),this.componentType=e}get injector(){return new Do(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class na{}const ra=new Map;class Uk extends na{constructor(e,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Fk(this);const r=Nn(e);this._bootstrapComponents=fr(r.bootstrap),this._r3Injector=CA(e,n,[{provide:na,useValue:this},{provide:qd,useValue:this.componentFactoryResolver}],pe(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,n=Tn.THROW_IF_NOT_FOUND,r=q.Default){return e===Tn||e===na||e===Fm?this:this._r3Injector.get(e,n,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class c_ extends class tz{}{constructor(e){super(),this.moduleType=e,null!==Nn(e)&&function nz(t){const e=new Set;!function n(r){const i=Nn(r,!0),s=i.id;null!==s&&(function Vk(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${pe(e)} vs ${pe(e.name)}`)}(s,ra.get(s),r),ra.set(s,r));const o=fr(i.imports);for(const a of o)e.has(a)||(e.add(a),n(a))}(t)}(e)}create(e){return new Uk(this.moduleType,e)}}function l_(t){return e=>{setTimeout(t,void 0,e)}}const jr=class wz extends tg{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){var i,s,o;let a=e,u=n||(()=>null),c=r;if(e&&"object"==typeof e){const d=e;a=null===(i=d.next)||void 0===i?void 0:i.bind(d),u=null===(s=d.error)||void 0===s?void 0:s.bind(d),c=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}this.__isAsync&&(u=l_(u),a&&(a=l_(a)),c&&(c=l_(c)));const l=super.subscribe({next:a,error:u,complete:c});return e instanceof Gn&&e.add(l),l}};function Xd(...t){}Symbol;const mN=new se("Application Initializer");let T_=(()=>{class t{constructor(n){this.appInits=n,this.resolve=Xd,this.reject=Xd,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(Jm(s))n.push(s);else if(JH(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)(ge(mN,8))},t.\u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const qu=new se("AppId",{providedIn:"root",factory:function _N(){return`${b_()}${b_()}${b_()}`}});function b_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const yN=new se("Platform Initializer"),Zd=new se("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),n3=new se("appBootstrapListener"),Ei=new se("LocaleId",{providedIn:"root",factory:()=>Mj(Ei,q.Optional|q.SkipSelf)||function r3(){return"undefined"!=typeof $localize&&$localize.locale||jd}()}),a3=(()=>Promise.resolve(0))();function D_(t){"undefined"==typeof Zone?a3.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class ft{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new jr(!1),this.onMicrotaskEmpty=new jr(!1),this.onStable=new jr(!1),this.onError=new jr(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function u3(){let t=me.requestAnimationFrame,e=me.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function d3(t){const e=()=>{!function l3(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(me,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,S_(t),t.isCheckStableRunning=!0,C_(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),S_(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return vN(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),wN(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return vN(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),wN(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,S_(t),C_(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ft.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ft.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,c3,Xd,Xd);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const c3={};function C_(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function S_(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function vN(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function wN(t){t._nesting--,C_(t)}class h3{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new jr,this.onMicrotaskEmpty=new jr,this.onStable=new jr,this.onError=new jr}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}let A_=(()=>{class t{constructor(n){this._ngZone=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ft.assertNotInAngularZone(),D_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())D_(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(n,r,i){return[]}}return t.\u0275fac=function(n){return new(n||t)(ge(ft))},t.\u0275prov=ke({token:t,factory:t.\u0275fac}),t})(),f3=(()=>{class t{constructor(){this._applications=new Map,x_.addToWindow(this)}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return x_.findTestabilityInTree(this,n,r)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();class p3{addToWindow(e){}findTestabilityInTree(e,n,r){return null}}let x_=new p3,ls=null;const IN=new se("AllowMultipleToken"),EN=new se("PlatformOnDestroy");function TN(t,e,n=[]){const r=`Platform: ${e}`,i=new se(r);return(s=[])=>{let o=k_();if(!o||o.injector.get(IN,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function y3(t){if(ls&&!ls.get(IN,!1))throw new he(400,"");ls=t;const e=t.get(bN),n=t.get(yN,null);n&&n.forEach(r=>r())}(function w3(t=[],e){return Tn.create({name:e,providers:[{provide:Lm,useValue:"platform"},{provide:EN,useValue:()=>ls=null},...t]})}(a,r))}return function v3(t){const e=k_();if(!e)throw new he(401,"");return e}()}}function k_(){var t;return null!==(t=null==ls?void 0:ls.get(bN))&&void 0!==t?t:null}let bN=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const a=function I3(t,e){let n;return n="noop"===t?new h3:("zone.js"===t?void 0:t)||new ft({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),u=[{provide:ft,useValue:a}];return a.run(()=>{const c=Tn.create({providers:u,parent:this.injector,name:n.moduleType.name}),l=n.create(c),d=l.injector.get(Au,null);if(!d)throw new he(402,"");return a.runOutsideAngular(()=>{const h=a.onError.subscribe({next:f=>{d.handleError(f)}});l.onDestroy(()=>{N_(this._modules,l),h.unsubscribe()})}),function E3(t,e,n){try{const r=n();return Jm(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(d,a,()=>{const h=l.injector.get(T_);return h.runInitializers(),h.donePromise.then(()=>(function WW(t){_n(t,"Expected localeId to be defined"),"string"==typeof t&&(ok=t.toLowerCase().replace(/_/g,"-"))}(l.injector.get(Ei,jd)||jd),this._moduleDoBootstrap(l),l))})})}bootstrapModule(n,r=[]){const i=DN({},r);return function m3(t,e,n){const r=new c_(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(CN);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new he(403,"");n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new he(404,"");this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(EN,null);null==n||n(),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(ge(Tn))},t.\u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function DN(t,e){return Array.isArray(e)?e.reduce(DN,t):Object.assign(Object.assign({},t),e)}let CN=(()=>{class t{constructor(n,r,i,s){this._zone=n,this._injector=r,this._exceptionHandler=i,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new Ot(u=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{u.next(this._stable),u.complete()})}),a=new Ot(u=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{ft.assertNotInAngularZone(),D_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,u.next(!0))})})});const l=this._zone.onUnstable.subscribe(()=>{ft.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{u.next(!1)}))});return()=>{c.unsubscribe(),l.unsubscribe()}});this.isStable=iU(o,a.pipe(function sU(t={}){const{connector:e=(()=>new tg),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,u,c=0,l=!1,d=!1;const h=()=>{null==a||a.unsubscribe(),a=void 0},f=()=>{h(),o=u=void 0,l=d=!1},p=()=>{const g=o;f(),null==g||g.unsubscribe()};return po((g,m)=>{c++,!d&&!l&&h();const I=u=null!=u?u:e();m.add(()=>{c--,0===c&&!d&&!l&&(a=ig(p,i))}),I.subscribe(m),!o&&c>0&&(o=new ou({next:_=>I.next(_),error:_=>{d=!0,h(),a=ig(f,n,_),I.error(_)},complete:()=>{l=!0,h(),a=ig(f,r),I.complete()}}),ts(g).subscribe(o))})(s)}}()))}bootstrap(n,r){if(!this._initStatus.done)throw new he(405,"");let i;i=n instanceof Nk?n:this._injector.get(qd).resolveComponentFactory(n),this.componentTypes.push(i.componentType);const s=function _3(t){return t.isBoundToModule}(i)?void 0:this._injector.get(na),a=i.create(Tn.NULL,[],r||i.selector,s),u=a.location.nativeElement,c=a.injector.get(A_,null),l=c&&a.injector.get(f3);return c&&l&&l.registerApplication(u,c),a.onDestroy(()=>{this.detachView(a.hostView),N_(this.components,a),l&&l.unregisterApplication(u)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new he(101,"");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;N_(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(n3,[]).concat(this._bootstrapListeners).forEach(i=>i(n))}ngOnDestroy(){this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(n){return new(n||t)(ge(ft),ge(Tn),ge(Au),ge(T_))},t.\u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function N_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}let AN=!0;const U3=TN(null,"core",[]);let j3=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(ge(CN))},t.\u0275mod=fi({type:t}),t.\u0275inj=Or({}),t})(),rh=null;function Ku(){return rh}const vr=new se("DocumentToken");let cK=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=fi({type:t}),t.\u0275inj=Or({}),t})();class Q_ extends class gK extends class H3{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function G3(t){rh||(rh=t)}(new Q_)}onAndCancel(e,n,r){return e.addEventListener(n,r,!1),()=>{e.removeEventListener(n,r,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function mK(){return Ju=Ju||document.querySelector("base"),Ju?Ju.getAttribute("href"):null}();return null==n?null:function _K(t){fh=fh||document.createElement("a"),fh.setAttribute("href",t);const e=fh.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Ju=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function k4(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let fh,Ju=null;const tM=new se("TRANSITION_ID"),vK=[{provide:mN,useFactory:function yK(t,e,n){return()=>{n.get(T_).donePromise.then(()=>{const r=Ku(),i=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[tM,vr,Tn],multi:!0}];class Y_{static init(){!function g3(t){x_=t}(new Y_)}addToWindow(e){me.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},me.getAllAngularTestabilities=()=>e.getAllTestabilities(),me.getAllAngularRootElements=()=>e.getAllRootElements(),me.frameworkStabilizers||(me.frameworkStabilizers=[]),me.frameworkStabilizers.push(r=>{const i=me.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(function(u){u.whenStable(a)})})}findTestabilityInTree(e,n,r){if(null==n)return null;const i=e.getTestability(n);return null!=i?i:r?Ku().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null}}let wK=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=ke({token:t,factory:t.\u0275fac}),t})();const ph=new se("EventManagerPlugins");let gh=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>i.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(n))return this._eventNameToPlugin.set(n,o),o}throw new Error(`No event manager plugin found for event ${n}`)}}return t.\u0275fac=function(n){return new(n||t)(ge(ph),ge(ft))},t.\u0275prov=ke({token:t,factory:t.\u0275fac}),t})();class nM{constructor(e){this._doc=e}addGlobalEventListener(e,n,r){const i=Ku().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let rM=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=ke({token:t,factory:t.\u0275fac}),t})(),Xu=(()=>{class t extends rM{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,i){n.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(r.appendChild(o))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(iM),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(n,i,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(iM))}}return t.\u0275fac=function(n){return new(n||t)(ge(vr))},t.\u0275prov=ke({token:t,factory:t.\u0275fac}),t})();function iM(t){Ku().remove(t)}const J_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},X_=/%COMP%/g;function mh(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?mh(t,i,n):(i=i.replace(X_,t),n.push(i))}return n}function aM(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Z_=(()=>{class t{constructor(n,r,i){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new ey(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case ur.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new CK(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(n),i}case 1:case ur.ShadowDom:return new SK(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const i=mh(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(n){return new(n||t)(ge(gh),ge(Xu),ge(qu))},t.\u0275prov=ke({token:t,factory:t.\u0275fac}),t})();class ey{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?document.createElementNS(J_[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){e.appendChild(n)}insertBefore(e,n,r){e&&e.insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=J_[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=J_[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(In.DashCase|In.Important)?e.style.setProperty(n,r,i&In.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&In.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,aM(r)):this.eventManager.addEventListener(e,n,aM(r))}}class CK extends ey{constructor(e,n,r,i){super(e),this.component=r;const s=mh(i+"-"+r.id,r.styles,[]);n.addStyles(s),this.contentAttr=function TK(t){return"_ngcontent-%COMP%".replace(X_,t)}(i+"-"+r.id),this.hostAttr=function bK(t){return"_nghost-%COMP%".replace(X_,t)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}class SK extends ey{constructor(e,n,r,i){super(e),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=mh(i.id,i.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let AK=(()=>{class t extends nM{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return t.\u0275fac=function(n){return new(n||t)(ge(vr))},t.\u0275prov=ke({token:t,factory:t.\u0275fac}),t})();const cM=["alt","control","meta","shift"],kK={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lM={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},NK={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let MK=(()=>{class t extends nM{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ku().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="";if(cM.forEach(u=>{const c=r.indexOf(u);c>-1&&(r.splice(c,1),o+=u+".")}),o+=s,0!=r.length||0===s.length)return null;const a={};return a.domEventName=i,a.fullKey=o,a}static getEventFullKey(n){let r="",i=function RK(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&lM.hasOwnProperty(e)&&(e=lM[e]))}return kK[e]||e}(n);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),cM.forEach(s=>{s!=i&&NK[s](n)&&(r+=s+".")}),r+=i,r}static eventCallback(n,r,i){return s=>{t.getEventFullKey(s)===n&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return t.\u0275fac=function(n){return new(n||t)(ge(vr))},t.\u0275prov=ke({token:t,factory:t.\u0275fac}),t})();const LK=TN(U3,"browser",[{provide:Zd,useValue:"browser"},{provide:yN,useValue:function PK(){Q_.makeCurrent(),Y_.init()},multi:!0},{provide:vr,useFactory:function FK(){return function OU(t){Ig=t}(document),document},deps:[]}]),VK=[{provide:Lm,useValue:"root"},{provide:Au,useFactory:function OK(){return new Au},deps:[]},{provide:ph,useClass:AK,multi:!0,deps:[vr,ft,Zd]},{provide:ph,useClass:MK,multi:!0,deps:[vr]},{provide:Z_,useClass:Z_,deps:[gh,Xu,qu]},{provide:Rk,useExisting:Z_},{provide:rM,useExisting:Xu},{provide:Xu,useClass:Xu,deps:[vr]},{provide:A_,useClass:A_,deps:[ft]},{provide:gh,useClass:gh,deps:[ph,ft]},{provide:class pK{},useClass:wK,deps:[]}];let BK=(()=>{class t{constructor(n){if(n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:t,providers:[{provide:qu,useValue:n.appId},{provide:tM,useExisting:qu},vK]}}}return t.\u0275fac=function(n){return new(n||t)(ge(t,12))},t.\u0275mod=fi({type:t}),t.\u0275inj=Or({providers:VK,imports:[cK,j3]}),t})();function fM(t,e,n,r,i,s,o){try{var a=t[s](o),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(r,i)}function w(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(u){fM(s,r,i,o,a,"next",u)}function a(u){fM(s,r,i,o,a,"throw",u)}o(void 0)})}}"undefined"!=typeof window&&window;const C=function(t,e){if(!t)throw sa(e)},sa=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},pM=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},_h={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0;let h=(15&a)<<2|c>>6,f=63&c;u||(f=64,o||(h=64)),r.push(n[s>>2],n[(3&s)<<4|a>>4],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(pM(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const u=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,null==s||null==a||null==c||null==d)throw Error();r.push(s<<2|a>>4),64!==c&&(r.push(a<<4&240|c>>2),64!==d&&r.push(c<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},gM=function(t){const e=pM(t);return _h.encodeByteArray(e,!0)},yh=function(t){return gM(t).replace(/\./g,"")},ry=function(t){try{return _h.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function JK(t){return mM(void 0,t)}function mM(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!XK(n)||(t[n]=mM(t[n],e[n]));return t}function XK(t){return"__proto__"!==t}class oa{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(n):e(n,r))}}}function bn(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function iy(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bn())}function sy(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function _M(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function hs(){return"object"==typeof indexedDB}function Zu(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(n){e(n)}})}function oy(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class tr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,tr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wr.prototype.create)}}class wr{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function t8(t,e){return t.replace(n8,(n,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new tr(i,`${this.serviceName}: ${o} (${i}).`,r)}}const n8=/\{\$([^}]+)}/g;function ec(t){return JSON.parse(t)}function pt(t){return JSON.stringify(t)}const vh=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=ec(ry(s[0])||""),n=ec(ry(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}};function Wr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function aa(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function yM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function wh(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function ay(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(vM(s)&&vM(o)){if(!ay(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function vM(t){return null!==t&&"object"==typeof t}function uy(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class s8{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if("string"==typeof e)for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=4294967295&(h<<1|h>>>31)}let c,l,i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],u=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),l=1518500249):(c=s^o^a,l=1859775393):d<60?(c=s&o|a&(s|o),l=2400959708):(c=s^o^a,l=3395469782);const h=(i<<5|i>>>27)+c+u+l+r[d]&4294967295;u=a,a=o,o=4294967295&(s<<30|s>>>2),s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(null==e)return;void 0===n&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(0===o)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&n,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}class a8{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(void 0===e&&void 0===n&&void 0===r)throw new Error("Missing Observer.");i=function u8(t,e){if("object"!=typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"==typeof t[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:n,complete:r},void 0===i.next&&(i.next=cy),void 0===i.error&&(i.error=cy),void 0===i.complete&&(i.complete=cy);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(o){}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{n(this.observers[e])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cy(){}function tc(t,e){return`${t} failed: ${e} argument `}const Ih=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function ly(t,e=1e3,n=2){const r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function qr(t){return t&&t._delegate?t._delegate:t}class St{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const fs="[DEFAULT]";class g8{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new oa;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch(i){}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(n=null==e?void 0:e.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function _8(t){return"EAGER"===t.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:fs})}catch(n){}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch(s){}}}}clearInstance(e=fs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return w(function*(){const n=Array.from(e.instances.values());yield Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=fs){return this.instances.has(e)}getOptions(e=fs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch(s){}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(t=e,t===fs?void 0:t),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(i){}var t;return r||null}normalizeInstanceIdentifier(e=fs){return this.component?this.component.multipleInstances?e:fs:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class y8{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new g8(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const dy=[];var le=(()=>{return(t=le||(le={}))[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",le;var t})();const wM={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},v8=le.INFO,w8={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},I8=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=w8[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class ps{constructor(e){this.name=e,this._logLevel=v8,this._logHandler=I8,this._userLogHandler=null,dy.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?wM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}}let IM,EM;const TM=new WeakMap,hy=new WeakMap,bM=new WeakMap,fy=new WeakMap,py=new WeakMap;let gy={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return hy.get(t);if("objectStoreNames"===e)return t.objectStoreNames||bM.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zr(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function x8(t){return"function"==typeof t?function A8(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function b8(){return EM||(EM=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(my(this),e),zr(TM.get(this))}:function(...e){return zr(t.apply(my(this),e))}:function(e,...n){const r=t.call(my(this),e,...n);return bM.set(r,e.sort?e.sort():[e]),zr(r)}}(t):(t instanceof IDBTransaction&&function C8(t){if(hy.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});hy.set(t,e)}(t),((t,e)=>e.some(n=>t instanceof n))(t,function T8(){return IM||(IM=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,gy):t)}function zr(t){if(t instanceof IDBRequest)return function D8(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(zr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&TM.set(n,t)}).catch(()=>{}),py.set(e,t),e}(t);if(fy.has(t))return fy.get(t);const e=x8(t);return e!==t&&(fy.set(t,e),py.set(e,t)),e}const my=t=>py.get(t);function Eh(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=zr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(zr(o.result),u.oldVersion,u.newVersion,zr(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function _y(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",()=>e()),zr(n).then(()=>{})}const k8=["get","getKey","getAll","getAllKeys","count"],N8=["put","add","delete","clear"],yy=new Map;function DM(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(yy.get(e))return yy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=N8.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!k8.includes(n))return;const s=function(){var o=w(function*(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(u.shift())),(yield Promise.all([l[n](...u),i&&c.done]))[0]});return function(u){return o.apply(this,arguments)}}();return yy.set(e,s),s}!function S8(t){gy=t(gy)}(t=>y2(_2({},t),{get:(e,n,r)=>DM(e,n)||t.get(e,n,r),has:(e,n)=>!!DM(e,n)||t.has(e,n)}));class M8{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function R8(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const vy="@firebase/app",gs=new ps("@firebase/app"),wy="[DEFAULT]",s6={[vy]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ms=new Map,Th=new Map;function o6(t,e){try{t.container.addComponent(e)}catch(n){gs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function jt(t){const e=t.name;if(Th.has(e))return gs.debug(`There were multiple attempts to register component ${e}.`),!1;Th.set(e,t);for(const n of ms.values())o6(n,t);return!0}function nc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const bi=new wr("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class u6{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new St("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bi.create("app-deleted",{appName:this._name})}}function c6(t,e={}){"object"!=typeof e&&(e={name:e});const n=Object.assign({name:wy,automaticDataCollectionEnabled:!1},e),r=n.name;if("string"!=typeof r||!r)throw bi.create("bad-app-name",{appName:String(r)});const i=ms.get(r);if(i){if(ay(t,i.options)&&ay(n,i.config))return i;throw bi.create("duplicate-app",{appName:r})}const s=new y8(r);for(const a of Th.values())s.addComponent(a);const o=new u6(t,n,s);return ms.set(r,o),o}function Iy(t=wy){const e=ms.get(t);if(!e)throw bi.create("no-app",{appName:t});return e}function SM(){return Array.from(ms.values())}function Me(t,e,n){var r;let i=null!==(r=s6[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void gs.warn(a.join(" "))}jt(new St(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const ic="firebase-heartbeat-store";let Ty=null;function AM(){return Ty||(Ty=Eh("firebase-heartbeat-database",1,{upgrade:(t,e)=>{0===e&&t.createObjectStore(ic)}}).catch(t=>{throw bi.create("idb-open",{originalErrorMessage:t.message})})),Ty}function by(){return(by=w(function*(t){var e;try{return(yield AM()).transaction(ic).objectStore(ic).get(kM(t))}catch(n){if(n instanceof tr)gs.warn(n.message);else{const r=bi.create("idb-get",{originalErrorMessage:null===(e=n)||void 0===e?void 0:e.message});gs.warn(r.message)}}})).apply(this,arguments)}function xM(t,e){return Dy.apply(this,arguments)}function Dy(){return(Dy=w(function*(t,e){var n;try{const i=(yield AM()).transaction(ic,"readwrite");return yield i.objectStore(ic).put(e,kM(t)),i.done}catch(r){if(r instanceof tr)gs.warn(r.message);else{const i=bi.create("idb-set",{originalErrorMessage:null===(n=r)||void 0===n?void 0:n.message});gs.warn(i.message)}}})).apply(this,arguments)}function kM(t){return`${t.name}!${t.options.appId}`}class g6{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _6(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return w(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=NM();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return w(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const n=NM(),{heartbeatsToSend:r,unsentEntries:i}=function m6(t,e=1024){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),MM(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),MM(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=yh(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function NM(){return(new Date).toISOString().substring(0,10)}class _6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return w(function*(){return!!hs()&&Zu().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return w(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function h6(t){return by.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var n=this;return w(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return xM(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return w(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return xM(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function MM(t){return yh(JSON.stringify({version:2,heartbeats:t})).length}!function y6(t){jt(new St("platform-logger",e=>new M8(e),"PRIVATE")),jt(new St("heartbeat",e=>new g6(e),"PRIVATE")),Me(vy,"0.7.30",t),Me(vy,"0.7.30","esm2017"),Me("fire-js","")}("");const RM="@firebase/database";let Cy="";class w6{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){null==n?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),pt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return null==n?null:ec(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class I6{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){null==n?delete this.cache_[e]:this.cache_[e]=n}get(e){return Wr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const OM=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new w6(e)}}catch(e){}return new I6},_s=OM("localStorage"),Sy=OM("sessionStorage"),ua=new ps("@firebase/database"),FM=function(){let t=1;return function(){return t++}}(),LM=function(t){const e=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,C(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),n=new s8;n.update(e);const r=n.digest();return _h.encodeByteArray(r)},sc=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=sc.apply(null,r):e+="object"==typeof r?pt(r):r,e+=" "}return e};let ys=null,VM=!0;const gt=function(...t){if(!0===VM&&(VM=!1,null===ys&&!0===Sy.get("logging_enabled")&&function(t,e){C(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(ua.logLevel=le.VERBOSE,ys=ua.log.bind(ua),e&&Sy.set("logging_enabled",!0)):"function"==typeof t?ys=t:(ys=null,Sy.remove("logging_enabled"))}(!0)),ys){const e=sc.apply(null,t);ys(e)}},oc=function(t){return function(...e){gt(t,...e)}},Ay=function(...t){const e="FIREBASE INTERNAL ERROR: "+sc(...t);ua.error(e)},Ir=function(...t){const e=`FIREBASE FATAL ERROR: ${sc(...t)}`;throw ua.error(e),new Error(e)},$t=function(...t){const e="FIREBASE WARNING: "+sc(...t);ua.warn(e)},bh=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Kr="[MIN_NAME]",Er="[MAX_NAME]",vs=function(t,e){if(t===e)return 0;if(t===Kr||e===Er)return-1;if(e===Kr||t===Er)return 1;{const n=Dh(t),r=Dh(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1}},b6=function(t,e){return t===e?0:t<e?-1:1},ac=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+pt(e))},xy=function(t){if("object"!=typeof t||null===t)return pt(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)0!==r&&(n+=","),n+=pt(e[r]),n+=":",n+=xy(t[e[r]]);return n+="}",n},UM=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function mt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const jM=function(t){C(!bh(t),"Invalid JSON number");const r=1023;let i,s,o,a,u;0===t?(s=0,o=0,i=1/t==-1/0?1:0):(i=t<0,(t=Math.abs(t))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(t/Math.pow(2,-1074))));const c=[];for(u=52;u;u-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(u=11;u;u-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const l=c.join("");let d="";for(u=0;u<64;u+=8){let h=parseInt(l.substr(u,8),2).toString(16);1===h.length&&(h="0"+h),d+=h}return d.toLowerCase()},A6=new RegExp("^-?(0*)\\d{1,10}$"),Dh=function(t){if(A6.test(t)){const e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},ca=function(t){try{t()}catch(e){setTimeout(()=>{throw $t("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},uc=function(t,e){const n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n};class k6{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=null==n?void 0:n.getImmediate({optional:!0}),this.appCheck||null==n||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;null===(n=this.appCheckProvider)||void 0===n||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){$t(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class N6{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&"auth/token-not-initialized"===n.code?(gt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',$t(e)}}let cc=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}return t.OWNER="owner",t})();const zM=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,YM="websocket",JM="long_polling";class My{constructor(e,n,r,i,s=!1,o="",a=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=_s.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&_s.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function XM(t,e,n){let r;if(C("string"==typeof e,"typeof type must == string"),C("object"==typeof n,"typeof params must == object"),e===YM)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==JM)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function M6(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);const i=[];return mt(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class R6{constructor(){this.counters_={}}incrementCounter(e,n=1){Wr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return JK(this.counters_)}}const Ry={},Py={};function Oy(t){const e=t.toString();return Ry[e]||(Ry[e]=new R6),Ry[e]}class O6{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ca(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Di{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=oc(e),this.stats_=Oy(n),this.urlFn=u=>(this.appCheckToken&&(u.ac=this.appCheckToken),XM(n,JM,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new O6(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{let e=!1;const n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Fy((...s)=>{const[o,a,u,c,l]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=u;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&zM.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Di.forceAllow_=!0}static forceDisallow(){Di.forceDisallow_=!0}static isAvailable(){return!(!Di.forceAllow_&&(Di.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=pt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=gM(n),i=UM(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=pt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Fy{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=FM(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=Fy.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){gt("frame writing exception"),a.stack&&gt(a.stack),gt(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||gt("No IE domain setting required")}catch(n){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return n+=r,this.addLongPollTag_(n,this.currentSerial),!0}return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{gt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let Sh=null;"undefined"!=typeof MozWebSocket?Sh=MozWebSocket:"undefined"!=typeof WebSocket&&(Sh=WebSocket);let la=(()=>{class t{constructor(n,r,i,s,o,a,u){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=oc(this.connId),this.stats_=Oy(r),this.connURL=t.connectionURL_(r,a,u,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){const a={v:"5"};return"undefined"!=typeof location&&location.hostname&&zM.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),XM(n,YM,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,_s.set("previous_websocket_failure",!0);try{let i;0,this.mySock=new Sh(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&null!==Sh&&!t.forceDisallow_}static previouslyFailed(){return _s.isInMemoryStorage||!0===_s.get("previous_websocket_failure")}markConnectionHealthy(){_s.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=ec(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(C(null===this.frames,"We already have a frame buffer"),n.length<=6){const r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(null===this.mySock)return;const r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();const r=pt(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=UM(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t})(),sR=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Di,la]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){const r=la&&la.isAvailable();let i=r&&!la.previouslyFailed();if(n.webSocketOnly&&(r||$t("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[la];else{const s=this.transports_=[];for(const o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return t.globalTransportInitialized_=!1,t})();class hR{constructor(e,n,r,i,s,o,a,u,c,l){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=oc("c:"+this.id+":"),this.transportManager_=new sR(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=uc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const n=e.t;"a"===n?this.upgradeIfSecondaryHealthy_():"r"===n?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===n&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ac("t",e),r=ac("d",e);if("c"===n)this.onSecondaryControl_(r);else{if("d"!==n)throw new Error("Unknown protocol layer: "+n);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ac("t",e),r=ac("d",e);"c"===n?this.onControl_(r):"d"===n&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ac("t",e);if("d"in e){const r=e.d;if("h"===n)this.onHandshake_(r);else if("n"===n){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===n?this.onConnectionShutdown_(r):"r"===n?this.onReset_(r):"e"===n?Ay("Server Error: "+r):"o"===n?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ay("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),"5"!==r&&$t("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),uc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):uc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(_s.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class fR{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}class pR{constructor(e){this.allowedEvents_=e,this.listeners_={},C(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){C(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}class Ah extends pR{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!iy()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ah}getInitialEvent(e){return C("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class fe{constructor(e,n){if(void 0===n){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)""!==this.pieces_[n]&&(e+="/"+this.pieces_[n]);return e||"/"}}function de(){return new fe("")}function Z(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ci(t){return t.pieces_.length-t.pieceNum_}function Te(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new fe(t.pieces_,e)}function Vy(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function lc(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function _R(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new fe(e,0)}function Re(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof fe)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new fe(n,0)}function ee(t){return t.pieceNum_>=t.pieces_.length}function Yt(t,e){const n=Z(t),r=Z(e);if(null===n)return e;if(n===r)return Yt(Te(t),Te(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function By(t,e){if(Ci(t)!==Ci(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Bn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Ci(t)>Ci(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class i7{constructor(e,n){this.errorPrefix_=n,this.parts_=lc(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Ih(this.parts_[r]);yR(this)}}function yR(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ws(t))}function ws(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}class Uy extends pR{constructor(){let e,n;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Uy}getInitialEvent(e){return C("visible"===e,"Unknown event type: "+e),[this.visible_]}}const dc=1e3;let kh,Is=(()=>{class t extends fR{constructor(n,r,i,s,o,a,u,c){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=u,this.authOverride_=c,this.id=t.nextPersistentConnectionId_++,this.log_=oc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=dc,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Uy.getInstance().on("visible",this.onVisible_,this),-1===n.host.indexOf("fblocal")&&Ah.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){const s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(pt(o)),C(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();const r=new oa,i={p:n._path.toString(),q:n._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:a=>{const u=a.d;"ok"===a.s?r.resolve(u):r.reject(u)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(n,r,i,s){this.initConnection_();const o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),C(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),C(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const u={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,u),this.connected_&&this.sendListen_(u)}sendGet_(n){const r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){const r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest("q",o,u=>{const c=u.d,l=u.s;t.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",u),"ok"!==l&&this.removeListen_(i,s),n.onComplete&&n.onComplete(l,c))})}static warnOnListenWarnings_(n,r){if(n&&"object"==typeof n&&Wr(n,"w")){const i=aa(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();$t(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&40===n.length||function(t){const e=vh(t).claims;return"object"==typeof e&&!0===e.admin}(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_,r=function(t){const n=vh(t).claims;return!!n&&"object"==typeof n&&n.hasOwnProperty("iat")}(n)?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===n&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{const r=n.s,i=n.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){const i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),C(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);const o={p:n};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(n){const r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){const r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+pt(n));const r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),"d"===n?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===n?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===n?this.onListenRevoked_(r.p,r.q):"ac"===n?this.onAuthRevoked_(r.s,r.d):"apc"===n?this.onAppCheckRevoked_(r.s,r.d):"sd"===n?this.onSecurityDebugPacket_(r):Ay("Unrecognized action received from server: "+pt(n)+"\nAre you using the latest client?")}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){C(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=dc,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=dc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=dc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const n=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var n=this;return w(function*(){if(n.shouldReconnect_()){n.log_("Making a connection attempt"),n.lastConnectionAttemptTime_=(new Date).getTime(),n.lastConnectionEstablishedTime_=null;const r=n.onDataMessage_.bind(n),i=n.onReady_.bind(n),s=n.onRealtimeDisconnect_.bind(n),o=n.id+":"+t.nextConnectionId_++,a=n.lastSessionId;let u=!1,c=null;const l=function(){c?c.close():(u=!0,s())};n.realtime_={close:l,sendRequest:function(f){C(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)}};const h=n.forceTokenRefresh_;n.forceTokenRefresh_=!1;try{const[f,p]=yield Promise.all([n.authTokenProvider_.getToken(h),n.appCheckTokenProvider_.getToken(h)]);u?gt("getToken() completed but was canceled"):(gt("getToken() completed. Creating connection."),n.authToken_=f&&f.accessToken,n.appCheckToken_=p&&p.token,c=new hR(o,n.repoInfo_,n.applicationId_,n.appCheckToken_,n.authToken_,r,i,s,g=>{$t(g+" ("+n.repoInfo_.toString()+")"),n.interrupt("server_kill")},a))}catch(f){n.log_("Failed to get token: "+f),u||(n.repoInfo_.nodeAdmin&&$t(f),l())}}})()}interrupt(n){gt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){gt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],yM(this.interruptReasons_)&&(this.reconnectDelay_=dc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){const r=n-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){const r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;i=r?r.map(o=>xy(o)).join("$"):"default";const s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){const i=new fe(n).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){gt("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===n||"permission_denied"===n)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){gt("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===n||"permission_denied"===n)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const n of this.listens.values())for(const r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){const n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){const n={};let r="js";n["sdk."+r+"."+Cy.replace(/\./g,"-")]=1,iy()?n["framework.cordova"]=1:_M()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){const n=Ah.getInstance().currentlyOnline();return yM(this.interruptReasons_)&&n}}return t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t})();class ne{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ne(e,n)}}class xh{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new ne(Kr,e),i=new ne(Kr,n);return 0!==this.compare(r,i)}minPost(){return ne.MIN}}class IR extends xh{static get __EMPTY_NODE(){return kh}static set __EMPTY_NODE(e){kh=e}compare(e,n){return vs(e.name,n.name)}isDefinedOn(e){throw sa("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ne.MIN}maxPost(){return new ne(Er,kh)}makePost(e,n){return C("string"==typeof e,"KeyIndex indexValue must always be a string."),new ne(e,kh)}toString(){return".key"}}const Tr=new IR;class Nh{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let n,e=this.nodeStack_.pop();if(n=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let $y,nr=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=null!=i?i:t.RED,this.left=null!=s?s:un.EMPTY_NODE,this.right=null!=o?o:un.EMPTY_NODE}copy(n,r,i,s,o){return new t(null!=n?n:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=s?s:this.left,null!=o?o:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this;const o=i(n,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(n,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return un.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(n,i.key)){if(i.right.isEmpty())return un.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){const n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){const n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){const n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})();class un{constructor(e,n=un.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new un(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,nr.BLACK,null,null))}remove(e){return new un(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,nr.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),0===n)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),0===n){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}n<0?r=r.left:n>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Nh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Nh(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Nh(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Nh(this.root_,null,this.comparator_,!0,e)}}function h7(t,e){return vs(t.name,e.name)}function jy(t,e){return vs(t,e)}un.EMPTY_NODE=new class d7{copy(e,n,r,i,s){return this}insert(e,n,r){return new nr(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const ER=function(t){return"number"==typeof t?"number:"+jM(t):"string:"+t},TR=function(t){if(t.isLeafNode()){const e=t.val();C("string"==typeof e||"number"==typeof e||"object"==typeof e&&Wr(e,".sv"),"Priority must be a string or number.")}else C(t===$y||t.isEmpty(),"priority of unexpected type.");C(t===$y||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let bR,DR,CR,da=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,C(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),TR(this.priorityNode_)}static set __childrenNodeConstructor(n){bR=n}static get __childrenNodeConstructor(){return bR}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return".priority"===n?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return ee(n)?this:".priority"===Z(n)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return".priority"===n?this.updatePriority(r):r.isEmpty()&&".priority"!==n?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){const i=Z(n);return null===i?r:r.isEmpty()&&".priority"!==i?this:(C(".priority"!==i||1===Ci(n),".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Te(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+ER(this.priorityNode_.val())+":");const r=typeof this.value_;n+=r+":",n+="number"===r?jM(this.value_):this.value_,this.lazyHash_=LM(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(C(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){const r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return C(s>=0,"Unknown leaf type: "+r),C(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){const r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t})();const Ce=new class m7 extends xh{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return 0===s?vs(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ne.MIN}maxPost(){return new ne(Er,new da("[PRIORITY-POST]",CR))}makePost(e,n){const r=DR(e);return new ne(n,new da("[PRIORITY-POST]",r))}toString(){return".priority"}},_7=Math.log(2);class y7{constructor(e){this.count=parseInt(Math.log(e+1)/_7,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Mh=function(t,e,n,r){t.sort(e);const i=function(u,c){const l=c-u;let d,h;if(0===l)return null;if(1===l)return d=t[u],h=n?n(d):d,new nr(h,d.node,nr.BLACK,null,null);{const f=parseInt(l/2,10)+u,p=i(u,f),g=i(f+1,c);return d=t[f],h=n?n(d):d,new nr(h,d.node,nr.BLACK,p,g)}},a=function(u){let c=null,l=null,d=t.length;const h=function(p,g){const m=d-p,I=d;d-=p;const _=i(m+1,I),b=t[m],k=n?n(b):b;f(new nr(k,b.node,g,null,_))},f=function(p){c?(c.left=p,c=p):(l=p,c=p)};for(let p=0;p<u.count;++p){const g=u.nextBitIsOne(),m=Math.pow(2,u.count-(p+1));g?h(m,nr.BLACK):(h(m,nr.BLACK),h(m,nr.RED))}return l}(new y7(t.length));return new un(r||e,a)};let Gy;const ha={};class Qr{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return C(ha&&Ce,"ChildrenNode.ts has not been loaded"),Gy=Gy||new Qr({".priority":ha},{".priority":Ce}),Gy}get(e){const n=aa(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof un?n:null}hasIndex(e){return Wr(this.indexSet_,e.toString())}addIndex(e,n){C(e!==Tr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(ne.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?Mh(r,e.getCompare()):ha;const u=e.toString(),c=Object.assign({},this.indexSet_);c[u]=e;const l=Object.assign({},this.indexes_);return l[u]=a,new Qr(l,c)}addToIndexes(e,n){const r=wh(this.indexes_,(i,s)=>{const o=aa(this.indexSet_,s);if(C(o,"Missing index implementation for "+s),i===ha){if(o.isDefinedOn(e.node)){const a=[],u=n.getIterator(ne.Wrap);let c=u.getNext();for(;c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Mh(a,o.getCompare())}return ha}{const a=n.get(e.name);let u=i;return a&&(u=u.remove(new ne(e.name,a))),u.insert(e,e.node)}});return new Qr(r,this.indexSet_)}removeFromIndexes(e,n){const r=wh(this.indexes_,i=>{if(i===ha)return i;{const s=n.get(e.name);return s?i.remove(new ne(e.name,s)):i}});return new Qr(r,this.indexSet_)}}let hc,z=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&TR(this.priorityNode_),this.children_.isEmpty()&&C(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return hc||(hc=new t(new un(jy),null,Qr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||hc}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(".priority"===n)return this.getPriority();{const r=this.children_.get(n);return null===r?hc:r}}getChild(n){const r=Z(n);return null===r?this:this.getImmediateChild(r).getChild(Te(n))}hasChild(n){return null!==this.children_.get(n)}updateImmediateChild(n,r){if(C(r,"We should always be passing snapshot nodes"),".priority"===n)return this.updatePriority(r);{const i=new ne(n,r);let s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?hc:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){const i=Z(n);if(null===i)return r;{C(".priority"!==Z(n)||1===Ci(n),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(Te(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(Ce,(a,u)=>{r[a]=u.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){const a=[];for(const u in r)a[u]=r[u];return a}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let n="";this.getPriority().isEmpty()||(n+="priority:"+ER(this.getPriority().val())+":"),this.forEachChild(Ce,(r,i)=>{const s=i.hash();""!==s&&(n+=":"+r+":"+s)}),this.lazyHash_=""===n?"":LM(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new ne(n,r));return o?o.name:null}return this.children_.getPredecessorKey(n)}getFirstChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(n){const r=this.getFirstChildName(n);return r?new ne(r,this.children_.get(r)):null}getLastChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(n){const r=this.getLastChildName(n);return r?new ne(r,this.children_.get(r)):null}forEachChild(n,r){const i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{const s=this.children_.getIteratorFrom(n.name,ne.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{const s=this.children_.getReverseIteratorFrom(n.name,ne.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===fc?-1:0}withIndex(n){if(n===Tr||this.indexMap_.hasIndex(n))return this;{const r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Tr||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{const r=n;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Ce),s=r.getIterator(Ce);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(n){return n===Tr?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})();const fc=new class v7 extends z{constructor(){super(new un(jy),z.EMPTY_NODE,Qr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return z.EMPTY_NODE}isEmpty(){return!1}};function Ve(t,e=null){if(null===t)return z.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),C(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new da(t,Ve(e));if(t instanceof Array){let n=z.EMPTY_NODE;return mt(t,(r,i)=>{if(Wr(t,r)&&"."!==r.substring(0,1)){const s=Ve(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Ve(e))}{const n=[];let r=!1;if(mt(t,(o,a)=>{if("."!==o.substring(0,1)){const u=Ve(a);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),n.push(new ne(o,u)))}}),0===n.length)return z.EMPTY_NODE;const s=Mh(n,h7,o=>o.name,jy);if(r){const o=Mh(n,Ce.getCompare());return new z(s,Ve(e),new Qr({".priority":o},{".priority":Ce}))}return new z(s,Ve(e),Qr.Default)}}Object.defineProperties(ne,{MIN:{value:new ne(Kr,z.EMPTY_NODE)},MAX:{value:new ne(Er,fc)}}),IR.__EMPTY_NODE=z.EMPTY_NODE,da.__childrenNodeConstructor=z,function f7(t){$y=t}(fc),function g7(t){CR=t}(fc),function p7(t){DR=t}(Ve);class Hy extends xh{constructor(e){super(),this.indexPath_=e,C(!ee(e)&&".priority"!==Z(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return 0===s?vs(e.name,n.name):s}makePost(e,n){const r=Ve(e),i=z.EMPTY_NODE.updateChild(this.indexPath_,r);return new ne(n,i)}maxPost(){const e=z.EMPTY_NODE.updateChild(this.indexPath_,fc);return new ne(Er,e)}toString(){return lc(this.indexPath_,0).join("/")}}const Wy=new class I7 extends xh{compare(e,n){const r=e.node.compareTo(n.node);return 0===r?vs(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ne.MIN}maxPost(){return ne.MAX}makePost(e,n){const r=Ve(e);return new ne(n,r)}toString(){return".value"}};function NR(t){return{type:"value",snapshotNode:t}}function pa(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function pc(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function gc(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}class zy{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){C(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=o&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(pc(n,a)):C(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(pa(n,r)):o.trackChildChange(gc(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Ce,(i,s)=>{n.hasChild(i)||r.trackChildChange(pc(i,s))}),n.isLeafNode()||n.forEachChild(Ce,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(gc(i,s,o))}else r.trackChildChange(pa(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?z.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class mc{constructor(e){this.indexedFilter_=new zy(e.getIndex()),this.index_=e.getIndex(),this.startPost_=mc.getStartPost_(e),this.endPost_=mc.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,n,r,i,s,o){return this.matches(new ne(n,r))||(r=z.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=z.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(z.EMPTY_NODE);const s=this;return n.forEachChild(Ce,(o,a)=>{s.matches(new ne(o,a))||(i=i.updateImmediateChild(o,z.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}return e.getIndex().maxPost()}}class b7{constructor(e){this.rangedFilter_=new mc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new ne(n,r))||(r=z.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=z.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<n.numChildren()&&n.isIndexed(this.index_)){let s;i=z.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();let u;if(u=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0,!u)break;i=i.updateImmediateChild(a.name,a.node),o++}}else{let s,o,a,u;if(i=n.withIndex(this.index_),i=i.updatePriority(z.EMPTY_NODE),this.reverse_){u=i.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),o=this.rangedFilter_.getStartPost();const d=this.index_.getCompare();a=(h,f)=>d(f,h)}else u=i.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),o=this.rangedFilter_.getEndPost(),a=this.index_.getCompare();let c=0,l=!1;for(;u.hasNext();){const d=u.getNext();!l&&a(s,d)<=0&&(l=!0),l&&c<this.limit_&&a(d,o)<=0?c++:i=i.updateImmediateChild(d.name,z.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;C(a.numChildren()===this.limit_,"");const u=new ne(n,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=i.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=h&&(h.name===n||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);const f=null==h?1:o(h,u);if(l&&!r.isEmpty()&&f>=0)return null!=s&&s.trackChildChange(gc(n,r,d)),a.updateImmediateChild(n,r);{null!=s&&s.trackChildChange(pc(n,d));const g=a.updateImmediateChild(n,z.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(null!=s&&s.trackChildChange(pa(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}return r.isEmpty()?e:l&&o(c,u)>=0?(null!=s&&(s.trackChildChange(pc(c.name,c.node)),s.trackChildChange(pa(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(c.name,z.EMPTY_NODE)):e}}class Ky{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ce}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return C(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return C(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Kr}hasEnd(){return this.endSet_}getIndexEndValue(){return C(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return C(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Er}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return C(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ce}copy(){const e=new Ky;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function MR(t){const e={};if(t.isDefault())return e;let n;return t.index_===Ce?n="$priority":t.index_===Wy?n="$value":t.index_===Tr?n="$key":(C(t.index_ instanceof Hy,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=pt(n),t.startSet_&&(e.startAt=pt(t.indexStartValue_),t.startNameSet_&&(e.startAt+=","+pt(t.indexStartName_))),t.endSet_&&(e.endAt=pt(t.indexEndValue_),t.endNameSet_&&(e.endAt+=","+pt(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function RR(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Ce&&(e.i=t.index_.toString()),e}class Ph extends fR{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=oc("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return void 0!==n?"tag$"+n:(C(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Ph.getListenId_(e,r),a={};this.listens_[o]=a;const u=MR(e._queryParams);this.restRequest_(s+".json",u,(c,l)=>{let d=l;if(404===c&&(d=null,c=null),null===c&&this.onDataUpdate_(s,d,!1,r),aa(this.listens_,o)===a){let h;h=c?401===c?"permission_denied":"rest_error:"+c:"ok",i(h,null)}})}unlisten(e,n){const r=Ph.getListenId_(e,n);delete this.listens_[r]}get(e){const n=MR(e._queryParams),r=e._path.toString(),i=new oa;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+uy(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let u=null;if(a.status>=200&&a.status<300){try{u=ec(a.responseText)}catch(c){$t("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,u)}else 401!==a.status&&404!==a.status&&$t("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class k7{constructor(){this.rootNode_=z.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}function Oh(){return{value:null,children:new Map}}function ga(t,e,n){if(ee(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{const r=Z(e);t.children.has(r)||t.children.set(r,Oh()),ga(t.children.get(r),e=Te(e),n)}}function Xy(t,e,n){null!==t.value?n(e,t.value):function N7(t,e){t.children.forEach((n,r)=>{e(r,n)})}(t,(r,i)=>{Xy(i,new fe(e.toString()+"/"+r),n)})}class M7{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&mt(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}class O7{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new M7(e);const r=1e4+2e4*Math.random();uc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;mt(e,(i,s)=>{s>0&&Wr(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),uc(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Un=(()=>{return(t=Un||(Un={}))[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Un;var t})();function tv(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}class Fh{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Un.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(ee(this.path)){if(null!=this.affectedTree.value)return C(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new fe(e));return new Fh(de(),n,this.revert)}}return C(Z(this.path)===e,"operationForChild called for unrelated child."),new Fh(Te(this.path),this.affectedTree,this.revert)}}class _c{constructor(e,n){this.source=e,this.path=n,this.type=Un.LISTEN_COMPLETE}operationForChild(e){return ee(this.path)?new _c(this.source,de()):new _c(this.source,Te(this.path))}}class Es{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Un.OVERWRITE}operationForChild(e){return ee(this.path)?new Es(this.source,de(),this.snap.getImmediateChild(e)):new Es(this.source,Te(this.path),this.snap)}}class ma{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Un.MERGE}operationForChild(e){if(ee(this.path)){const n=this.children.subtree(new fe(e));return n.isEmpty()?null:n.value?new Es(this.source,de(),n.value):new ma(this.source,de(),n)}return C(Z(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ma(this.source,Te(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Si{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ee(e))return this.isFullyInitialized()&&!this.filtered_;const n=Z(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class F7{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function yc(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,u)=>function B7(t,e,n){if(null==e.childName||null==n.childName)throw sa("Should only compare child_ events.");const r=new ne(e.childName,e.snapshotNode),i=new ne(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,a,u)),o.forEach(a=>{const u=function V7(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(u,t.query_))})})}function Lh(t,e){return{eventCache:t,serverCache:e}}function vc(t,e,n,r){return Lh(new Si(e,n,r),t.serverCache)}function OR(t,e,n,r){return Lh(t.eventCache,new Si(e,n,r))}function Vh(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ts(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}let nv;class Se{constructor(e,n=(()=>(nv||(nv=new un(b6)),nv))()){this.value=e,this.children=n}static fromObject(e){let n=new Se(null);return mt(e,(r,i)=>{n=n.set(new fe(r),i)}),n}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(null!=this.value&&n(this.value))return{path:de(),value:this.value};if(ee(e))return null;{const r=Z(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(Te(e),n);return null!=s?{path:Re(new fe(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ee(e))return this;{const n=Z(e),r=this.children.get(n);return null!==r?r.subtree(Te(e)):new Se(null)}}set(e,n){if(ee(e))return new Se(n,this.children);{const r=Z(e),s=(this.children.get(r)||new Se(null)).set(Te(e),n),o=this.children.insert(r,s);return new Se(this.value,o)}}remove(e){if(ee(e))return this.children.isEmpty()?new Se(null):new Se(null,this.children);{const n=Z(e),r=this.children.get(n);if(r){const i=r.remove(Te(e));let s;return s=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&s.isEmpty()?new Se(null):new Se(this.value,s)}return this}}get(e){if(ee(e))return this.value;{const n=Z(e),r=this.children.get(n);return r?r.get(Te(e)):null}}setTree(e,n){if(ee(e))return n;{const r=Z(e),s=(this.children.get(r)||new Se(null)).setTree(Te(e),n);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new Se(this.value,o)}}fold(e){return this.fold_(de(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Re(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,de(),n)}findOnPath_(e,n,r){const i=!!this.value&&r(n,this.value);if(i)return i;if(ee(e))return null;{const s=Z(e),o=this.children.get(s);return o?o.findOnPath_(Te(e),Re(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,de(),n)}foreachOnPath_(e,n,r){if(ee(e))return this;{this.value&&r(n,this.value);const i=Z(e),s=this.children.get(i);return s?s.foreachOnPath_(Te(e),Re(n,i),r):new Se(null)}}foreach(e){this.foreach_(de(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Re(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}class rr{constructor(e){this.writeTree_=e}static empty(){return new rr(new Se(null))}}function wc(t,e,n){if(ee(e))return new rr(new Se(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=Yt(i,e);return s=s.updateChild(o,n),new rr(t.writeTree_.set(i,s))}{const i=new Se(n),s=t.writeTree_.setTree(e,i);return new rr(s)}}}function rv(t,e,n){let r=t;return mt(n,(i,s)=>{r=wc(r,Re(e,i),s)}),r}function FR(t,e){if(ee(e))return rr.empty();{const n=t.writeTree_.setTree(e,new Se(null));return new rr(n)}}function iv(t,e){return null!=bs(t,e)}function bs(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Yt(n.path,e)):null}function LR(t){const e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Ce,(r,i)=>{e.push(new ne(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new ne(r,i.value))}),e}function Ai(t,e){if(ee(e))return t;{const n=bs(t,e);return new rr(null!=n?new Se(n):t.writeTree_.subtree(e))}}function sv(t){return t.writeTree_.isEmpty()}function _a(t,e){return VR(de(),t.writeTree_,e)}function VR(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?(C(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):n=VR(Re(t,i),s,n)}),!n.getChild(t).isEmpty()&&null!==r&&(n=n.updateChild(Re(t,".priority"),r)),n}}function Bh(t,e){return GR(e,t)}function W7(t,e){if(t.snap)return Bn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Bn(Re(t.path,n),e))return!0;return!1}function z7(t){return t.visible}function BR(t,e,n){let r=rr.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Bn(n,o)?(a=Yt(n,o),r=wc(r,a,s.snap)):Bn(o,n)&&(a=Yt(o,n),r=wc(r,de(),s.snap.getChild(a)));else{if(!s.children)throw sa("WriteRecord should have .snap or .children");if(Bn(n,o))a=Yt(n,o),r=rv(r,a,s.children);else if(Bn(o,n))if(a=Yt(o,n),ee(a))r=rv(r,de(),s.children);else{const u=aa(s.children,Z(a));if(u){const c=u.getChild(Te(a));r=wc(r,de(),c)}}}}}return r}function UR(t,e,n,r,i){if(r||i){const s=Ai(t.visibleWrites,e);return!i&&sv(s)?n:i||null!=n||iv(s,de())?_a(BR(t.allWrites,function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(Bn(c.path,e)||Bn(e,c.path))},e),n||z.EMPTY_NODE):null}{const s=bs(t.visibleWrites,e);if(null!=s)return s;{const o=Ai(t.visibleWrites,e);return sv(o)?n:null!=n||iv(o,de())?_a(o,n||z.EMPTY_NODE):null}}}function Uh(t,e,n,r){return UR(t.writeTree,t.treePath,e,n,r)}function ov(t,e){return function K7(t,e,n){let r=z.EMPTY_NODE;const i=bs(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ce,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Ai(t.visibleWrites,e);return n.forEachChild(Ce,(o,a)=>{const u=_a(Ai(s,new fe(o)),a);r=r.updateImmediateChild(o,u)}),LR(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return LR(Ai(t.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(t.writeTree,t.treePath,e)}function jR(t,e,n,r){return function Q7(t,e,n,r,i){C(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Re(e,n);if(iv(t.visibleWrites,s))return null;{const o=Ai(t.visibleWrites,s);return sv(o)?i.getChild(n):_a(o,i.getChild(n))}}(t.writeTree,t.treePath,e,n,r)}function jh(t,e){return function J7(t,e){return bs(t.visibleWrites,e)}(t.writeTree,Re(t.treePath,e))}function av(t,e,n){return function Y7(t,e,n,r){const i=Re(e,n),s=bs(t.visibleWrites,i);return null!=s?s:r.isCompleteForChild(n)?_a(Ai(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function $R(t,e){return GR(Re(t.treePath,e),t.writeTree)}function GR(t,e){return{treePath:t,writeTree:e}}class t5{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;C("child_added"===n||"child_changed"===n||"child_removed"===n,"Only child changes supported for tracking"),C(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===n&&"child_removed"===s)this.changeMap.set(r,gc(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===n&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===n&&"child_changed"===s)this.changeMap.set(r,pc(r,i.oldSnap));else if("child_changed"===n&&"child_added"===s)this.changeMap.set(r,pa(r,e.snapshotNode));else{if("child_changed"!==n||"child_changed"!==s)throw sa("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,gc(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const HR=new class n5{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}};class uv{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Si(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return av(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ts(this.viewCache_),s=function e5(t,e,n,r,i,s){return function X7(t,e,n,r,i,s,o){let a;const u=Ai(t.visibleWrites,e),c=bs(u,de());if(null!=c)a=c;else{if(null==n)return[];a=_a(u,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const l=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&l.length<i;)0!==d(f,r)&&l.push(f),f=h.getNext();return l}}(t.writeTree,t.treePath,e,n,r,i,s)}(this.writes_,i,n,1,r,e);return 0===s.length?null:s[0]}}function WR(t,e,n,r,i,s){const o=e.eventCache;if(null!=jh(r,n))return e;{let a,u;if(ee(n))if(C(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Ts(e),d=ov(r,c instanceof z?c:z.EMPTY_NODE);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=Uh(r,Ts(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=Z(n);if(".priority"===c){C(1===Ci(n),"Can't have a priority with additional path components");const l=o.getNode();u=e.serverCache.getNode();const d=jR(r,n,l,u);a=null!=d?t.filter.updatePriority(l,d):o.getNode()}else{const l=Te(n);let d;if(o.isCompleteForChild(c)){u=e.serverCache.getNode();const h=jR(r,n,o.getNode(),u);d=null!=h?o.getNode().getImmediateChild(c).updateChild(l,h):o.getNode().getImmediateChild(c)}else d=av(r,c,e.serverCache);a=null!=d?t.filter.updateChild(o.getNode(),c,d,l,i,s):o.getNode()}}return vc(e,a,o.isFullyInitialized()||ee(n),t.filter.filtersNodes())}}function $h(t,e,n,r,i,s,o,a){const u=e.serverCache;let c;const l=o?t.filter:t.filter.getIndexedFilter();if(ee(n))c=l.updateFullNode(u.getNode(),r,null);else if(l.filtersNodes()&&!u.isFiltered()){const f=u.getNode().updateChild(n,r);c=l.updateFullNode(u.getNode(),f,null)}else{const f=Z(n);if(!u.isCompleteForPath(n)&&Ci(n)>1)return e;const p=Te(n),m=u.getNode().getImmediateChild(f).updateChild(p,r);c=".priority"===f?l.updatePriority(u.getNode(),m):l.updateChild(u.getNode(),f,m,p,HR,null)}const d=OR(e,c,u.isFullyInitialized()||ee(n),l.filtersNodes());return WR(t,d,n,i,new uv(i,d,s),a)}function cv(t,e,n,r,i,s,o){const a=e.eventCache;let u,c;const l=new uv(i,e,s);if(ee(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),u=vc(e,c,!0,t.filter.filtersNodes());else{const d=Z(n);if(".priority"===d)c=t.filter.updatePriority(e.eventCache.getNode(),r),u=vc(e,c,a.isFullyInitialized(),a.isFiltered());else{const h=Te(n),f=a.getNode().getImmediateChild(d);let p;if(ee(h))p=r;else{const g=l.getCompleteChild(d);p=null!=g?".priority"===Vy(h)&&g.getChild(_R(h)).isEmpty()?g:g.updateChild(h,r):z.EMPTY_NODE}u=f.equals(p)?e:vc(e,t.filter.updateChild(a.getNode(),d,p,h,l,o),a.isFullyInitialized(),t.filter.filtersNodes())}}return u}function qR(t,e){return t.eventCache.isCompleteForChild(e)}function zR(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function lv(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,u=e;c=ee(n)?r:new Se(null).setTree(n,r);const l=e.serverCache.getNode();return c.children.inorderTraversal((d,h)=>{if(l.hasChild(d)){const p=zR(0,e.serverCache.getNode().getImmediateChild(d),h);u=$h(t,u,new fe(d),p,i,s,o,a)}}),c.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&void 0===h.value;if(!l.hasChild(d)&&!f){const g=zR(0,e.serverCache.getNode().getImmediateChild(d),h);u=$h(t,u,new fe(d),g,i,s,o,a)}}),u}class d5{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new zy(r.getIndex()),s=function D7(t){return t.loadsAllData()?new zy(t.getIndex()):t.hasLimit()?new b7(t):new mc(t)}(r);this.processor_=function r5(t){return{filter:t}}(s);const o=n.serverCache,a=n.eventCache,u=i.updateFullNode(z.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(z.EMPTY_NODE,a.getNode(),null),l=new Si(u,o.isFullyInitialized(),i.filtersNodes()),d=new Si(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Lh(d,l),this.eventGenerator_=new F7(this.query_)}get query(){return this.query_}}function p5(t,e){const n=Ts(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ee(e)&&!n.getImmediateChild(Z(e)).isEmpty())?n.getChild(e):null}function KR(t){return 0===t.eventRegistrations_.length}function QR(t,e,n){const r=[];if(n){C(null==e,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}else i.push(o)}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function YR(t,e,n,r){e.type===Un.MERGE&&null!==e.source.queryId&&(C(Ts(t.viewCache_),"We should always have a full cache before handling merges"),C(Vh(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=function s5(t,e,n,r,i){const s=new t5;let o,a;if(n.type===Un.OVERWRITE){const c=n;c.source.fromUser?o=cv(t,e,c.path,c.snap,r,i,s):(C(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!ee(c.path),o=$h(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===Un.MERGE){const c=n;c.source.fromUser?o=function a5(t,e,n,r,i,s,o){let a=e;return r.foreach((u,c)=>{const l=Re(n,u);qR(e,Z(l))&&(a=cv(t,a,l,c,i,s,o))}),r.foreach((u,c)=>{const l=Re(n,u);qR(e,Z(l))||(a=cv(t,a,l,c,i,s,o))}),a}(t,e,c.path,c.children,r,i,s):(C(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=lv(t,e,c.path,c.children,r,i,a,s))}else if(n.type===Un.ACK_USER_WRITE){const c=n;o=c.revert?function l5(t,e,n,r,i,s){let o;if(null!=jh(r,n))return e;{const a=new uv(r,e,i),u=e.eventCache.getNode();let c;if(ee(n)||".priority"===Z(n)){let l;if(e.serverCache.isFullyInitialized())l=Uh(r,Ts(e));else{const d=e.serverCache.getNode();C(d instanceof z,"serverChildren would be complete if leaf node"),l=ov(r,d)}c=t.filter.updateFullNode(u,l,s)}else{const l=Z(n);let d=av(r,l,e.serverCache);null==d&&e.serverCache.isCompleteForChild(l)&&(d=u.getImmediateChild(l)),c=null!=d?t.filter.updateChild(u,l,d,Te(n),a,s):e.eventCache.getNode().hasChild(l)?t.filter.updateChild(u,l,z.EMPTY_NODE,Te(n),a,s):u,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Uh(r,Ts(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=jh(r,de()),vc(e,c,o,t.filter.filtersNodes())}}(t,e,c.path,r,i,s):function u5(t,e,n,r,i,s,o){if(null!=jh(i,n))return e;const a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(ee(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return $h(t,e,n,u.getNode().getChild(n),i,s,a,o);if(ee(n)){let c=new Se(null);return u.getNode().forEachChild(Tr,(l,d)=>{c=c.set(new fe(l),d)}),lv(t,e,n,c,i,s,a,o)}return e}{let c=new Se(null);return r.foreach((l,d)=>{const h=Re(n,l);u.isCompleteForPath(h)&&(c=c.set(l,u.getNode().getChild(h)))}),lv(t,e,n,c,i,s,a,o)}}(t,e,c.path,c.affectedTree,r,i,s)}else{if(n.type!==Un.LISTEN_COMPLETE)throw sa("Unknown operation type: "+n.type);o=function c5(t,e,n,r,i){const s=e.serverCache;return WR(t,OR(e,s.getNode(),s.isFullyInitialized()||ee(n),s.isFiltered()),n,r,HR,i)}(t,e,n.path,r,s)}const u=s.getChanges();return function o5(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Vh(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(NR(Vh(e)))}}(e,o,u),{viewCache:o,changes:u}}(t.processor_,i,e,n,r);return function i5(t,e){C(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),C(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}(t.processor_,s.viewCache),C(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,JR(t,s.changes,s.viewCache.eventCache.getNode(),null)}function JR(t,e,n,r){return function L7(t,e,n,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function T7(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}(o.childName,o.snapshotNode))}),yc(t,i,"child_removed",e,r,n),yc(t,i,"child_added",e,r,n),yc(t,i,"child_moved",s,r,n),yc(t,i,"child_changed",e,r,n),yc(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}let Gh,Wh;class XR{constructor(){this.views=new Map}}function dv(t,e,n,r){const i=e.source.queryId;if(null!==i){const s=t.views.get(i);return C(null!=s,"SyncTree gave us an op for an invalid query."),YR(s,e,n,r)}{let s=[];for(const o of t.views.values())s=s.concat(YR(o,e,n,r));return s}}function w5(t,e,n,r,i,s){const o=function hv(t,e,n,r,i){const o=t.views.get(e._queryIdentifier);if(!o){let a=Uh(n,i?r:null),u=!1;a?u=!0:r instanceof z?(a=ov(n,r),u=!1):(a=z.EMPTY_NODE,u=!1);const c=Lh(new Si(a,u,!1),new Si(r,i,!1));return new d5(e,c)}return o}(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),function g5(t,e){t.eventRegistrations_.push(e)}(o,n),function m5(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ce,(s,o)=>{r.push(pa(s,o))}),n.isFullyInitialized()&&r.push(NR(n.getNode())),JR(t,r,n.getNode(),e)}(o,n)}function ZR(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function xi(t,e){let n=null;for(const r of t.views.values())n=n||p5(r,e);return n}function e1(t,e){return e._queryParams.loadsAllData()?Hh(t):t.views.get(e._queryIdentifier)}function t1(t,e){return null!=e1(t,e)}function ki(t){return null!=Hh(t)}function Hh(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let b5=1;class n1{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Se(null),this.pendingWriteTree_=function Z7(){return{visibleWrites:rr.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function fv(t,e,n,r,i){return function j7(t,e,n,r,i){C(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=wc(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?ya(t,new Es({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Ni(t,e,n=!1){const r=function G7(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function H7(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);C(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&W7(a,r.path)?i=!1:Bn(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function q7(t){t.visibleWrites=BR(t.allWrites,z7,de()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=FR(t.visibleWrites,r.path):mt(r.children,u=>{t.visibleWrites=FR(t.visibleWrites,Re(r.path,u))}),!0))}(t.pendingWriteTree_,e)){let s=new Se(null);return null!=r.snap?s=s.set(de(),!0):mt(r.children,o=>{s=s.set(new fe(o),!0)}),ya(t,new Fh(r.path,s,n))}return[]}function Ic(t,e,n){return ya(t,new Es({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function qh(t,e,n,r){const i=e._path,s=t.syncPointTree_.get(i);let o=[];if(s&&("default"===e._queryIdentifier||t1(s,e))){const a=function I5(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=ki(t);if("default"===i)for(const[u,c]of t.views.entries())o=o.concat(QR(c,n,r)),KR(c)&&(t.views.delete(u),c.query._queryParams.loadsAllData()||s.push(c.query));else{const u=t.views.get(i);u&&(o=o.concat(QR(u,n,r)),KR(u)&&(t.views.delete(i),u.query._queryParams.loadsAllData()||s.push(u.query)))}return a&&!ki(t)&&s.push(new(function y5(){return C(Gh,"Reference.ts has not been loaded"),Gh}())(e._repo,e._path)),{removed:s,events:o}}(s,e,n,r);(function v5(t){return 0===t.views.size})(s)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const u=a.removed;o=a.events;const c=-1!==u.findIndex(d=>d._queryParams.loadsAllData()),l=t.syncPointTree_.findOnPath(i,(d,h)=>ki(h));if(c&&!l){const d=t.syncPointTree_.subtree(i);if(!d.isEmpty()){const h=function M5(t){return t.fold((e,n,r)=>{if(n&&ki(n))return[Hh(n)];{let i=[];return n&&(i=ZR(n)),mt(r,(s,o)=>{i=i.concat(o)}),i}})}(d);for(let f=0;f<h.length;++f){const p=h[f],g=p.query,m=u1(t,p);t.listenProvider_.startListening(Tc(g),Ec(t,g),m.hashFn,m.onComplete)}}}!l&&u.length>0&&!r&&(c?t.listenProvider_.stopListening(Tc(e),null):u.forEach(d=>{const h=t.queryToTagMap.get(Kh(d));t.listenProvider_.stopListening(Tc(d),h)})),function R5(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=Kh(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}(t,u)}return o}function s1(t,e,n){const{syncPoint:r,serverCache:i,writesCache:s,serverCacheComplete:o,viewAlreadyExists:a,foundAncestorDefaultView:u}=function i1(t,e){const n=t._path;let r=null,i=!1;e.syncPointTree_.foreachOnPath(n,(c,l)=>{const d=Yt(c,n);r=r||xi(l,d),i=i||ki(l)});let o,s=e.syncPointTree_.get(n);s?(i=i||ki(s),r=r||xi(s,de())):(s=new XR,e.syncPointTree_=e.syncPointTree_.set(n,s)),null!=r?o=!0:(o=!1,r=z.EMPTY_NODE,e.syncPointTree_.subtree(n).foreachChild((l,d)=>{const h=xi(d,de());h&&(r=r.updateImmediateChild(l,h))}));const a=t1(s,t);if(!a&&!t._queryParams.loadsAllData()){const c=Kh(t);C(!e.queryToTagMap.has(c),"View does not exist, but we have a tag");const l=function P5(){return b5++}();e.queryToTagMap.set(c,l),e.tagToQueryMap.set(l,c)}return{syncPoint:s,writesCache:Bh(e.pendingWriteTree_,n),serverCache:r,serverCacheComplete:o,foundAncestorDefaultView:i,viewAlreadyExists:a}}(e,t);let c=w5(r,e,n,s,i,o);if(!a&&!u){const l=e1(r,e);c=c.concat(function O5(t,e,n){const r=e._path,i=Ec(t,e),s=u1(t,n),o=t.listenProvider_.startListening(Tc(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)C(!ki(a.value),"If we're adding a query, it shouldn't be shadowed");else{const u=a.fold((c,l,d)=>{if(!ee(c)&&l&&ki(l))return[Hh(l).query];{let h=[];return l&&(h=h.concat(ZR(l).map(f=>f.query))),mt(d,(f,p)=>{h=h.concat(p)}),h}});for(let c=0;c<u.length;++c){const l=u[c];t.listenProvider_.stopListening(Tc(l),Ec(t,l))}}return o}(t,e,l))}return c}function zh(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=xi(a,Yt(o,e));if(c)return c});return UR(i,e,s,n,!0)}function ya(t,e){return o1(e,t.syncPointTree_,null,Bh(t.pendingWriteTree_,de()))}function o1(t,e,n,r){if(ee(t.path))return a1(t,e,n,r);{const i=e.get(de());null==n&&null!=i&&(n=xi(i,de()));let s=[];const o=Z(t.path),a=t.operationForChild(o),u=e.children.get(o);if(u&&a){const c=n?n.getImmediateChild(o):null,l=$R(r,o);s=s.concat(o1(a,u,c,l))}return i&&(s=s.concat(dv(i,t,r,n))),s}}function a1(t,e,n,r){const i=e.get(de());null==n&&null!=i&&(n=xi(i,de()));let s=[];return e.children.inorderTraversal((o,a)=>{const u=n?n.getImmediateChild(o):null,c=$R(r,o),l=t.operationForChild(o);l&&(s=s.concat(a1(l,a,u,c)))}),i&&(s=s.concat(dv(i,t,r,n))),s}function u1(t,e){const n=e.query,r=Ec(t,n);return{hashFn:()=>(function h5(t){return t.viewCache_.serverCache.getNode()}(e)||z.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function A5(t,e,n){const r=pv(t,n);if(r){const i=gv(r),s=i.path,o=i.queryId,a=Yt(s,e);return mv(t,s,new _c(tv(o),a))}return[]}(t,n._path,r):function S5(t,e){return ya(t,new _c({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);{const s=function S6(t,e){let n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(i,n);return qh(t,n,null,s)}}}}function Ec(t,e){const n=Kh(e);return t.queryToTagMap.get(n)}function Kh(t){return t._path.toString()+"$"+t._queryIdentifier}function pv(t,e){return t.tagToQueryMap.get(e)}function gv(t){const e=t.indexOf("$");return C(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new fe(t.substr(0,e))}}function mv(t,e,n){const r=t.syncPointTree_.get(e);return C(r,"Missing sync point for query tag that we're tracking"),dv(r,n,Bh(t.pendingWriteTree_,e),null)}function Tc(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(function T5(){return C(Wh,"Reference.ts has not been loaded"),Wh}())(t._repo,t._path):t}class _v{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new _v(n)}node(){return this.node_}}class yv{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Re(this.path_,e);return new yv(this.syncTree_,n)}node(){return zh(this.syncTree_,this.path_)}}const c1=function(t,e,n){return t&&"object"==typeof t?(C(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?L5(t[".sv"],e,n):"object"==typeof t[".sv"]?V5(t[".sv"],e):void C(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},L5=function(t,e,n){if("timestamp"===t)return n.timestamp;C(!1,"Unexpected server value: "+t)},V5=function(t,e,n){t.hasOwnProperty("increment")||C(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;"number"!=typeof r&&C(!1,"Unexpected increment value: "+r);const i=e.node();if(C(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},vv=function(t,e,n){return wv(t,new _v(e),n)};function wv(t,e,n){const r=t.getPriority().val(),i=c1(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=c1(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new da(a,Ve(i)):t}{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new da(i))),o.forEachChild(Ce,(a,u)=>{const c=wv(u,e.getImmediateChild(a),n);c!==u&&(s=s.updateImmediateChild(a,c))}),s}}class Iv{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Qh(t,e){let n=e instanceof fe?e:new fe(e),r=t,i=Z(n);for(;null!==i;){const s=aa(r.node.children,i)||{children:{},childCount:0};r=new Iv(i,r,s),n=Te(n),i=Z(n)}return r}function Ds(t){return t.node.value}function Ev(t,e){t.node.value=e,Tv(t)}function d1(t){return t.node.childCount>0}function Yh(t,e){mt(t.node.children,(n,r)=>{e(new Iv(n,t,r))})}function h1(t,e,n,r){n&&!r&&e(t),Yh(t,i=>{h1(i,e,!0,r)}),n&&r&&e(t)}function bc(t){return new fe(null===t.parent?t.name:bc(t.parent)+"/"+t.name)}function Tv(t){null!==t.parent&&function j5(t,e,n){const r=function B5(t){return void 0===Ds(t)&&!d1(t)}(n),i=Wr(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Tv(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Tv(t))}(t.parent,t.name,t)}const $5=/[\[\].#$\/\u0000-\u001F\u007F]/,G5=/[\[\].#$\u0000-\u001F\u007F]/,bv=10485760,Jh=function(t){return"string"==typeof t&&0!==t.length&&!$5.test(t)},f1=function(t){return"string"==typeof t&&0!==t.length&&!G5.test(t)},Cc=function(t,e,n){const r=n instanceof fe?new i7(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+ws(r));if("function"==typeof e)throw new Error(t+"contains a function "+ws(r)+" with contents = "+e.toString());if(bh(e))throw new Error(t+"contains "+e.toString()+" "+ws(r));if("string"==typeof e&&e.length>bv/3&&Ih(e)>bv)throw new Error(t+"contains a string greater than "+bv+" utf8 bytes "+ws(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(mt(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!Jh(o)))throw new Error(t+" contains an invalid key ("+o+") "+ws(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function s7(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Ih(e),yR(t)})(r,o),Cc(t,a,r),function o7(t){const e=t.parts_.pop();t.byteLength_-=Ih(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)}),i&&s)throw new Error(t+' contains ".value" child '+ws(r)+" in addition to actual children.")}},Cv=function(t,e,n,r){if(!(r&&void 0===n||f1(n)))throw new Error(tc(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')};class z5{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Xh(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==n&&!By(s,n.path)&&(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function m1(t,e,n){Xh(t,n),_1(t,r=>By(r,e))}function jn(t,e,n){Xh(t,n),_1(t,r=>Bn(r,e)||Bn(e,r))}function _1(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];i&&(e(i.path)?(K5(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function K5(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(null!==n){t.events[e]=null;const r=n.getEventRunner();ys&&gt("event: "+n.toString()),ca(r)}}}class Y5{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new z5,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Oh(),this.transactionQueueTree_=new Iv,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function v1(t){const n=t.infoData_.getNode(new fe(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+n}function Ac(t){return function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t}({timestamp:v1(t)})}function w1(t,e,n,r,i){t.dataUpdateCount++;const s=new fe(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const u=wh(n,c=>Ve(c));o=function k5(t,e,n,r){const i=pv(t,r);if(i){const s=gv(i),o=s.path,a=s.queryId,u=Yt(o,e),c=Se.fromObject(n);return mv(t,o,new ma(tv(a),u,c))}return[]}(t.serverSyncTree_,s,u,i)}else{const u=Ve(n);o=function r1(t,e,n,r){const i=pv(t,r);if(null!=i){const s=gv(i),o=s.path,a=s.queryId,u=Yt(o,e);return mv(t,o,new Es(tv(a),u,n))}return[]}(t.serverSyncTree_,s,u,i)}else if(r){const u=wh(n,c=>Ve(c));o=function C5(t,e,n){const r=Se.fromObject(n);return ya(t,new ma({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,u)}else{const u=Ve(n);o=Ic(t.serverSyncTree_,s,u)}let a=s;o.length>0&&(a=va(t,s)),jn(t.eventQueue_,a,o)}function I1(t,e){Sv(t,"connected",e),!1===e&&function tQ(t){Cs(t,"onDisconnectEvents");const e=Ac(t),n=Oh();Xy(t.onDisconnect_,de(),(i,s)=>{const o=function(t,e,n,r){return wv(e,new yv(n,t),r)}(i,s,t.serverSyncTree_,e);ga(n,i,o)});let r=[];Xy(n,de(),(i,s)=>{r=r.concat(Ic(t.serverSyncTree_,i,s));const o=function Nv(t,e){const n=bc(b1(t,e)),r=Qh(t.transactionQueueTree_,e);return function U5(t,e,n){let r=n?t:t.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{Mv(t,i)}),Mv(t,r),h1(r,i=>{Mv(t,i)}),n}(t,i);va(t,o)}),t.onDisconnect_=Oh(),jn(t.eventQueue_,de(),r)}(t)}function Sv(t,e,n){const r=new fe("/.info/"+e),i=Ve(n);t.infoData_.updateSnapshot(r,i);const s=Ic(t.infoSyncTree_,r,i);jn(t.eventQueue_,r,s)}function Zh(t){return t.nextWriteId_++}function xv(t,e,n){let r;r=".info"===Z(e._path)?qh(t.infoSyncTree_,e,n):qh(t.serverSyncTree_,e,n),m1(t.eventQueue_,e._path,r)}function Cs(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),gt(n,...e)}function kv(t,e,n){return zh(t.serverSyncTree_,e,n)||z.EMPTY_NODE}function ef(t,e=t.transactionQueueTree_){if(e||tf(t,e),Ds(e)){const n=D1(t,e);C(n.length>0,"Sending zero length transaction queue"),n.every(i=>0===i.status)&&function uQ(t,e,n){const r=n.map(c=>c.currentWriteId),i=kv(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const l=n[c];C(0===l.status,"tryToSendTransactionQueue_: items in queue should all be run."),l.status=1,l.retryCount++;const d=Yt(e,l.path);s=s.updateChild(d,l.currentOutputSnapshotRaw)}const a=s.val(!0),u=e;t.server_.put(u.toString(),a,c=>{Cs(t,"transaction put response",{path:u.toString(),status:c});let l=[];if("ok"===c){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,l=l.concat(Ni(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();tf(t,Qh(t.transactionQueueTree_,e)),ef(t,t.transactionQueueTree_),jn(t.eventQueue_,e,l);for(let h=0;h<d.length;h++)ca(d[h])}else{if("datastale"===c)for(let d=0;d<n.length;d++)n[d].status=3===n[d].status?4:0;else{$t("transaction at "+u.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}va(t,e)}},o)}(t,bc(e),n)}else d1(e)&&Yh(e,n=>{ef(t,n)})}function va(t,e){const n=b1(t,e),r=bc(n);return function cQ(t,e,n){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const u=e[a],c=Yt(n,u.path);let d,l=!1;if(C(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,d=u.abortReason,i=i.concat(Ni(t.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)l=!0,d="maxretry",i=i.concat(Ni(t.serverSyncTree_,u.currentWriteId,!0));else{const h=kv(t,u.path,o);u.currentInputSnapshot=h;const f=e[a].update(h.val());if(void 0!==f){Cc("transaction failed: Data returned ",f,u.path);let p=Ve(f);"object"==typeof f&&null!=f&&Wr(f,".priority")||(p=p.updatePriority(h.getPriority()));const m=u.currentWriteId,I=Ac(t),_=vv(p,h,I);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=_,u.currentWriteId=Zh(t),o.splice(o.indexOf(m),1),i=i.concat(fv(t.serverSyncTree_,u.path,_,u.currentWriteId,u.applyLocally)),i=i.concat(Ni(t.serverSyncTree_,m,!0))}else l=!0,d="nodata",i=i.concat(Ni(t.serverSyncTree_,u.currentWriteId,!0))}jn(t.eventQueue_,n,i),i=[],l&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===d?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(d),!1,null)))}tf(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)ca(r[a]);ef(t,t.transactionQueueTree_)}(t,D1(t,n),r),r}function b1(t,e){let n,r=t.transactionQueueTree_;for(n=Z(e);null!==n&&void 0===Ds(r);)r=Qh(r,n),n=Z(e=Te(e));return r}function D1(t,e){const n=[];return C1(t,e,n),n.sort((r,i)=>r.order-i.order),n}function C1(t,e,n){const r=Ds(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Yh(e,i=>{C1(t,i,n)})}function tf(t,e){const n=Ds(e);if(n){let r=0;for(let i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Ev(e,n.length>0?n:void 0)}Yh(e,r=>{tf(t,r)})}function Mv(t,e){const n=Ds(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(C(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(C(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Ni(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Ev(e,void 0):n.length=s+1,jn(t.eventQueue_,bc(e),i);for(let o=0;o<r.length;o++)ca(r[o])}}const Rv=function(t,e){const n=hQ(t),r=n.namespace;return"firebase.com"===n.domain&&Ir(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==n.domain&&Ir("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&$t("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new My(n.host,n.secure,r,"ws"===n.scheme||"wss"===n.scheme,e,"",r!==n.subdomain),path:new fe(n.pathString)}},hQ=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",u=443;if("string"==typeof t){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let l=t.indexOf("/");-1===l&&(l=t.length);let d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(l,d)),l<d&&(i=function lQ(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(s){}e+="/"+i}return e}(t.substring(l,d)));const h=function dQ(t){const e={};"?"===t.charAt(0)&&(t=t.substring(1));for(const n of t.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):$t(`Invalid query segment '${n}' in query '${t}'`)}return e}(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o="https"===a||"wss"===a,u=parseInt(e.substring(c+1),10)):c=e.length;const f=e.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};class S1{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+pt(this.snapshot.exportVal())}}class A1{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class x1{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return C(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Dn{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return ee(this._path)?null:Vy(this._path)}get ref(){return new ir(this._repo,this._path)}get _queryIdentifier(){const e=RR(this._queryParams),n=xy(e);return"{}"===n?"default":n}get _queryObject(){return RR(this._queryParams)}isEqual(e){if(!((e=qr(e))instanceof Dn))return!1;const n=this._repo===e._repo,r=By(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function n7(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)}}class ir extends Dn{constructor(e,n){super(e,n,new Ky,!1)}get parent(){const e=_R(this._path);return null===e?null:new ir(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Ss{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new fe(e),r=wa(this.ref,e);return new Ss(this._node.getChild(n),r,Ce)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Ss(i,wa(this.ref,r),Ce)))}hasChild(e){const n=new fe(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function sf(t,e){return(t=qr(t))._checkNotDeleted("ref"),void 0!==e?wa(t._root,e):t._root}function wa(t,e){return null===Z((t=qr(t))._path)?(n=e,n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Cv("child","path",n,!1)):Cv("child","path",e,!1),new ir(t._repo,Re(t._path,e));var n}class of{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,n){const r=n._queryParams.getIndex();return new S1("value",this,new Ss(e.snapshotNode,new ir(n._repo,n._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new A1(this,e,n):null}matches(e){return e instanceof of&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class af{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n="children_added"===e?"child_added":e;return n="children_removed"===n?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new A1(this,e,n):null}createEvent(e,n){C(null!=e.childName,"Child events should have a childName.");const r=wa(new ir(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new S1(e.type,this,new Ss(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof af&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function uf(t,e,n,r){return function xc(t,e,n,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const u=n,c=(l,d)=>{xv(t._repo,t,a),u(l,d)};c.userCallback=n.userCallback,c.context=n.context,n=c}const o=new x1(n,s||void 0),a="value"===e?new of(o):new af(e,o);return function sQ(t,e,n){let r;r=".info"===Z(e._path)?s1(t.infoSyncTree_,e,n):s1(t.serverSyncTree_,e,n),m1(t.eventQueue_,e._path,r)}(t._repo,t,a),()=>xv(t._repo,t,a)}(t,"value",e,n,r)}(function _5(t){C(!Gh,"__referenceConstructor has already been defined"),Gh=t})(ir),function E5(t){C(!Wh,"__referenceConstructor has already been defined"),Wh=t}(ir);const Pv={};function DQ(t,e,n,r,i){let s=r||t.options.databaseURL;void 0===s&&(t.options.projectId||Ir("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),gt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let u,c,o=Rv(s,i),a=o.repoInfo;"undefined"!=typeof process&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(u=!0,s=`http://${c}?ns=${a.namespace}`,o=Rv(s,i),a=o.repoInfo):u=!o.repoInfo.secure;const l=i&&u?new cc(cc.OWNER):new N6(t.name,t.options,e);(function(t,e){const n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Jh(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),f1(t)}(n))throw new Error(tc(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",o),ee(o.path)||Ir("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function SQ(t,e,n,r){let i=Pv[e.name];i||(i={},Pv[e.name]=i);let s=i[t.toURLString()];return s&&Ir("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Y5(t,false,n,r),i[t.toURLString()]=s,s}(a,t,l,new k6(t.name,n));return new xQ(d,t)}class xQ{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function J5(t,e,n){if(t.stats_=Oy(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Ph(t.repoInfo_,(r,i,s,o)=>{w1(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>I1(t,!0),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{pt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Is(t.repoInfo_,e,(r,i,s,o)=>{w1(t,r,i,s,o)},r=>{I1(t,r)},r=>{!function X5(t,e){mt(e,(n,r)=>{Sv(t,n,r)})}(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=function P6(t,e){const n=t.toString();return Py[n]||(Py[n]=e()),Py[n]}(t.repoInfo_,()=>new O7(t.stats_,t.server_)),t.infoData_=new k7,t.infoSyncTree_=new n1({startListening:(r,i,s,o)=>{let a=[];const u=t.infoData_.getNode(r._path);return u.isEmpty()||(a=Ic(t.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Sv(t,"connected",!1),t.serverSyncTree_=new n1({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,u)=>{const c=o(a,u);jn(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ir(this._repo,de())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function CQ(t,e){const n=Pv[e];(!n||n[t.key]!==t)&&Ir(`Database ${e}(${t.repoInfo_}) has already been deleted.`),function T1(t){t.persistentConnection_&&t.persistentConnection_.interrupt("repo_interrupt")}(t),delete n[t.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ir("Cannot call "+e+" on a deleted database.")}}function kQ(t=Iy(),e){return nc(t,"database").getImmediate({identifier:e})}Is.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Is.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)},function NQ(t){(function v6(t){Cy=t})("9.9.2"),jt(new St("database",(e,{instanceIdentifier:n})=>DQ(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n),"PUBLIC").setMultipleInstances(!0)),Me(RM,"0.13.4",t),Me(RM,"0.13.4","esm2017")}(),Me("firebase","9.9.2","app");const O1="@firebase/installations",Ov="0.5.12",L1=`w:${Ov}`,V1="FIS_v2",Yr=new wr("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function B1(t){return t instanceof tr&&t.code.includes("request-failed")}function Fv({projectId:t}){return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function U1(t){return{token:t.token,requestStatus:2,expiresIn:jQ(t.expiresIn),creationTime:Date.now()}}function Lv(t,e){return Vv.apply(this,arguments)}function Vv(){return(Vv=w(function*(t,e){const r=(yield e.json()).error;return Yr.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function j1({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function $1(t,{refreshToken:e}){const n=j1(t);return n.append("Authorization",function $Q(t){return`${V1} ${t}`}(e)),n}function Bv(t){return Uv.apply(this,arguments)}function Uv(){return(Uv=w(function*(t){const e=yield t();return e.status>=500&&e.status<600?t():e})).apply(this,arguments)}function jQ(t){return Number(t.replace("s","000"))}function GQ(t,e){return jv.apply(this,arguments)}function jv(){return(jv=w(function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=Fv(t),i=j1(t),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({fid:n,authVersion:V1,appId:t.appId,sdkVersion:L1})},u=yield Bv(()=>fetch(r,a));if(u.ok){const c=yield u.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:U1(c.authToken)}}throw yield Lv("Create Installation",u)})).apply(this,arguments)}function G1(t){return new Promise(e=>{setTimeout(e,t)})}const WQ=/^[cdef][\w-]{21}$/;function qQ(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=function zQ(t){return function HQ(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22)}(t);return WQ.test(n)?n:""}catch(t){return""}}function Ia(t){return`${t.appName}!${t.appId}`}const Ea=new Map;function H1(t,e){const n=Ia(t);W1(n,e),function YQ(t,e){const n=function q1(){return!As&&"BroadcastChannel"in self&&(As=new BroadcastChannel("[Firebase] FID Change"),As.onmessage=t=>{W1(t.data.key,t.data.fid)}),As}();n&&n.postMessage({key:t,fid:e}),function z1(){0===Ea.size&&As&&(As.close(),As=null)}()}(n,e)}function W1(t,e){const n=Ea.get(t);if(n)for(const r of n)r(e)}let As=null;const xs="firebase-installations-store";let Gv=null;function Hv(){return Gv||(Gv=Eh("firebase-installations-database",1,{upgrade:(t,e)=>{0===e&&t.createObjectStore(xs)}})),Gv}function cf(t,e){return Wv.apply(this,arguments)}function Wv(){return(Wv=w(function*(t,e){const n=Ia(t),i=(yield Hv()).transaction(xs,"readwrite"),s=i.objectStore(xs),o=yield s.get(n);return yield s.put(e,n),yield i.done,(!o||o.fid!==e.fid)&&H1(t,e.fid),e})).apply(this,arguments)}function qv(t){return zv.apply(this,arguments)}function zv(){return(zv=w(function*(t){const e=Ia(t),r=(yield Hv()).transaction(xs,"readwrite");yield r.objectStore(xs).delete(e),yield r.done})).apply(this,arguments)}function kc(t,e){return Kv.apply(this,arguments)}function Kv(){return(Kv=w(function*(t,e){const n=Ia(t),i=(yield Hv()).transaction(xs,"readwrite"),s=i.objectStore(xs),o=yield s.get(n),a=e(o);return void 0===a?yield s.delete(n):yield s.put(a,n),yield i.done,a&&(!o||o.fid!==a.fid)&&H1(t,a.fid),a})).apply(this,arguments)}function Qv(t){return Yv.apply(this,arguments)}function Yv(){return(Yv=w(function*(t){let e;const n=yield kc(t.appConfig,r=>{const i=ZQ(r),s=e9(t,i);return e=s.registrationPromise,s.installationEntry});return""===n.fid?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})).apply(this,arguments)}function ZQ(t){return Q1(t||{fid:qQ(),registrationStatus:0})}function e9(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Yr.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function t9(t,e){return Jv.apply(this,arguments)}(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:n9(t)}:{installationEntry:e}}function Jv(){return(Jv=w(function*(t,e){try{const n=yield GQ(t,e);return cf(t.appConfig,n)}catch(n){throw B1(n)&&409===n.customData.serverCode?yield qv(t.appConfig):yield cf(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})).apply(this,arguments)}function n9(t){return Xv.apply(this,arguments)}function Xv(){return(Xv=w(function*(t){let e=yield K1(t.appConfig);for(;1===e.registrationStatus;)yield G1(100),e=yield K1(t.appConfig);if(0===e.registrationStatus){const{installationEntry:n,registrationPromise:r}=yield Qv(t);return r||n}return e})).apply(this,arguments)}function K1(t){return kc(t,e=>{if(!e)throw Yr.create("installation-not-found");return Q1(e)})}function Q1(t){return function r9(t){return 1===t.registrationStatus&&t.registrationTime+1e4<Date.now()}(t)?{fid:t.fid,registrationStatus:0}:t}function i9(t,e){return Zv.apply(this,arguments)}function Zv(){return(Zv=w(function*({appConfig:t,heartbeatServiceProvider:e},n){const r=s9(t,n),i=$1(t,n),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:L1,appId:t.appId}})},u=yield Bv(()=>fetch(r,a));if(u.ok)return U1(yield u.json());throw yield Lv("Generate Auth Token",u)})).apply(this,arguments)}function s9(t,{fid:e}){return`${Fv(t)}/${e}/authTokens:generate`}function ew(t){return tw.apply(this,arguments)}function tw(){return(tw=w(function*(t,e=!1){let n;const r=yield kc(t.appConfig,s=>{if(!J1(s))throw Yr.create("not-registered");const o=s.authToken;if(!e&&u9(o))return s;if(1===o.requestStatus)return n=o9(t,e),s;{if(!navigator.onLine)throw Yr.create("app-offline");const a=l9(s);return n=a9(t,a),a}});return n?yield n:r.authToken})).apply(this,arguments)}function o9(t,e){return nw.apply(this,arguments)}function nw(){return(nw=w(function*(t,e){let n=yield Y1(t.appConfig);for(;1===n.authToken.requestStatus;)yield G1(100),n=yield Y1(t.appConfig);const r=n.authToken;return 0===r.requestStatus?ew(t,e):r})).apply(this,arguments)}function Y1(t){return kc(t,e=>{if(!J1(e))throw Yr.create("not-registered");return function d9(t){return 1===t.requestStatus&&t.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function a9(t,e){return rw.apply(this,arguments)}function rw(){return(rw=w(function*(t,e){try{const n=yield i9(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield cf(t.appConfig,r),n}catch(n){if(!B1(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield cf(t.appConfig,r)}else yield qv(t.appConfig);throw n}})).apply(this,arguments)}function J1(t){return void 0!==t&&2===t.registrationStatus}function u9(t){return 2===t.requestStatus&&!function c9(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(t)}function l9(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function iw(){return(iw=w(function*(t){const e=t,{installationEntry:n,registrationPromise:r}=yield Qv(e);return r?r.catch(console.error):ew(e).catch(console.error),n.fid})).apply(this,arguments)}function sw(){return(sw=w(function*(t,e=!1){const n=t;return yield p9(n),(yield ew(n,e)).token})).apply(this,arguments)}function p9(t){return ow.apply(this,arguments)}function ow(){return(ow=w(function*(t){const{registrationPromise:e}=yield Qv(t);e&&(yield e)})).apply(this,arguments)}function cw(t){return Yr.create("missing-app-config-values",{valueName:t})}const X1="installations",v9=t=>{const e=t.getProvider("app").getImmediate(),n=function _9(t){if(!t||!t.options)throw cw("App Configuration");if(!t.name)throw cw("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw cw(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:nc(e,"heartbeat"),_delete:()=>Promise.resolve()}},w9=t=>{const n=nc(t.getProvider("app").getImmediate(),X1).getImmediate();return{getId:()=>function h9(t){return iw.apply(this,arguments)}(n),getToken:i=>function f9(t){return sw.apply(this,arguments)}(n,i)}};(function I9(){jt(new St(X1,v9,"PUBLIC")),jt(new St("installations-internal",w9,"PRIVATE"))})(),Me(O1,Ov),Me(O1,Ov,"esm2017");const lw="@firebase/remote-config",cn=new wr("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class M9{constructor(e,n,r,i){this.client=e,this.storage=n,this.storageCache=r,this.logger=i}isCachedDataFresh(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-n,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var n=this;return w(function*(){const[r,i]=yield Promise.all([n.storage.getLastSuccessfulFetchTimestampMillis(),n.storage.getLastSuccessfulFetchResponse()]);if(i&&n.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const s=yield n.client.fetch(e),o=[n.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&o.push(n.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(o),s})()}}function R9(t=navigator){return t.languages&&t.languages[0]||t.language}class P9{constructor(e,n,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){var n=this;return w(function*(){var r,i,s;const[o,a]=yield Promise.all([n.firebaseInstallations.getId(),n.firebaseInstallations.getToken()]),c=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${n.projectId}/namespaces/${n.namespace}:fetch?key=${n.apiKey}`,l={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},d={sdk_version:n.sdkVersion,app_instance_id:o,app_instance_id_token:a,app_id:n.appId,language_code:R9()},h={method:"POST",headers:l,body:JSON.stringify(d)},f=fetch(c,h),p=new Promise((k,R)=>{e.signal.addEventListener(()=>{const B=new Error("The operation was aborted.");B.name="AbortError",R(B)})});let g;try{yield Promise.race([f,p]),g=yield f}catch(k){let R="fetch-client-network";throw"AbortError"===(null===(r=k)||void 0===r?void 0:r.name)&&(R="fetch-timeout"),cn.create(R,{originalErrorMessage:null===(i=k)||void 0===i?void 0:i.message})}let m=g.status;const I=g.headers.get("ETag")||void 0;let _,b;if(200===g.status){let k;try{k=yield g.json()}catch(R){throw cn.create("fetch-client-parse",{originalErrorMessage:null===(s=R)||void 0===s?void 0:s.message})}_=k.entries,b=k.state}if("INSTANCE_STATE_UNSPECIFIED"===b?m=500:"NO_CHANGE"===b?m=304:("NO_TEMPLATE"===b||"EMPTY_CONFIG"===b)&&(_={}),304!==m&&200!==m)throw cn.create("fetch-status",{httpStatus:m});return{status:m,eTag:I,config:_}})()}}class L9{constructor(e,n){this.client=e,this.storage=n}fetch(e){var n=this;return w(function*(){const r=(yield n.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return n.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:n,backoffCount:r}){var i=this;return w(function*(){yield function O9(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(cn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,n);try{const s=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),s}catch(s){if(!function F9(t){if(!(t instanceof tr&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const o={throttleEndTimeMillis:Date.now()+ly(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(o),i.attemptFetch(e,o)}})()}}class U9{constructor(e,n,r,i,s){this.app=e,this._client=n,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function df(t,e){var n;const r=t.target.error||void 0;return cn.create(e,{originalErrorMessage:r&&(null===(n=r)||void 0===n?void 0:n.message)})}const ks="app_namespace_store";class H9{constructor(e,n,r,i=function G9(){return new Promise((t,e)=>{var n;try{const r=indexedDB.open("firebase_remote_config",1);r.onerror=i=>{e(df(i,"storage-open"))},r.onsuccess=i=>{t(i.target.result)},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(ks,{keyPath:"compositeKey"})}}catch(r){e(cn.create("storage-open",{originalErrorMessage:null===(n=r)||void 0===n?void 0:n.message}))}})}()){this.appId=e,this.appName=n,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var n=this;return w(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{var o;const u=r.transaction([ks],"readonly").objectStore(ks),c=n.createCompositeKey(e);try{const l=u.get(c);l.onerror=d=>{s(df(d,"storage-get"))},l.onsuccess=d=>{const h=d.target.result;i(h?h.value:void 0)}}catch(l){s(cn.create("storage-get",{originalErrorMessage:null===(o=l)||void 0===o?void 0:o.message}))}})})()}set(e,n){var r=this;return w(function*(){const i=yield r.openDbPromise;return new Promise((s,o)=>{var a;const c=i.transaction([ks],"readwrite").objectStore(ks),l=r.createCompositeKey(e);try{const d=c.put({compositeKey:l,value:n});d.onerror=h=>{o(df(h,"storage-set"))},d.onsuccess=()=>{s()}}catch(d){o(cn.create("storage-set",{originalErrorMessage:null===(a=d)||void 0===a?void 0:a.message}))}})})()}delete(e){var n=this;return w(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{var o;const u=r.transaction([ks],"readwrite").objectStore(ks),c=n.createCompositeKey(e);try{const l=u.delete(c);l.onerror=d=>{s(df(d,"storage-delete"))},l.onsuccess=()=>{i()}}catch(l){s(cn.create("storage-delete",{originalErrorMessage:null===(o=l)||void 0===o?void 0:o.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class W9{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return w(function*(){const n=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),s=yield n;s&&(e.lastFetchStatus=s);const o=yield r;o&&(e.lastSuccessfulFetchTimestampMillis=o);const a=yield i;a&&(e.activeConfig=a)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function z9(){return gw.apply(this,arguments)}function gw(){return(gw=w(function*(){if(!hs())return!1;try{return yield Zu()}catch(t){return!1}})).apply(this,arguments)}!function q9(){jt(new St("remote-config",function t(e,{instanceIdentifier:n}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw cn.create("registration-window");if(!hs())throw cn.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw cn.create("registration-project-id");if(!o)throw cn.create("registration-api-key");if(!a)throw cn.create("registration-app-id");const u=new H9(a,r.name,n=n||"firebase"),c=new W9(u),l=new ps(lw);l.logLevel=le.ERROR;const d=new P9(i,"9.9.2",n,s,o,a),h=new L9(d,u),f=new M9(h,u,c,l),p=new U9(r,f,c,u,l);return function x9(t){const e=qr(t);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(p),p},"PUBLIC").setMultipleInstances(!0)),Me(lw,"0.3.11"),Me(lw,"0.3.11","esm2017")}();const K9="/firebase-messaging-sw.js",Q9="/firebase-cloud-messaging-push-scope",nP="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",rP="google.c.a.c_id",J9="google.c.a.c_l",X9="google.c.a.ts",Z9="google.c.a.e";var Ta=(()=>{return(t=Ta||(Ta={})).PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",Ta;var t})();function Jr(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function eY(t){const n=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}const mw="fcm_token_details_db",iP="fcm_token_object_Store";function nY(t){return _w.apply(this,arguments)}function _w(){return _w=w(function*(t){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(mw))return null;let e=null;return(yield Eh(mw,5,{upgrade:(r=w(function*(i,s,o,a){var u;if(s<2||!i.objectStoreNames.contains(iP))return;const c=a.objectStore(iP),l=yield c.index("fcmSenderId").get(t);if(yield c.clear(),l)if(2===s){const d=l;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:null!==(u=d.createTime)&&void 0!==u?u:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:"string"==typeof d.vapidKey?d.vapidKey:Jr(d.vapidKey)}}}else if(3===s){const d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Jr(d.auth),p256dh:Jr(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Jr(d.vapidKey)}}}else if(4===s){const d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Jr(d.auth),p256dh:Jr(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Jr(d.vapidKey)}}}}),function(s,o,a,u){return r.apply(this,arguments)})})).close(),yield _y(mw),yield _y("fcm_vapid_details_db"),yield _y("undefined"),rY(e)?e:null;var r}),_w.apply(this,arguments)}function rY(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}const Ns="firebase-messaging-store";let yw=null;function vw(){return yw||(yw=Eh("firebase-messaging-database",1,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Ns)}})),yw}function sP(t){return ww.apply(this,arguments)}function ww(){return(ww=w(function*(t){const e=bw(t),r=yield(yield vw()).transaction(Ns).objectStore(Ns).get(e);if(r)return r;{const i=yield nY(t.appConfig.senderId);if(i)return yield Iw(t,i),i}})).apply(this,arguments)}function Iw(t,e){return Ew.apply(this,arguments)}function Ew(){return(Ew=w(function*(t,e){const n=bw(t),i=(yield vw()).transaction(Ns,"readwrite");return yield i.objectStore(Ns).put(e,n),yield i.done,e})).apply(this,arguments)}function oY(t){return Tw.apply(this,arguments)}function Tw(){return(Tw=w(function*(t){const e=bw(t),r=(yield vw()).transaction(Ns,"readwrite");yield r.objectStore(Ns).delete(e),yield r.done})).apply(this,arguments)}function bw({appConfig:t}){return t.appId}const At=new wr("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function uY(t,e){return Dw.apply(this,arguments)}function Dw(){return(Dw=w(function*(t,e){var n;const r=yield xw(t),i=aP(e),s={method:"POST",headers:r,body:JSON.stringify(i)};let o;try{o=yield(yield fetch(Aw(t.appConfig),s)).json()}catch(a){throw At.create("token-subscribe-failed",{errorInfo:null===(n=a)||void 0===n?void 0:n.toString()})}if(o.error)throw At.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw At.create("token-subscribe-no-token");return o.token})).apply(this,arguments)}function cY(t,e){return Cw.apply(this,arguments)}function Cw(){return(Cw=w(function*(t,e){var n;const r=yield xw(t),i=aP(e.subscriptionOptions),s={method:"PATCH",headers:r,body:JSON.stringify(i)};let o;try{o=yield(yield fetch(`${Aw(t.appConfig)}/${e.token}`,s)).json()}catch(a){throw At.create("token-update-failed",{errorInfo:null===(n=a)||void 0===n?void 0:n.toString()})}if(o.error)throw At.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw At.create("token-update-no-token");return o.token})).apply(this,arguments)}function oP(t,e){return Sw.apply(this,arguments)}function Sw(){return(Sw=w(function*(t,e){var n;const i={method:"DELETE",headers:yield xw(t)};try{const o=yield(yield fetch(`${Aw(t.appConfig)}/${e}`,i)).json();if(o.error)throw At.create("token-unsubscribe-failed",{errorInfo:o.error.message})}catch(s){throw At.create("token-unsubscribe-failed",{errorInfo:null===(n=s)||void 0===n?void 0:n.toString()})}})).apply(this,arguments)}function Aw({projectId:t}){return`https://fcmregistrations.googleapis.com/v1/projects/${t}/registrations`}function xw(t){return kw.apply(this,arguments)}function kw(){return(kw=w(function*({appConfig:t,installations:e}){const n=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function aP({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==nP&&(i.web.applicationPubKey=r),i}const lY=6048e5;function dY(t){return Nw.apply(this,arguments)}function Nw(){return(Nw=w(function*(t){const e=yield fY(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Jr(e.getKey("auth")),p256dh:Jr(e.getKey("p256dh"))},r=yield sP(t.firebaseDependencies);if(r){if(pY(r.subscriptionOptions,n))return Date.now()>=r.createTime+lY?hY(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield oP(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return cP(t.firebaseDependencies,n)}return cP(t.firebaseDependencies,n)})).apply(this,arguments)}function uP(t){return Mw.apply(this,arguments)}function Mw(){return(Mw=w(function*(t){const e=yield sP(t.firebaseDependencies);e&&(yield oP(t.firebaseDependencies,e.token),yield oY(t.firebaseDependencies));const n=yield t.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()})).apply(this,arguments)}function hY(t,e){return Rw.apply(this,arguments)}function Rw(){return(Rw=w(function*(t,e){try{const n=yield cY(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield Iw(t.firebaseDependencies,r),n}catch(n){throw yield uP(t),n}})).apply(this,arguments)}function cP(t,e){return Pw.apply(this,arguments)}function Pw(){return(Pw=w(function*(t,e){const r={token:yield uY(t,e),createTime:Date.now(),subscriptionOptions:e};return yield Iw(t,r),r.token})).apply(this,arguments)}function fY(t,e){return Ow.apply(this,arguments)}function Ow(){return(Ow=w(function*(t,e){return(yield t.pushManager.getSubscription())||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:eY(e)})})).apply(this,arguments)}function pY(t,e){return e.vapidKey===t.vapidKey&&e.endpoint===t.endpoint&&e.auth===t.auth&&e.p256dh===t.p256dh}function lP(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return function gY(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i)}(e,t),function mY(t,e){!e.data||(t.data=e.data)}(e,t),function _Y(t,e){var n,r,i,s,o;if(!e.fcmOptions&&!(null===(n=e.notification)||void 0===n?void 0:n.click_action))return;t.fcmOptions={};const a=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=e.notification)||void 0===s?void 0:s.click_action;a&&(t.fcmOptions.link=a);const u=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;u&&(t.fcmOptions.analyticsLabel=u)}(e,t),e}function yY(t){return"object"==typeof t&&!!t&&rP in t}function dP(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}function Fw(t){return At.create("missing-app-config-values",{valueName:t})}dP("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),dP("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class wY{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function vY(t){if(!t||!t.options)throw Fw("App Configuration Object");if(!t.name)throw Fw("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw Fw(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}function hP(t){return Lw.apply(this,arguments)}function Lw(){return(Lw=w(function*(t){var e;try{t.swRegistration=yield navigator.serviceWorker.register(K9,{scope:Q9}),t.swRegistration.update().catch(()=>{})}catch(n){throw At.create("failed-service-worker-registration",{browserErrorMessage:null===(e=n)||void 0===e?void 0:e.message})}})).apply(this,arguments)}function IY(t,e){return Vw.apply(this,arguments)}function Vw(){return(Vw=w(function*(t,e){if(!e&&!t.swRegistration&&(yield hP(t)),e||!t.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw At.create("invalid-sw-registration");t.swRegistration=e}})).apply(this,arguments)}function EY(t,e){return Bw.apply(this,arguments)}function Bw(){return(Bw=w(function*(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=nP)})).apply(this,arguments)}function Uw(){return(Uw=w(function*(t,e){if(!navigator)throw At.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw At.create("permission-blocked");return yield EY(t,null==e?void 0:e.vapidKey),yield IY(t,null==e?void 0:e.serviceWorkerRegistration),dY(t)})).apply(this,arguments)}function TY(t,e,n){return jw.apply(this,arguments)}function jw(){return(jw=w(function*(t,e,n){const r=bY(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[rP],message_name:n[J9],message_time:n[X9],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function bY(t){switch(t){case Ta.NOTIFICATION_CLICKED:return"notification_open";case Ta.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function $w(){return($w=w(function*(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Ta.PUSH_RECEIVED&&("function"==typeof t.onMessageHandler?t.onMessageHandler(lP(n)):t.onMessageHandler.next(lP(n)));const r=n.data;yY(r)&&"1"===r[Z9]&&(yield TY(t,n.messageType,r))})).apply(this,arguments)}const pP="@firebase/messaging",CY=t=>{const e=new wY(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>function DY(t,e){return $w.apply(this,arguments)}(e,n)),e},SY=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>function fP(t,e){return Uw.apply(this,arguments)}(e,r)}};function mP(){return Gw.apply(this,arguments)}function Gw(){return(Gw=w(function*(){try{yield Zu()}catch(t){return!1}return"undefined"!=typeof window&&hs()&&oy()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function AY(){jt(new St("messaging",CY,"PUBLIC")),jt(new St("messaging-internal",SY,"PRIVATE")),Me(pP,"0.9.16"),Me(pP,"0.9.16","esm2017")}();const hf="analytics",NY="firebase_id",PY="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",_P="https://www.googletagmanager.com/gtag/js",xt=new ps("@firebase/analytics");function yP(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function OY(t,e){const n=document.createElement("script");n.src=`${_P}?l=${t}&id=${e}`,n.async=!0,document.head.appendChild(n)}function LY(t,e,n,r,i,s){return qw.apply(this,arguments)}function qw(){return(qw=w(function*(t,e,n,r,i,s){const o=r[i];try{if(o)yield e[o];else{const u=(yield yP(n)).find(c=>c.measurementId===i);u&&(yield e[u.appId])}}catch(a){xt.error(a)}t("config",i,s)})).apply(this,arguments)}function VY(t,e,n,r,i){return zw.apply(this,arguments)}function zw(){return(zw=w(function*(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=yield yP(n);for(const u of o){const c=a.find(d=>d.measurementId===u),l=c&&e[c.appId];if(!l){s=[];break}s.push(l)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),t("event",r,i||{})}catch(s){xt.error(s)}})).apply(this,arguments)}function jY(){const t=window.document.getElementsByTagName("script");for(const e of Object.values(t))if(e.src&&e.src.includes(_P))return e;return null}const Cn=new wr("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),vP=new class WY{constructor(e={},n=1e3){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function qY(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function zY(t){return Kw.apply(this,arguments)}function Kw(){return(Kw=w(function*(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:qY(r)},s=PY.replace("{app-id}",n),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let a="";try{const u=yield o.json();(null===(e=u.error)||void 0===e?void 0:e.message)&&(a=u.error.message)}catch(u){}throw Cn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})).apply(this,arguments)}function KY(t){return Qw.apply(this,arguments)}function Qw(){return(Qw=w(function*(t,e=vP,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Cn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Cn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new JY;return setTimeout(w(function*(){a.abort()}),void 0!==n?n:6e4),wP({appId:r,apiKey:i,measurementId:s},o,a,e)})).apply(this,arguments)}function wP(t,e,n){return Yw.apply(this,arguments)}function Yw(){return(Yw=w(function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=vP){var s,o;const{appId:a,measurementId:u}=t;try{yield QY(r,e)}catch(c){if(u)return xt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${null===(s=c)||void 0===s?void 0:s.message}]`),{appId:a,measurementId:u};throw c}try{const c=yield zY(t);return i.deleteThrottleMetadata(a),c}catch(c){const l=c;if(!YY(l)){if(i.deleteThrottleMetadata(a),u)return xt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${null==l?void 0:l.message}]`),{appId:a,measurementId:u};throw c}const d=503===Number(null===(o=null==l?void 0:l.customData)||void 0===o?void 0:o.httpStatus)?ly(n,i.intervalMillis,30):ly(n,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return i.setThrottleMetadata(a,h),xt.debug(`Calling attemptFetch again in ${d} millis`),wP(t,h,r,i)}})).apply(this,arguments)}function QY(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Cn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function YY(t){if(!(t instanceof tr&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}class JY{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let Jw,rI;function Xw(){return(Xw=w(function*(t,e,n,r,i){if(i&&i.global)t("event",n,r);else{const s=yield e;t("event",n,Object.assign(Object.assign({},r),{send_to:s}))}})).apply(this,arguments)}function IP(t){rI=t}function EP(t){Jw=t}function rJ(){return iI.apply(this,arguments)}function iI(){return(iI=w(function*(){var t;if(!hs())return xt.warn(Cn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield Zu()}catch(e){return xt.warn(Cn.create("indexeddb-unavailable",{errorInfo:null===(t=e)||void 0===t?void 0:t.toString()}).message),!1}return!0})).apply(this,arguments)}function sI(){return(sI=w(function*(t,e,n,r,i,s,o){var a;const u=KY(t);u.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&xt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>xt.error(f)),e.push(u);const c=rJ().then(f=>{if(f)return r.getId()}),[l,d]=yield Promise.all([u,c]);jY()||OY(s,l.measurementId),rI&&(i("consent","default",rI),IP(void 0)),i("js",new Date);const h=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return h.origin="firebase",h.update=!0,null!=d&&(h[NY]=d),i("config",l.measurementId,h),Jw&&(i("set",Jw),EP(void 0)),l.measurementId})).apply(this,arguments)}class sJ{constructor(e){this.app=e}_delete(){return delete Xr[this.app.options.appId],Promise.resolve()}}let Xr={},TP=[];const bP={};let CP,Zr,ff="dataLayer",oI=!1;function aJ(t,e,n){!function oJ(){const t=[];if(sy()&&t.push("This is a browser extension environment."),oy()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Cn.create("invalid-analytics-context",{errorInfo:e});xt.warn(n.message)}}();const r=t.options.appId;if(!r)throw Cn.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw Cn.create("no-api-key");xt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Xr[r])throw Cn.create("already-exists",{id:r});if(!oI){!function FY(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(ff);const{wrappedGtag:s,gtagCore:o}=function UY(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function BY(t,e,n,r){function s(){return(s=w(function*(o,a,u){try{"event"===o?yield VY(t,e,n,a,u):"config"===o?yield LY(t,e,n,r,a,u):"consent"===o?t("consent","update",u):t("set",a)}catch(c){xt.error(c)}})).apply(this,arguments)}return function i(o,a,u){return s.apply(this,arguments)}}(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}(Xr,TP,bP,ff,"gtag");Zr=s,CP=o,oI=!0}return Xr[r]=function iJ(t,e,n,r,i,s,o){return sI.apply(this,arguments)}(t,TP,bP,e,CP,ff,n),new sJ(t)}function cJ(){return aI.apply(this,arguments)}function aI(){return(aI=w(function*(){if(sy()||!oy()||!hs())return!1;try{return yield Zu()}catch(t){return!1}})).apply(this,arguments)}const SP="@firebase/analytics";!function dJ(){jt(new St(hf,(e,{options:n})=>aJ(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n),"PUBLIC")),jt(new St("analytics-internal",function t(e){try{const n=e.getProvider(hf).getImmediate();return{logEvent:(r,i,s)=>function lJ(t,e,n,r){t=qr(t),function XY(t,e,n,r,i){return Xw.apply(this,arguments)}(Zr,Xr[t.app.options.appId],e,n,r).catch(i=>xt.error(i))}(n,r,i,s)}}catch(n){throw Cn.create("interop-component-reg-failed",{reason:n})}},"PRIVATE")),Me(SP,"0.8.0"),Me(SP,"0.8.0","esm2017")}();class hJ extends Gn{constructor(e,n){super()}schedule(e,n=0){return this}}const pf={setInterval(t,e,...n){const{delegate:r}=pf;return(null==r?void 0:r.setInterval)?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=pf;return((null==e?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0};class xP extends hJ{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){if(this.closed)return this;this.state=e;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(i,this.id,n),this}requestAsyncId(e,n,r=0){return pf.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;pf.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,fo(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const kP={now:()=>(kP.delegate||Date).now(),delegate:void 0};class Nc{constructor(e,n=Nc.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}Nc.now=kP.now;class NP extends Nc{constructor(e,n=Nc.now){super(e,n),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const gJ=new class pJ extends NP{}(class fJ extends xP{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):e.flush(this)}}),mJ=new NP(xP),gf=new zd("7.4.1"),uI="__angularfire_symbol__analyticsIsSupportedValue",cI="__angularfire_symbol__analyticsIsSupported",lI="__angularfire_symbol__remoteConfigIsSupportedValue",dI="__angularfire_symbol__remoteConfigIsSupported",hI="__angularfire_symbol__messagingIsSupportedValue",fI="__angularfire_symbol__messagingIsSupported";function mf(t,e,n){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===n);if(1===s.length)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}globalThis[cI]||(globalThis[cI]=cJ().then(t=>globalThis[uI]=t).catch(()=>globalThis[uI]=!1)),globalThis[fI]||(globalThis[fI]=mP().then(t=>globalThis[hI]=t).catch(()=>globalThis[hI]=!1)),globalThis[dI]||(globalThis[dI]=z9().then(t=>globalThis[lI]=t).catch(()=>globalThis[lI]=!1));const _f=(t,e)=>{const n=e?[e]:SM(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};function ba(){}class MP{constructor(e,n=gJ){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},n,r)}}class yJ{constructor(e){this.zone=e,this.task=null}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ba,{},ba,ba)),n.pipe(function _J(t,e,n){const r=ce(t)||e||n?{next:t,error:e,complete:n}:t;return r?po((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(au(s,u=>{var c;null===(c=r.next)||void 0===c||c.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,u),s.error(u)},()=>{var u,c;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):eg}({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let gI=(()=>{class t{constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new MP(Zone.current)),this.insideAngular=n.run(()=>new MP(Zone.current,mJ)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return t.\u0275fac=function(n){return new(n||t)(ge(ft))},t.\u0275prov=ke({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Ms(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function vJ(t){return Ms().ngZone.runOutsideAngular(()=>t())}function Rs(t){return Ms().ngZone.run(()=>t())}function wJ(t){return Ms(),function IJ(t){return function(n){return(n=n.lift(new yJ(t.ngZone))).pipe(Yl(t.outsideAngular),Ql(t.insideAngular))}}(Ms())(t)}const EJ=(t,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),Rs(()=>t.apply(void 0,r))},mI=(t,e)=>function(){let n;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(n||(n=Rs(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ba,{},ba,ba)))),r[s]=EJ(r[s],n));const i=vJ(()=>t.apply(this,r));if(!e){if(i instanceof Ot){const s=Ms();return i.pipe(Yl(s.outsideAngular),Ql(s.insideAngular))}return Rs(()=>i)}return i instanceof Ot?i.pipe(wJ):i instanceof Promise?Rs(()=>new Promise((s,o)=>i.then(a=>Rs(()=>s(a)),a=>Rs(()=>o(a))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:Rs(()=>i)};class Ps{constructor(e){return e}}class _I{constructor(){return SM()}}const yI=new se("angularfire2._apps"),bJ={provide:Ps,useFactory:function TJ(t){return t&&1===t.length?t[0]:new Ps(Iy())},deps:[[new ht,yI]]},DJ={provide:_I,deps:[[new ht,yI]]};function CJ(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new Ps(r)}}let SJ=(()=>{class t{constructor(n){Me("angularfire",gf.full,"core"),Me("angularfire",gf.full,"app"),Me("angular",Ok.full,n.toString())}}return t.\u0275fac=function(n){return new(n||t)(ge(Zd))},t.\u0275mod=fi({type:t}),t.\u0275inj=Or({providers:[bJ,DJ]}),t})();function AJ(t,...e){return{ngModule:SJ,providers:[{provide:yI,useFactory:CJ(t),multi:!0,deps:[ft,Tn,gI,...e]}]}}const xJ=mI(c6,!0);const kJ=function RP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},PP=new wr("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),OP=new ps("@firebase/auth");function yf(t,...e){OP.logLevel<=le.ERROR&&OP.error(`Auth (9.9.2): ${t}`,...e)}function ln(t,...e){throw vI(t,...e)}function Cr(t,...e){return vI(t,...e)}function FP(t,e,n){const r=Object.assign(Object.assign({},kJ()),{[e]:n});return new wr("auth","Firebase",r).create(e,{appName:t.name})}function vI(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return PP.create(t,...e)}function S(t,e,...n){if(!t)throw vI(e,...n)}function Sr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw yf(e),new Error(e)}function Pi(t,e){t||Sr(e)}const LP=new Map;function ei(t){Pi(t instanceof Function,"Expected a class definition");let e=LP.get(t);return e?(Pi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,LP.set(t,e),e)}function VP(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class Rc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Pi(n>e,"Short delay should be less than long delay!"),this.isMobile=iy()||_M()}get(){return function RJ(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function wI(){return"http:"===VP()||"https:"===VP()}()||sy()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}class BP{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Sr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Sr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Sr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const OJ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},FJ=new Rc(3e4,6e4);function _t(t,e,n,r){return EI.apply(this,arguments)}function EI(){return(EI=w(function*(t,e,n,r,i={}){return UP(t,i,w(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=uy(Object.assign({key:t.config.apiKey},o)).slice(1),u=yield t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),BP.fetch()(jP(t,t.config.apiHost,n,a),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},s))}))})).apply(this,arguments)}function UP(t,e,n){return TI.apply(this,arguments)}function TI(){return(TI=w(function*(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},OJ),e);try{const i=new LJ(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw Pc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===u)throw Pc(t,"credential-already-in-use",o);if("EMAIL_EXISTS"===u)throw Pc(t,"email-already-in-use",o);if("USER_DISABLED"===u)throw Pc(t,"user-disabled",o);const l=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw FP(t,l,c);ln(t,l)}}catch(i){if(i instanceof tr)throw i;ln(t,"network-request-failed")}})).apply(this,arguments)}function jP(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?function II(t,e){Pi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}(t.config,i):`${t.config.apiScheme}://${i}`}class LJ{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Cr(this.auth,"network-request-failed")),FJ.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Pc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Cr(t,e,r);return i.customData._tokenResponse=n,i}function DI(){return(DI=w(function*(t,e){return _t(t,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function UJ(t,e){return SI.apply(this,arguments)}function SI(){return(SI=w(function*(t,e){return _t(t,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function Oc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}function AI(){return(AI=w(function*(t,e=!1){const n=qr(t),r=yield n.getIdToken(e),i=vf(r);S(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Oc(xI(i.auth_time)),issuedAtTime:Oc(xI(i.iat)),expirationTime:Oc(xI(i.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}})).apply(this,arguments)}function xI(t){return 1e3*Number(t)}function vf(t){var e;const[n,r,i]=t.split(".");if(void 0===n||void 0===r||void 0===i)return yf("JWT malformed, contained fewer than 3 sections"),null;try{const s=ry(r);return s?JSON.parse(s):(yf("Failed to decode base64 JWT payload"),null)}catch(s){return yf("Caught error parsing JWT payload as JSON",null===(e=s)||void 0===e?void 0:e.toString()),null}}function ni(t,e){return kI.apply(this,arguments)}function kI(){return(kI=w(function*(t,e,n=!1){if(n)return e;try{return yield e}catch(r){throw r instanceof tr&&GJ(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})).apply(this,arguments)}function GJ({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}class HJ{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var n=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(w(function*(){yield n.iteration()}),r)}iteration(){var e=this;return w(function*(){var n;try{yield e.user.getIdToken(!0)}catch(r){return void("auth/network-request-failed"===(null===(n=r)||void 0===n?void 0:n.code)&&e.schedule(!0))}e.schedule()})()}}class $P{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oc(this.lastLoginAt),this.creationTime=Oc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Fc(t){return NI.apply(this,arguments)}function NI(){return(NI=w(function*(t){var e;const n=t.auth,r=yield t.getIdToken(),i=yield ni(t,UJ(n,{idToken:r}));S(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?zJ(s.providerUserInfo):[],a=qJ(t.providerData,o),l=!!t.isAnonymous&&!(t.email&&s.passwordHash||(null==a?void 0:a.length)),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new $P(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(t,d)})).apply(this,arguments)}function MI(){return(MI=w(function*(t){const e=qr(t);yield Fc(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function qJ(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function zJ(t){return t.map(e=>{var{providerId:n}=e,r=BC(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function RI(){return(RI=w(function*(t,e){const n=yield UP(t,{},w(function*(){const r=uy({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=jP(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",BP.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class Lc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){S(e.idToken,"internal-error"),S(void 0!==e.idToken,"internal-error"),S(void 0!==e.refreshToken,"internal-error");const n="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function $J(t){const e=vf(t);return S(e,"internal-error"),S(void 0!==e.exp,"internal-error"),S(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){var r=this;return w(function*(){return S(!r.accessToken||r.refreshToken,e,"user-token-expired"),n||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,n){var r=this;return w(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function KJ(t,e){return RI.apply(this,arguments)}(e,n);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Lc;return r&&(S("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(S("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(S("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Lc,this.toJSON())}_performRefresh(){return Sr("not implemented")}}function Oi(t,e){S("string"==typeof t||void 0===t,"internal-error",{appName:e})}class Os{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=BC(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new HJ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new $P(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var n=this;return w(function*(){const r=yield ni(n,n.stsTokenManager.getToken(n.auth,e));return S(r,n.auth,"internal-error"),n.accessToken!==r&&(n.accessToken=r,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),r})()}getIdTokenResult(e){return function jJ(t){return AI.apply(this,arguments)}(this,e)}reload(){return function WJ(t){return MI.apply(this,arguments)}(this)}_assign(e){this!==e&&(S(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Os(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){S(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){var r=this;return w(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),n&&(yield Fc(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return w(function*(){const n=yield e.getIdToken();return yield ni(e,function VJ(t,e){return DI.apply(this,arguments)}(e.auth,{idToken:n})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,c,l;const d=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,f=null!==(s=n.phoneNumber)&&void 0!==s?s:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,g=null!==(a=n.tenantId)&&void 0!==a?a:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,I=null!==(c=n.createdAt)&&void 0!==c?c:void 0,_=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,{uid:b,emailVerified:k,isAnonymous:R,providerData:B,stsTokenManager:ve}=n;S(b&&ve,e,"internal-error");const ar=Lc.fromJSON(this.name,ve);S("string"==typeof b,e,"internal-error"),Oi(d,e.name),Oi(h,e.name),S("boolean"==typeof k,e,"internal-error"),S("boolean"==typeof R,e,"internal-error"),Oi(f,e.name),Oi(p,e.name),Oi(g,e.name),Oi(m,e.name),Oi(I,e.name),Oi(_,e.name);const ho=new Os({uid:b,auth:e,email:h,emailVerified:k,displayName:d,isAnonymous:R,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:ar,createdAt:I,lastLoginAt:_});return B&&Array.isArray(B)&&(ho.providerData=B.map(Wl=>Object.assign({},Wl))),m&&(ho._redirectEventId=m),ho}static _fromIdTokenResponse(e,n,r=!1){return w(function*(){const i=new Lc;i.updateFromServerResponse(n);const s=new Os({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Fc(s),s})()}}const GP=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return w(function*(){return!0})()}_set(n,r){var i=this;return w(function*(){i.storage[n]=r})()}_get(n){var r=this;return w(function*(){const i=r.storage[n];return void 0===i?null:i})()}_remove(n){var r=this;return w(function*(){delete r.storage[n]})()}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})();function wf(t,e,n){return`firebase:${t}:${e}:${n}`}class Ca{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=wf(this.userKey,i.apiKey,s),this.fullPersistenceKey=wf("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return w(function*(){const n=yield e.persistence._get(e.fullUserKey);return n?Os._fromJSON(e.auth,n):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var n=this;return w(function*(){if(n.persistence===e)return;const r=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=e,r?n.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return w(function*(){if(!n.length)return new Ca(ei(GP),e,r);const i=(yield Promise.all(n.map(function(){var c=w(function*(l){if(yield l._isAvailable())return l});return function(l){return c.apply(this,arguments)}}()))).filter(c=>c);let s=i[0]||ei(GP);const o=wf(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const l=yield c._get(o);if(l){const d=Os._fromJSON(e,l);c!==s&&(a=d),s=c;break}}catch(l){}const u=i.filter(c=>c._shouldAllowMigration);return s._shouldAllowMigration&&u.length?(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(function(){var c=w(function*(l){if(l!==s)try{yield l._remove(o)}catch(d){}});return function(l){return c.apply(this,arguments)}}())),new Ca(s,e,r)):new Ca(s,e,r)})()}}function HP(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(function zP(t=bn()){return/iemobile/i.test(t)}(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(function WP(t=bn()){return/firefox\//i.test(t)}(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(function QP(t=bn()){return/blackberry/i.test(t)}(e))return"Blackberry";if(function YP(t=bn()){return/webos/i.test(t)}(e))return"Webos";if(function PI(t=bn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}(e))return"Safari";if((e.includes("chrome/")||function qP(t=bn()){return/crios\//i.test(t)}(e))&&!e.includes("edge/"))return"Chrome";if(function KP(t=bn()){return/android/i.test(t)}(e))return"Android";{const r=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==r?void 0:r.length))return r[1]}return"Other"}function JP(t,e=[]){let n;switch(t){case"Browser":n=HP(bn());break;case"Worker":n=`${HP(bn())}-${t}`;break;default:n=t}return`${n}/JsCore/9.9.2/${e.length?e.join(","):"FirebaseCore-web"}`}class JJ{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var n=this;return w(function*(){var r;if(n.auth.currentUser===e)return;const i=[];try{for(const s of n.queue)yield s(e),s.onAbort&&i.push(s.onAbort)}catch(s){i.reverse();for(const o of i)try{o()}catch(a){}throw n.auth._errorFactory.create("login-blocked",{originalMessage:null===(r=s)||void 0===r?void 0:r.message})}})()}}class XJ{constructor(e,n,r){this.app=e,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new XP(this),this.idTokenSubscription=new XP(this),this.beforeStateQueue=new JJ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PP,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){var r=this;return n&&(this._popupRedirectResolver=ei(n)),this._initializationPromise=this.queue(w(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield Ca.create(r,e),!r._deleted)){if(null===(i=r._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch(o){}yield r.initializeCurrentUser(n),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return w(function*(){if(e._deleted)return;const n=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||n){if(e.currentUser&&n&&e.currentUser.uid===n.uid)return e._currentUser._assign(n),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(n,!0)}})()}initializeCurrentUser(e){var n=this;return w(function*(){var r;const i=yield n.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const a=null===(r=n.redirectUser)||void 0===r?void 0:r._redirectEventId,u=null==s?void 0:s._redirectEventId,c=yield n.tryRedirectSignIn(e);(!a||a===u)&&(null==c?void 0:c.user)&&(s=c.user,o=!0)}if(!s)return n.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield n.beforeStateQueue.runMiddleware(s)}catch(a){s=i,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(a))}return s?n.reloadAndSetCurrentUserOrClear(s):n.directlySetCurrentUser(null)}return S(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===s._redirectEventId?n.directlySetCurrentUser(s):n.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var n=this;return w(function*(){let r=null;try{r=yield n._popupRedirectResolver._completeRedirectFn(n,e,!0)}catch(i){yield n._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var n=this;return w(function*(){var r;try{yield Fc(e)}catch(i){if("auth/network-request-failed"!==(null===(r=i)||void 0===r?void 0:r.code))return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function PJ(){if("undefined"==typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}_delete(){var e=this;return w(function*(){e._deleted=!0})()}updateCurrentUser(e){var n=this;return w(function*(){const r=e?qr(e):null;return r&&S(r.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(r&&r._clone(n))})()}_updateCurrentUser(e,n=!1){var r=this;return w(function*(){if(!r._deleted)return e&&S(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),n||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(w(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return w(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var n=this;return this.queue(w(function*(){yield n.assertedPersistence.setPersistence(ei(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new wr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,n){var r=this;return w(function*(){const i=yield r.getOrInitRedirectPersistenceManager(n);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var n=this;return w(function*(){if(!n.redirectPersistenceManager){const r=e&&ei(e)||n._popupRedirectResolver;S(r,n,"argument-error"),n.redirectPersistenceManager=yield Ca.create(n,[ei(r._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(e){var n=this;return w(function*(){var r,i;return n._isInitialized&&(yield n.queue(w(function*(){}))),(null===(r=n._currentUser)||void 0===r?void 0:r._redirectEventId)===e?n._currentUser:(null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?n.redirectUser:null})()}_persistUserIfCurrent(e){var n=this;return w(function*(){if(e===n.currentUser)return n.queue(w(function*(){return n.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(n=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s="function"==typeof n?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return S(o,this,"internal-error"),o.then(()=>s(this.currentUser)),"function"==typeof n?e.addObserver(n,r,i):e.addObserver(n)}directlySetCurrentUser(e){var n=this;return w(function*(){n.currentUser&&n.currentUser!==e&&(n._currentUser._stopProactiveRefresh(),e&&n.isProactiveRefreshEnabled&&e._startProactiveRefresh()),n.currentUser=e,e?yield n.assertedPersistence.setCurrentUser(e):yield n.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return S(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=JP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return w(function*(){var n;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(n=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();return i&&(r["X-Firebase-Client"]=i),r})()}}class XP{constructor(e){this.auth=e,this.observer=null,this.addObserver=function o8(t,e){const n=new a8(t,e);return n.subscribe.bind(n)}(n=>this.observer=n)}get next(){return S(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}(function _O(t){return`__${t}${Math.floor(1e6*Math.random())}`})("rcb"),new Rc(3e4,6e4),new Rc(2e3,1e4),new Rc(3e4,6e4),new Rc(5e3,15e3);var xO="@firebase/auth";class jZ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var n=this;return w(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{var i;e((null===(i=r)||void 0===i?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);!n||(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){S(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function GZ(t){jt(new St("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=r.options;return((a,u)=>{S(s&&!s.includes(":"),"invalid-api-key",{appName:a.name}),S(!(null==o?void 0:o.includes(":")),"argument-error",{appName:a.name});const c={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:JP(t)},l=new XJ(a,u,c);return function MJ(t,e){const n=(null==e?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ei);(null==e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,null==e?void 0:e.popupRedirectResolver)}(l,n),l})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),jt(new St("auth-internal",e=>{const n=function dn(t){return qr(t)}(e.getProvider("auth").getImmediate());return new jZ(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Me(xO,"0.20.5",function $Z(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(t)),Me(xO,"0.20.5","esm2017")}("Browser");class gT{constructor(){return _f("auth")}}const MO=new Map,zZ={activated:!1,tokenObservers:[]},KZ={initialized:!1,enabled:!1};function yt(t){return MO.get(t)||zZ}function sr(t,e){MO.set(t,e)}function Mf(){return KZ}class ZZ{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var n=this;return w(function*(){n.stop();try{n.pending=new oa,yield function eee(t){return new Promise(e=>{setTimeout(e,t)})}(n.getNextRun(e)),n.pending.resolve(),yield n.pending.promise,n.pending=new oa,yield n.operation(),n.pending.resolve(),yield n.pending.promise,n.process(!0).catch(()=>{})}catch(r){n.retryPolicy(r)?n.process(!1).catch(()=>{}):n.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}const Jt=new wr("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function PO(t){if(!yt(t).activated)throw Jt.create("use-before-activation",{appName:t.name})}function vT(t,e){return wT.apply(this,arguments)}function wT(){return(wT=w(function*({url:t,body:e},n){var r,i;const s={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){const f=yield o.getHeartbeatsHeader();f&&(s["X-Firebase-Client"]=f)}const a={method:"POST",body:JSON.stringify(e),headers:s};let u,c;try{u=yield fetch(t,a)}catch(f){throw Jt.create("fetch-network-error",{originalErrorMessage:null===(r=f)||void 0===r?void 0:r.message})}if(200!==u.status)throw Jt.create("fetch-status-error",{httpStatus:u.status});try{c=yield u.json()}catch(f){throw Jt.create("fetch-parse-error",{originalErrorMessage:null===(i=f)||void 0===i?void 0:i.message})}const l=c.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw Jt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});const d=1e3*Number(l[1]),h=Date.now();return{token:c.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}})).apply(this,arguments)}function iee(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${n}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const $c="firebase-app-check-store";let Of=null;function FO(){return Of||(Of=new Promise((t,e)=>{var n;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{t(i.target.result)},r.onerror=i=>{var s;e(Jt.create("storage-open",{originalErrorMessage:null===(s=i.target.error)||void 0===s?void 0:s.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore($c,{keyPath:"compositeKey"})}}catch(r){e(Jt.create("storage-open",{originalErrorMessage:null===(n=r)||void 0===n?void 0:n.message}))}}),Of)}function IT(){return(IT=w(function*(t,e){const r=(yield FO()).transaction($c,"readwrite"),s=r.objectStore($c).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var c;a(Jt.create("storage-set",{originalErrorMessage:null===(c=u.target.error)||void 0===c?void 0:c.message}))}})})).apply(this,arguments)}const Gc=new ps("@firebase/app-check");function UO(t,e){return hs()?function uee(t,e){return function LO(t,e){return IT.apply(this,arguments)}(function BO(t){return`${t.options.appId}-${t.name}`}(t),e)}(t,e).catch(n=>{Gc.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function jO(){return Mf().enabled}function $O(){return DT.apply(this,arguments)}function DT(){return(DT=w(function*(){const t=Mf();if(t.enabled&&t.token)return t.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const pee={error:"UNKNOWN_ERROR"};function gee(t){return _h.encodeString(JSON.stringify(t),!1)}function Ff(t){return CT.apply(this,arguments)}function CT(){return(CT=w(function*(t,e=!1){const n=t.app;PO(n);const r=yt(n);let s,i=r.token;if(!i){const u=yield r.cachedTokenPromise;u&&Lf(u)&&(i=u)}if(!e&&i&&Lf(i))return{token:i.token};let a,o=!1;if(jO()){r.exchangeTokenPromise||(r.exchangeTokenPromise=vT(iee(n,yield $O()),t.heartbeatServiceProvider).then(c=>(r.exchangeTokenPromise=void 0,c)),o=!0);const u=yield r.exchangeTokenPromise;return yield UO(n,u),sr(n,Object.assign(Object.assign({},r),{token:u})),{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(u=>(r.exchangeTokenPromise=void 0,u)),o=!0),i=yield r.exchangeTokenPromise}catch(u){"appCheck/throttled"===u.code?Gc.warn(u.message):Gc.error(u),s=u}return i?(a={token:i.token},sr(n,Object.assign(Object.assign({},r),{token:i})),yield UO(n,i)):a=_ee(s),o&&HO(n,a),a})).apply(this,arguments)}function AT(t,e){const n=yt(t),r=n.tokenObservers.filter(i=>i.next!==e);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),sr(t,Object.assign(Object.assign({},n),{tokenObservers:r}))}function GO(t){const{app:e}=t,n=yt(e);let r=n.tokenRefresher;r||(r=function mee(t){const{app:e}=t;return new ZZ(w(function*(){let r;if(r=yt(e).token?yield Ff(t,!0):yield Ff(t),r.error)throw r.error}),()=>!0,()=>{const n=yt(e);if(n.token){let r=n.token.issuedAtTimeMillis+.5*(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,n.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(t),sr(e,Object.assign(Object.assign({},n),{tokenRefresher:r}))),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function HO(t,e){const n=yt(t).tokenObservers;for(const r of n)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function Lf(t){return t.expireTimeMillis-Date.now()>0}function _ee(t){return{token:gee(pee),error:t}}class yee{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=yt(this.app);for(const n of e)AT(this.app,n.next);return Promise.resolve()}}const XO="app-check-internal";!function Mee(){jt(new St("app-check",t=>function vee(t,e){return new yee(t,e)}(t.getProvider("app").getImmediate(),t.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(XO).initialize()})),jt(new St(XO,t=>function wee(t){return{getToken:e=>Ff(t,e),addTokenListener:e=>function ST(t,e,n,r){const{app:i}=t,s=yt(i),o={next:n,error:r,type:e};if(sr(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,o]})),s.token&&Lf(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),GO(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>GO(t))}(t,"INTERNAL",e),removeTokenListener:e=>AT(t.app,e)}}(t.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),Me("@firebase/app-check","0.5.12")}();class MT{constructor(){return _f("app-check")}}"undefined"!=typeof window&&window;class Sa{constructor(e){return e}}const eF="database",PT=new se("angularfire2.database-instances");function Bee(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new Sa(r)}}const Uee={provide:class Lee{constructor(){return _f(eF)}},deps:[[new ht,PT]]},jee={provide:Sa,useFactory:function Vee(t,e){const n=mf(eF,t,e);return n&&new Sa(n)},deps:[[new ht,PT],Ps]};let $ee=(()=>{class t{constructor(){Me("angularfire",gf.full,"rtdb")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=fi({type:t}),t.\u0275inj=Or({providers:[jee,Uee]}),t})();function Gee(t,...e){return{ngModule:$ee,providers:[{provide:PT,useFactory:Bee(t),multi:!0,deps:[ft,Tn,gI,_I,[new ht,gT],[new ht,MT],...e]}]}}const Hee=mI(kQ,!0);let Wee=(()=>{class t{constructor(n){this.db=n}ngOnInit(){uf(sf(this.db,"/Vocab"),r=>{this.vocab=r.val(),this.current=this.vocab[0],this.initial=0})}next(){this.initial>=this.vocab.length?(this.initial=0,console.warn("no more data")):(this.initial+=1,this.current=this.vocab[this.initial])}previous(){this.initial<=0?(this.initial=0,console.warn("less than 0")):(this.initial-=1,this.current=this.vocab[this.initial])}}return t.\u0275fac=function(n){return new(n||t)(X(Sa))},t.\u0275cmp=mo({type:t,selectors:[["app-vocab"]],decls:15,vars:4,consts:[[1,"btn-grp"],[1,"previous-css",3,"click"],[1,"next-css",3,"click"],[1,"id-css"],[1,"mean-css"],[1,"example-css"]],template:function(n,r){1&n&&(xe(0,"div",0)(1,"button",1),Ii("click",function(){return r.previous()}),Fe(2,"Previous "),_e(),xe(3,"button",2),Ii("click",function(){return r.next()}),Fe(4,"Next "),_e()(),xe(5,"p",3),Fe(6),_e(),xe(7,"p"),Fe(8),_e(),xe(9,"p",4),Fe(10),_e(),xe(11,"p",5)(12,"span"),Fe(13,"Example:"),_e(),Fe(14),_e()),2&n&&(on(6),Ut("ID: ",r.initial,""),on(2),Ut("Word: ",null==r.current?null:r.current.Word,""),on(2),Ut("Meaning: ",null==r.current?null:r.current.Meaning,""),on(4),Ut(" ",null==r.current?null:r.current.Example,""))},styles:[""]}),t})(),qee=(()=>{class t{constructor(n){this.db=n}ngOnInit(){uf(sf(this.db,"/OneWord"),r=>{this.vocab=r.val(),this.current=this.vocab[0],this.initial=0})}next(){this.initial>=this.vocab.length?(this.initial=0,console.warn("no more data")):(this.initial+=1,this.current=this.vocab[this.initial])}previous(){this.initial<=0?(this.initial=0,console.warn("less than 0")):(this.initial-=1,this.current=this.vocab[this.initial])}}return t.\u0275fac=function(n){return new(n||t)(X(Sa))},t.\u0275cmp=mo({type:t,selectors:[["app-oneword"]],decls:15,vars:4,consts:[[1,"btn-grp"],[1,"previous-css",3,"click"],[1,"next-css",3,"click"],[1,"id-css"]],template:function(n,r){1&n&&(xe(0,"div",0)(1,"button",1),Ii("click",function(){return r.previous()}),Fe(2,"Previous "),_e(),xe(3,"button",2),Ii("click",function(){return r.next()}),Fe(4,"Next "),_e()(),xe(5,"p",3),Fe(6),_e(),xe(7,"p"),Fe(8),_e(),xe(9,"p"),Fe(10),_e(),xe(11,"p")(12,"span"),Fe(13,"Exam:"),_e(),Fe(14),_e()),2&n&&(on(6),Ut("ID: ",r.initial,""),on(2),Ut("Word: ",null==r.current?null:r.current.Word,""),on(2),Ut("Phrase: ",null==r.current?null:r.current.Phrase,""),on(4),Ut(" ",null==r.current?null:r.current.Exam,""))},styles:[""]}),t})(),zee=(()=>{class t{constructor(n){this.db=n}ngOnInit(){uf(sf(this.db,"/Idiom"),r=>{this.vocab=r.val(),this.current=this.vocab[0],this.initial=0})}next(){this.initial>=this.vocab.length?(this.initial=0,console.warn("no more data")):(this.initial+=1,this.current=this.vocab[this.initial])}previous(){this.initial<=0?(this.initial=0,console.warn("less than 0")):(this.initial-=1,this.current=this.vocab[this.initial])}}return t.\u0275fac=function(n){return new(n||t)(X(Sa))},t.\u0275cmp=mo({type:t,selectors:[["app-idioms"]],decls:17,vars:5,consts:[[1,"btn-grp"],[1,"previous-css",3,"click"],[1,"next-css",3,"click"],[1,"id-css"]],template:function(n,r){1&n&&(xe(0,"div",0)(1,"button",1),Ii("click",function(){return r.previous()}),Fe(2,"Previous "),_e(),xe(3,"button",2),Ii("click",function(){return r.next()}),Fe(4,"Next "),_e()(),xe(5,"p",3),Fe(6),_e(),xe(7,"p"),Fe(8),_e(),xe(9,"p"),Fe(10),_e(),xe(11,"p"),Fe(12),_e(),xe(13,"p")(14,"span"),Fe(15,"Exam:"),_e(),Fe(16),_e()),2&n&&(on(6),Ut("ID: ",r.initial,""),on(2),Ut("Idiom: ",null==r.current?null:r.current.idiom,""),on(2),Ut("English Meaning: ",null==r.current?null:r.current.meaning,""),on(2),Ut("Hindi Meaning: ",null==r.current?null:r.current.meaning_hin,""),on(4),Ut(" ",null==r.current?null:r.current.exam,""))},styles:[""]}),t})(),Kee=(()=>{class t{constructor(){this.title="VocApp"}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=mo({type:t,selectors:[["app-root"]],decls:11,vars:0,consts:[[1,"pure-g"],[1,"pure-u-1"],[1,"box"],[1,"pure-u-1","pure-u-md-1-2"],[1,"box",2,"background","#34db8d"],[1,"box",2,"background","#db8d34"]],template:function(n,r){1&n&&(xe(0,"div",0)(1,"div",1)(2,"div",2),Fu(3,"app-vocab"),_e()()(),xe(4,"div",0)(5,"div",3)(6,"div",4),Fu(7,"app-oneword"),_e()(),xe(8,"div",3)(9,"div",5),Fu(10,"app-idioms"),_e()()())},directives:[Wee,qee,zee],styles:[""]}),t})();const tF_firebase={apiKey:"AIzaSyDPBI_ukMHIpwCC_MeK-CbcePkt73QPLVU",authDomain:"my-application222-324a9.firebaseapp.com",databaseURL:"https://my-application222-324a9-default-rtdb.firebaseio.com",projectId:"my-application222-324a9",storageBucket:"my-application222-324a9.appspot.com",messagingSenderId:"186835810201",appId:"1:186835810201:web:bd21a9b013511484820508",measurementId:"G-M52HJNDE6M"};var P,Qee="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ii={},OT=OT||{},j=Qee||self;function Bf(){}function FT(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Hc(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var LT="closure_uid_"+(1e9*Math.random()>>>0),Jee=0;function Xee(t,e,n){return t.call.apply(t.bind,arguments)}function Zee(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function kt(t,e,n){return(kt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Xee:Zee).apply(null,arguments)}function Uf(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Nt(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Fi(){this.s=this.s,this.o=this.o}var tte={};Fi.prototype.s=!1,Fi.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function Yee(t){return Object.prototype.hasOwnProperty.call(t,LT)&&t[LT]||(t[LT]=++Jee)}(this);delete tte[t]}},Fi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const nF=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},rF=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const r=t.length,i="string"==typeof t?t.split(""):t;for(let s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function iF(t){return Array.prototype.concat.apply([],arguments)}function VT(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function jf(t){return/^[\s\xa0]*$/.test(t)}var Zt,sF=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Xt(t,e){return-1!=t.indexOf(e)}function BT(t,e){return t<e?-1:t>e?1:0}e:{var oF=j.navigator;if(oF){var aF=oF.userAgent;if(aF){Zt=aF;break e}}Zt=""}function UT(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function uF(t){const e={};for(const n in t)e[n]=t[n];return e}var cF="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lF(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<cF.length;s++)n=cF[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function jT(t){return jT[" "](t),t}jT[" "]=Bf;var $f,t,ite=Xt(Zt,"Opera"),Aa=Xt(Zt,"Trident")||Xt(Zt,"MSIE"),dF=Xt(Zt,"Edge"),$T=dF||Aa,hF=Xt(Zt,"Gecko")&&!(Xt(Zt.toLowerCase(),"webkit")&&!Xt(Zt,"Edge"))&&!(Xt(Zt,"Trident")||Xt(Zt,"MSIE"))&&!Xt(Zt,"Edge"),ste=Xt(Zt.toLowerCase(),"webkit")&&!Xt(Zt,"Edge");function fF(){var t=j.document;return t?t.documentMode:void 0}e:{var GT="",HT=(t=Zt,hF?/rv:([^\);]+)(\)|;)/.exec(t):dF?/Edge\/([\d\.]+)/.exec(t):Aa?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):ste?/WebKit\/(\S+)/.exec(t):ite?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(HT&&(GT=HT?HT[1]:""),Aa){var WT=fF();if(null!=WT&&WT>parseFloat(GT)){$f=String(WT);break e}}$f=GT}var ote={};var ute=j.document&&Aa&&(fF()||parseInt($f,10))||void 0,cte=function(){if(!j.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{j.addEventListener("test",Bf,e),j.removeEventListener("test",Bf,e)}catch(n){}return t}();function Gt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Wc(t,e){if(Gt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(hF){e:{try{jT(e.nodeName);var i=!0;break e}catch(s){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:lte[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Wc.Z.h.call(this)}}Gt.prototype.h=function(){this.defaultPrevented=!0},Nt(Wc,Gt);var lte={2:"touch",3:"pen",4:"mouse"};Wc.prototype.h=function(){Wc.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var qc="closure_listenable_"+(1e6*Math.random()|0),dte=0;function hte(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++dte,this.ca=this.fa=!1}function Gf(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Hf(t){this.src=t,this.g={},this.h=0}function zT(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=nF(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Gf(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function KT(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==r)return i}return-1}Hf.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=KT(t,e,r,i);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new hte(e,this.src,s,!!r,i)).fa=n,t.push(e)),e};var QT="closure_lm_"+(1e6*Math.random()|0),YT={};function gF(t,e,n,r,i){if(r&&r.once)return _F(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)gF(t,e[s],n,r,i);return null}return n=eb(n),t&&t[qc]?t.N(e,n,Hc(r)?!!r.capture:!!r,i):mF(t,e,n,!1,r,i)}function mF(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Hc(i)?!!i.capture:!!i,a=XT(t);if(a||(t[QT]=a=new Hf(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function fte(){var e=pte;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)cte||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(vF(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function _F(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)_F(t,e[s],n,r,i);return null}return n=eb(n),t&&t[qc]?t.O(e,n,Hc(r)?!!r.capture:!!r,i):mF(t,e,n,!0,r,i)}function yF(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)yF(t,e[s],n,r,i);else r=Hc(r)?!!r.capture:!!r,n=eb(n),t&&t[qc]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=KT(s=t.g[e],n,r,i))&&(Gf(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=XT(t))&&(e=t.g[e.toString()],t=-1,e&&(t=KT(e,n,r,i)),(n=-1<t?e[t]:null)&&JT(n))}function JT(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[qc])zT(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(vF(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=XT(e))?(zT(n,t),0==n.h&&(n.src=null,e[QT]=null)):Gf(t)}}}function vF(t){return t in YT?YT[t]:YT[t]="on"+t}function pte(t,e){if(t.ca)t=!0;else{e=new Wc(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&JT(t),t=n.call(r,e)}return t}function XT(t){return(t=t[QT])instanceof Hf?t:null}var ZT="__closure_events_fn_"+(1e9*Math.random()>>>0);function eb(t){return"function"==typeof t?t:(t[ZT]||(t[ZT]=function(e){return t.handleEvent(e)}),t[ZT])}function vt(){Fi.call(this),this.i=new Hf(this),this.P=this,this.I=null}function Mt(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new Gt(e,t);else if(e instanceof Gt)e.target=e.target||t;else{var i=e;lF(e=new Gt(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Wf(o,r,!0,e)&&i}if(i=Wf(o=e.g=t,r,!0,e)&&i,i=Wf(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=Wf(o=e.g=n[s],r,!1,e)&&i}function Wf(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,u=o.ia||o.src;o.fa&&zT(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Nt(vt,Fi),vt.prototype[qc]=!0,vt.prototype.removeEventListener=function(t,e,n,r){yF(this,t,e,n,r)},vt.prototype.M=function(){if(vt.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Gf(n[r]);delete t.g[e],t.h--}}this.I=null},vt.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},vt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var tb=j.JSON.stringify;function gte(){var t=IF;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var rb,wF=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new _te,t=>t.reset());class _te{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function yte(t){j.setTimeout(()=>{throw t},0)}function nb(t,e){rb||function vte(){var t=j.Promise.resolve(void 0);rb=function(){t.then(wte)}}(),ib||(rb(),ib=!0),IF.add(t,e)}var ib=!1,IF=new class mte{constructor(){this.h=this.g=null}add(e,n){const r=wF.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}};function wte(){for(var t;t=gte();){try{t.h.call(t.g)}catch(n){yte(n)}var e=wF;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ib=!1}function qf(t,e){vt.call(this),this.h=t||1,this.g=e||j,this.j=kt(this.kb,this),this.l=Date.now()}function sb(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function ob(t,e,n){if("function"==typeof t)n&&(t=kt(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=kt(t.handleEvent,t)}return 2147483647<Number(e)?-1:j.setTimeout(t,e||0)}function EF(t){t.g=ob(()=>{t.g=null,t.i&&(t.i=!1,EF(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}Nt(qf,vt),(P=qf.prototype).da=!1,P.S=null,P.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Mt(this,"tick"),this.da&&(sb(this),this.start()))}},P.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},P.M=function(){qf.Z.M.call(this),sb(this),delete this.g};class Ite extends Fi{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:EF(this)}M(){super.M(),this.g&&(j.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zc(t){Fi.call(this),this.h=t,this.g={}}Nt(zc,Fi);var TF=[];function bF(t,e,n,r){Array.isArray(n)||(n&&(TF[0]=n.toString()),n=TF);for(var i=0;i<n.length;i++){var s=gF(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function DF(t){UT(t.g,function(e,n){this.g.hasOwnProperty(n)&&JT(e)},t),t.g={}}function zf(){this.g=!0}function xa(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Dte(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return tb(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}zc.prototype.M=function(){zc.Z.M.call(this),DF(this)},zc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},zf.prototype.Aa=function(){this.g=!1},zf.prototype.info=function(){};var Bs={},CF=null;function Kf(){return CF=CF||new vt}function SF(t){Gt.call(this,Bs.Ma,t)}function Kc(t){const e=Kf();Mt(e,new SF(e,t))}function AF(t,e){Gt.call(this,Bs.STAT_EVENT,t),this.stat=e}function en(t){const e=Kf();Mt(e,new AF(e,t))}function xF(t,e){Gt.call(this,Bs.Na,t),this.size=e}function Qc(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return j.setTimeout(function(){t()},e)}Bs.Ma="serverreachability",Nt(SF,Gt),Bs.STAT_EVENT="statevent",Nt(AF,Gt),Bs.Na="timingevent",Nt(xF,Gt);var Qf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},kF={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ab(){}function MF(){}ab.prototype.h=null;var lb,Yc={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ub(){Gt.call(this,"d")}function cb(){Gt.call(this,"c")}function Yf(){}function Jc(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new zc(this),this.P=Cte,this.W=new qf(t=$T?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new RF}function RF(){this.i=null,this.g="",this.h=!1}Nt(ub,Gt),Nt(cb,Gt),Nt(Yf,ab),Yf.prototype.g=function(){return new XMLHttpRequest},Yf.prototype.i=function(){return{}},lb=new Yf;var Cte=45e3,db={},Jf={};function hb(t,e,n){t.K=1,t.v=np(si(e)),t.s=n,t.U=!0,PF(t,null)}function PF(t,e){t.F=Date.now(),Xc(t),t.A=si(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),GF(n.h,"t",r),t.C=0,n=t.l.H,t.h=new RF,t.g=hL(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Ite(kt(t.Ia,t,t.g),t.O)),bF(t.V,t.g,"readystatechange",t.gb),e=t.H?uF(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Kc(1),function Ete(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var d=l.split("_");o=2<=d.length&&"type"==d[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.u,t.A,t.m,t.X,t.s)}function OF(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function FF(t,e,n){let i,r=!0;for(;!t.I&&t.C<n.length;){if(i=Ste(t,n),i==Jf){4==e&&(t.o=4,en(14),r=!1),xa(t.j,t.m,null,"[Incomplete Response]");break}if(i==db){t.o=4,en(15),xa(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}xa(t.j,t.m,i,null),fb(t,i)}OF(t)&&i!=Jf&&i!=db&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,en(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),bb(e),e.L=!0,en(11))):(xa(t.j,t.m,n,"[Invalid Chunked Response]"),Us(t),Zc(t))}function Ste(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Jf:(n=Number(e.substring(n,r)),isNaN(n)?db:(r+=1)+n>e.length?Jf:(e=e.substr(r,n),t.C=r+n,e))}function Xc(t){t.Y=Date.now()+t.P,LF(t,t.P)}function LF(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Qc(kt(t.eb,t),e)}function Xf(t){t.B&&(j.clearTimeout(t.B),t.B=null)}function Zc(t){0==t.l.G||t.I||uL(t.l,t)}function Us(t){Xf(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,sb(t.W),DF(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function fb(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||mb(n.i,t)))if(n.I=t.N,!t.J&&mb(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(n.u)n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Qc(kt(n.ab,n),6e3));else{if(n.g){if(!(n.g.F+3e3<t.F))break e;up(n),op(n)}Tb(n),en(18)}if(1>=qF(n.i)&&n.ka){try{n.ka()}catch(c){}n.ka=void 0}}else Gs(n,11)}else if((t.J||n.g==t)&&up(n),!jf(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.U=c[0],c=c[1],2==n.G)if("c"==c[0]){n.J=c[1],n.la=c[2];const l=c[3];null!=l&&(n.ma=l,n.h.info("VER="+n.ma));const d=c[4];null!=d&&(n.za=d,n.h.info("SVER="+n.za));const h=c[5];null!=h&&"number"==typeof h&&0<h&&(n.K=r=1.5*h,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;!s.g&&(Xt(p,"spdy")||Xt(p,"quic")||Xt(p,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(_b(s,s.h),s.h=null))}if(r.D){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.sa=g,Pe(r.F,r.D,g))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=t;if((r=n).oa=dL(r,r.H?r.la:null,r.W),o.J){zF(r.i,o);var a=o,u=r.K;u&&a.setTimeout(u),a.B&&(Xf(a),Xc(a)),r.g=o}else oL(r);0<n.l.length&&ap(n)}else"stop"!=c[0]&&"close"!=c[0]||Gs(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Gs(n,7):Ib(n):"noop"!=c[0]&&n.j&&n.j.wa(c),n.A=0)}Kc(4)}catch(c){}}function pb(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(FT(t)||"string"==typeof t)rF(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(FT(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=function Ate(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(FT(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function ka(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ka)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function gb(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];js(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)js(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function js(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(P=Jc.prototype).setTimeout=function(t){this.P=t},P.gb=function(t){t=t.target;const e=this.L;e&&3==oi(t)?e.l():this.Ia(t)},P.Ia=function(t){try{if(t==this.g)e:{const l=oi(this.g);var e=this.g.Da();const d=this.g.ba();if(!(3>l)&&(3!=l||$T||this.g&&(this.h.h||this.g.ga()||tL(this.g)))){this.I||4!=l||7==e||Kc(8==e||0>=d?3:2),Xf(this);var n=this.g.ba();this.N=n;t:if(OF(this)){var r=tL(this.g);t="";var i=r.length,s=4==oi(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Us(this),Zc(this);var o="";break t}this.h.i=new j.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function Tte(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.X,l,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jf(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,en(12),Us(this),Zc(this);break e}xa(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,fb(this,n)}this.U?(FF(this,l,o),$T&&this.i&&3==l&&(bF(this.V,this.W,"tick",this.fb),this.W.start())):(xa(this.j,this.m,o,null),fb(this,o)),4==l&&Us(this),this.i&&!this.I&&(4==l?uL(this.l,this):(this.i=!1,Xc(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,en(12)):(this.o=0,en(13)),Us(this),Zc(this)}}}catch(l){}},P.fb=function(){if(this.g){var t=oi(this.g),e=this.g.ga();this.C<e.length&&(Xf(this),FF(this,t,e),this.i&&4!=t&&Xc(this))}},P.cancel=function(){this.I=!0,Us(this)},P.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function bte(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Kc(3),en(17)),Us(this),this.o=2,Zc(this)):LF(this,this.Y-t)},(P=ka.prototype).R=function(){gb(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},P.T=function(){return gb(this),this.g.concat()},P.get=function(t,e){return js(this.h,t)?this.h[t]:e},P.set=function(t,e){js(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},P.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};var VF=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function $s(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof $s){this.g=void 0!==e?e:t.g,Zf(this,t.j),this.s=t.s,ep(this,t.i),tp(this,t.m),this.l=t.l,e=t.h;var n=new nl;n.i=e.i,e.g&&(n.g=new ka(e.g),n.h=e.h),BF(this,n),this.o=t.o}else t&&(n=String(t).match(VF))?(this.g=!!e,Zf(this,n[1]||"",!0),this.s=el(n[2]||""),ep(this,n[3]||"",!0),tp(this,n[4]),this.l=el(n[5]||"",!0),BF(this,n[6]||"",!0),this.o=el(n[7]||"")):(this.g=!!e,this.h=new nl(null,this.g))}function si(t){return new $s(t)}function Zf(t,e,n){t.j=n?el(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ep(t,e,n){t.i=n?el(e,!0):e}function tp(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function BF(t,e,n){e instanceof nl?(t.h=e,function Lte(t,e){e&&!t.j&&(Li(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(jF(this,r),GF(this,i,n))},t)),t.j=e}(t.h,t.g)):(n||(e=tl(e,Ote)),t.h=new nl(e,t.g))}function Pe(t,e,n){t.h.set(e,n)}function np(t){return Pe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function el(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function tl(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Mte),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Mte(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}$s.prototype.toString=function(){var t=[],e=this.j;e&&t.push(tl(e,UF,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(tl(e,UF,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(tl(n,"/"==n.charAt(0)?Pte:Rte,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",tl(n,Fte)),t.join("")};var UF=/[#\/\?@]/g,Rte=/[#\?:]/g,Pte=/[#\?]/g,Ote=/[#\?@]/g,Fte=/#/g;function nl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Li(t){t.g||(t.g=new ka,t.h=0,t.i&&function xte(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function jF(t,e){Li(t),e=Na(t,e),js(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,js((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&gb(t)))}function $F(t,e){return Li(t),e=Na(t,e),js(t.g.h,e)}function GF(t,e,n){jF(t,e),0<n.length&&(t.i=null,t.g.set(Na(t,e),VT(n)),t.h+=n.length)}function Na(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function HF(t){this.l=t||Bte,t=j.PerformanceNavigationTiming?0<(t=j.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(j.g&&j.g.Ea&&j.g.Ea()&&j.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(P=nl.prototype).add=function(t,e){Li(this),this.i=null,t=Na(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},P.forEach=function(t,e){Li(this),this.g.forEach(function(n,r){rF(n,function(i){t.call(e,i,r,this)},this)},this)},P.T=function(){Li(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n},P.R=function(t){Li(this);var e=[];if("string"==typeof t)$F(this,t)&&(e=iF(e,this.g.get(Na(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=iF(e,t[n])}return e},P.set=function(t,e){return Li(this),this.i=null,$F(this,t=Na(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},P.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},P.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.i=t.join("&")};var Bte=10;function WF(t){return!!t.h||!!t.g&&t.g.size>=t.j}function qF(t){return t.h?1:t.g?t.g.size:0}function mb(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function _b(t,e){t.g?t.g.add(e):t.h=e}function zF(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function KF(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return VT(t.i)}function yb(){}function Ute(){this.g=new yb}function jte(t,e,n){const r=n||"";try{pb(t,function(i,s){let o=i;Hc(i)&&(o=tb(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function rp(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}function rl(t){this.l=t.$b||null,this.j=t.ib||!1}function ip(t,e){vt.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=vb,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}HF.prototype.cancel=function(){if(this.i=KF(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},yb.prototype.stringify=function(t){return j.JSON.stringify(t,void 0)},yb.prototype.parse=function(t){return j.JSON.parse(t,void 0)},Nt(rl,ab),rl.prototype.g=function(){return new ip(this.l,this.j)},rl.prototype.i=function(t){return function(){return t}}({}),Nt(ip,vt);var vb=0;function QF(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function il(t){t.readyState=4,t.l=null,t.j=null,t.A=null,sl(t)}function sl(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(P=ip.prototype).open=function(t,e){if(this.readyState!=vb)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,sl(this)},P.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||j).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},P.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,il(this)),this.readyState=vb},P.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,sl(this)),this.g&&(this.readyState=3,sl(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==j.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;QF(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},P.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?il(this):sl(this),3==this.readyState&&QF(this)}},P.Ua=function(t){this.g&&(this.response=this.responseText=t,il(this))},P.Ta=function(t){this.g&&(this.response=t,il(this))},P.ha=function(){this.g&&il(this)},P.setRequestHeader=function(t,e){this.v.append(t,e)},P.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},P.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ip.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Gte=j.JSON.parse;function tt(t){vt.call(this),this.headers=new ka,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=YF,this.K=this.L=!1}Nt(tt,vt);var YF="",Hte=/^https?$/i,Wte=["POST","PUT"];function zte(t){return"content-type"==t.toLowerCase()}function JF(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,XF(t),sp(t)}function XF(t){t.D||(t.D=!0,Mt(t,"complete"),Mt(t,"error"))}function ZF(t){if(t.h&&void 0!==OT&&(!t.C[1]||4!=oi(t)||2!=t.ba()))if(t.v&&4==oi(t))ob(t.Fa,0,t);else if(Mt(t,"readystatechange"),4==oi(t)){t.h=!1;try{const a=t.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===a){var i=String(t.H).match(VF)[1]||null;if(!i&&j.self&&j.self.location){var s=j.self.location.protocol;i=s.substr(0,s.length-1)}r=!Hte.test(i?i.toLowerCase():"")}n=r}if(n)Mt(t,"complete"),Mt(t,"success");else{t.m=6;try{var o=2<oi(t)?t.g.statusText:""}catch(u){o=""}t.j=o+" ["+t.ba()+"]",XF(t)}}finally{sp(t)}}}function sp(t,e){if(t.g){eL(t);const n=t.g,r=t.C[0]?Bf:null;t.g=null,t.C=null,e||Mt(t,"ready");try{n.onreadystatechange=r}catch(i){}}}function eL(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(j.clearTimeout(t.A),t.A=null)}function oi(t){return t.g?t.g.readyState:0}function tL(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case YF:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function wb(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function Kte(t){let e="";return UT(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Pe(t,e,n))}function ol(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function nL(t){this.za=0,this.l=[],this.h=new zf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ol("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ol("baseRetryDelayMs",5e3,t),this.$a=ol("retryDelaySeedMs",1e4,t),this.Ya=ol("forwardChannelMaxRetries",2,t),this.ra=ol("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new HF(t&&t.concurrentRequestLimit),this.Ca=new Ute,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Ib(t){if(rL(t),3==t.G){var e=t.V++,n=si(t.F);Pe(n,"SID",t.J),Pe(n,"RID",e),Pe(n,"TYPE","terminate"),al(t,n),(e=new Jc(t,t.h,e,void 0)).K=2,e.v=np(si(n)),n=!1,j.navigator&&j.navigator.sendBeacon&&(n=j.navigator.sendBeacon(e.v.toString(),"")),!n&&j.Image&&((new Image).src=e.v,n=!0),n||(e.g=hL(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Xc(e)}lL(t)}function op(t){t.g&&(bb(t),t.g.cancel(),t.g=null)}function rL(t){op(t),t.u&&(j.clearTimeout(t.u),t.u=null),up(t),t.i.cancel(),t.m&&("number"==typeof t.m&&j.clearTimeout(t.m),t.m=null)}function Eb(t,e){t.l.push(new class{constructor(t,e){this.h=t,this.g=e}}(t.Za++,e)),3==t.G&&ap(t)}function ap(t){WF(t.i)||t.m||(t.m=!0,nb(t.Ha,t),t.C=0)}function iL(t,e){var n;n=e?e.m:t.V++;const r=si(t.F);Pe(r,"SID",t.J),Pe(r,"RID",n),Pe(r,"AID",t.U),al(t,r),t.o&&t.s&&wb(r,t.o,t.s),n=new Jc(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=sL(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),_b(t.i,n),hb(n,r,e)}function al(t,e){t.j&&pb({},function(n,r){Pe(e,r,n)})}function sL(t,e,n){n=Math.min(t.l.length,n);var r=t.j?kt(t.j.Oa,t.j,t):null;e:{var i=t.l;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let c=i[u].h;const l=i[u].g;if(c-=s,0>c)s=Math.max(0,i[u].h-100),a=!1;else try{jte(l,o,"req"+c+"_")}catch(d){r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.l.splice(0,n),e.D=t,r}function oL(t){t.g||t.u||(t.Y=1,nb(t.Ga,t),t.A=0)}function Tb(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=Qc(kt(t.Ga,t),cL(t,t.A)),t.A++,0))}function bb(t){null!=t.B&&(j.clearTimeout(t.B),t.B=null)}function aL(t){t.g=new Jc(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=si(t.oa);Pe(e,"RID","rpc"),Pe(e,"SID",t.J),Pe(e,"CI",t.N?"0":"1"),Pe(e,"AID",t.U),al(t,e),Pe(e,"TYPE","xmlhttp"),t.o&&t.s&&wb(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=np(si(e)),n.s=null,n.U=!0,PF(n,t)}function up(t){null!=t.v&&(j.clearTimeout(t.v),t.v=null)}function uL(t,e){var n=null;if(t.g==e){up(t),bb(t),t.g=null;var r=2}else{if(!mb(t.i,e))return;n=e.D,zF(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Mt(r=Kf(),new xF(r,n,e,i)),ap(t)}else oL(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function Qte(t,e){return!(qF(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Qc(kt(t.Ha,t,e),cL(t,t.C)),t.C++,0)))}(t,e)||2==r&&Tb(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Gs(t,5);break;case 4:Gs(t,10);break;case 3:Gs(t,6);break;default:Gs(t,2)}}function cL(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Gs(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=kt(t.jb,t);n||(n=new $s("//www.google.com/images/cleardot.gif"),j.location&&"http"==j.location.protocol||Zf(n,"https"),np(n)),function $te(t,e){const n=new zf;if(j.Image){const r=new Image;r.onload=Uf(rp,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Uf(rp,n,r,"TestLoadImage: error",!1,e),r.onabort=Uf(rp,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Uf(rp,n,r,"TestLoadImage: timeout",!1,e),j.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else en(2);t.G=0,t.j&&t.j.va(e),lL(t),rL(t)}function lL(t){t.G=0,t.I=-1,t.j&&((0!=KF(t.i).length||0!=t.l.length)&&(t.i.i.length=0,VT(t.l),t.l.length=0),t.j.ua())}function dL(t,e,n){let r=function kte(t){return t instanceof $s?si(t):new $s(t,void 0)}(n);if(""!=r.i)e&&ep(r,e+"."+r.i),tp(r,r.m);else{const i=j.location;r=function Nte(t,e,n,r){var i=new $s(null,void 0);return t&&Zf(i,t),e&&ep(i,e),n&&tp(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&UT(t.aa,function(i,s){Pe(r,s,i)}),n=t.sa,(e=t.D)&&n&&Pe(r,e,n),Pe(r,"VER",t.ma),al(t,r),r}function hL(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new tt(n&&t.Ba&&!t.qa?new rl({ib:!0}):t.qa)).L=t.H,e}function fL(){}function cp(){if(Aa&&!(10<=Number(ute)))throw Error("Environmental error: no available transport.")}function Sn(t,e){vt.call(this),this.g=new nL(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!jf(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!jf(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Ma(this)}function pL(t){ub.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function gL(){cb.call(this),this.status=1}function Ma(t){this.g=t}(P=tt.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():lb.g(),this.C=function NF(t){return t.h||(t.h=t.i())}(this.u?this.u:lb),this.g.onreadystatechange=kt(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){return void JF(this,s)}t=n||"";const i=new ka(this.headers);r&&pb(r,function(s,o){i.set(o,s)}),r=function nte(t){e:{var e=zte;const n=t.length,r="string"==typeof t?t.split(""):t;for(let i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break e}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=j.FormData&&t instanceof j.FormData,!(0<=nF(Wte,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,o){this.g.setRequestHeader(o,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{eL(this),0<this.B&&((this.K=function qte(t){return Aa&&function ate(){return function rte(t){var e=ote;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}(function(){let t=0;const e=sF(String($f)).split("."),n=sF("9").split("."),r=Math.max(e.length,n.length);for(let o=0;0==t&&o<r;o++){var i=e[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;t=BT(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||BT(0==i[2].length,0==s[2].length)||BT(i[2],s[2]),i=i[3],s=s[3]}while(0==t)}return 0<=t})}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=kt(this.pa,this)):this.A=ob(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){JF(this,s)}},P.pa=function(){void 0!==OT&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Mt(this,"timeout"),this.abort(8))},P.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Mt(this,"complete"),Mt(this,"abort"),sp(this))},P.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),sp(this,!0)),tt.Z.M.call(this)},P.Fa=function(){this.s||(this.F||this.v||this.l?ZF(this):this.cb())},P.cb=function(){ZF(this)},P.ba=function(){try{return 2<oi(this)?this.g.status:-1}catch(t){return-1}},P.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},P.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Gte(e)}},P.Da=function(){return this.m},P.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(P=nL.prototype).ma=8,P.G=1,P.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},P.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const i=new Jc(this,this.h,t,void 0);let s=this.s;if(this.P&&(s?(s=uF(s),lF(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var e=0,n=0;n<this.l.length;n++){var r=this.l[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.l.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=sL(this,i,e),Pe(n=si(this.F),"RID",t),Pe(n,"CVER",22),this.D&&Pe(n,"X-HTTP-Session-Id",this.D),al(this,n),this.o&&s&&wb(n,this.o,s),_b(this.i,i),this.Ra&&Pe(n,"TYPE","init"),this.ja?(Pe(n,"$req",e),Pe(n,"SID","null"),i.$=!0,hb(i,n,null)):hb(i,n,e),this.G=2}}else 3==this.G&&(t?iL(this,t):0==this.l.length||WF(this.i)||iL(this))},P.Ga=function(){if(this.u=null,aL(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Qc(kt(this.bb,this),t)}},P.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,en(10),op(this),aL(this))},P.ab=function(){null!=this.v&&(this.v=null,op(this),Tb(this),en(19))},P.jb=function(t){t?(this.h.info("Successfully pinged google.com"),en(2)):(this.h.info("Failed to ping google.com"),en(1))},(P=fL.prototype).xa=function(){},P.wa=function(){},P.va=function(){},P.ua=function(){},P.Oa=function(){},cp.prototype.g=function(t,e){return new Sn(t,e)},Nt(Sn,vt),Sn.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),nb(kt(t.hb,t,e))),en(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=dL(t,null,t.W),ap(t)},Sn.prototype.close=function(){Ib(this.g)},Sn.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,Eb(this.g,e)}else this.v?((e={}).__data__=tb(t),Eb(this.g,e)):Eb(this.g,t)},Sn.prototype.M=function(){this.g.j=null,delete this.j,Ib(this.g),delete this.g,Sn.Z.M.call(this)},Nt(pL,ub),Nt(gL,cb),Nt(Ma,fL),Ma.prototype.xa=function(){Mt(this.g,"a")},Ma.prototype.wa=function(t){Mt(this.g,new pL(t))},Ma.prototype.va=function(t){Mt(this.g,new gL(t))},Ma.prototype.ua=function(){Mt(this.g,"b")},cp.prototype.createWebChannel=cp.prototype.g,Sn.prototype.send=Sn.prototype.u,Sn.prototype.open=Sn.prototype.m,Sn.prototype.close=Sn.prototype.close,Qf.NO_ERROR=0,Qf.TIMEOUT=8,Qf.HTTP_ERROR=6,kF.COMPLETE="complete",MF.EventType=Yc,Yc.OPEN="a",Yc.CLOSE="b",Yc.ERROR="c",Yc.MESSAGE="d",vt.prototype.listen=vt.prototype.N,tt.prototype.listenOnce=tt.prototype.O,tt.prototype.getLastError=tt.prototype.La,tt.prototype.getLastErrorCode=tt.prototype.Da,tt.prototype.getStatus=tt.prototype.ba,tt.prototype.getResponseJson=tt.prototype.Qa,tt.prototype.getResponseText=tt.prototype.ga,tt.prototype.send=tt.prototype.ea,ii.createWebChannelTransport=function(){return new cp},ii.getStatEventTarget=function(){return Kf()},ii.ErrorCode=Qf,ii.EventType=kF,ii.Event=Bs,ii.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ii.FetchXmlHttpFactory=rl,ii.WebChannel=MF,ii.XhrIo=tt;const mL="@firebase/firestore";class wt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wt.UNAUTHENTICATED=new wt(null),wt.GOOGLE_CREDENTIALS=new wt("google-credentials-uid"),wt.FIRST_PARTY=new wt("first-party-uid"),wt.MOCK_USER=new wt("mock-user");let ul="9.9.2";const Vi=new ps("@firebase/firestore");function D(t,...e){if(Vi.logLevel<=le.DEBUG){const n=e.map(Cb);Vi.debug(`Firestore (${ul}): ${t}`,...n)}}function Ke(t,...e){if(Vi.logLevel<=le.ERROR){const n=e.map(Cb);Vi.error(`Firestore (${ul}): ${t}`,...n)}}function Cb(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(n){return t}}function O(t="Unexpected state"){const e=`FIRESTORE (${ul}) INTERNAL ASSERTION FAILED: `+t;throw Ke(e),new Error(e)}function U(t,e){t||O()}const v_CANCELLED="cancelled",v_INVALID_ARGUMENT="invalid-argument",v_FAILED_PRECONDITION="failed-precondition",v_UNAVAILABLE="unavailable";class T extends tr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class It{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class _L{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Yte{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(wt.UNAUTHENTICATED))}shutdown(){}}class Xte{constructor(e){this.t=e,this.currentUser=wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let o=new It;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new It,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(w(function*(){yield c.promise,yield s(r.currentUser)}))},u=c=>{D("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(D("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new It)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(D("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(U("string"==typeof r.accessToken),new _L(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return U(null===e||"string"==typeof e),new wt(e)}}class Zte{constructor(e,n,r){this.type="FirstParty",this.user=wt.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class ene{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new Zte(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(wt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tne{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,n){const r=s=>{null!=s.error&&D("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.p;return this.p=s.token,D("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{D("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?i(s):D("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(U("string"==typeof n.token),this.p=n.token,new yL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function nne(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function $(t,e){return t<e?-1:t>e?1:0}class lp{constructor(e,n,r){void 0===n?n=0:n>e.length&&O(),void 0===r?r=e.length-n:r>e.length-n&&O(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===lp.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof lp?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class oe extends lp{construct(e,n,r){return new oe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new T(v_INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new oe(n)}static emptyPath(){return new oe([])}}class A{constructor(e){this.path=e}static fromPath(e){return new A(oe.fromString(e))}static fromName(e){return new A(oe.fromString(e).popFirst(5))}static empty(){return new A(oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===oe.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return oe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new A(new oe(e.slice()))}}function Ui(t){return"IndexedDbTransactionError"===t.name}class He{constructor(e,n){this.comparator=e,this.root=n||Rt.EMPTY}insert(e,n){return new He(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rt.BLACK,null,null))}remove(e){return new He(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pp(this.root,e,this.comparator,!1)}getReverseIterator(){return new pp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pp(this.root,e,this.comparator,!0)}}class pp{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=null!=r?r:Rt.RED,this.left=null!=i?i:Rt.EMPTY,this.right=null!=s?s:Rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Rt(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return Rt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw O();const e=this.left.check();if(e!==this.right.check())throw O();return e+(this.isRed()?0:1)}}Rt.EMPTY=null,Rt.RED=!0,Rt.BLACK=!1,Rt.EMPTY=new class{constructor(){this.size=0}get key(){throw O()}get value(){throw O()}get color(){throw O()}get left(){throw O()}get right(){throw O()}copy(t,e,n,r,i){return this}insert(t,e,n){return new Rt(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ye{constructor(e){this.comparator=e,this.data=new He(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new SL(this.data.getIterator())}getIteratorFrom(e){return new SL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ye)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ye(this.comparator);return n.data=e,n}}class SL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new ct(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}function We(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}ct.EMPTY_BYTE_STRING=new ct("");class dne{constructor(e,n,r,i,s,o,a,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=u}}class $i{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new $i("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof $i&&e.projectId===this.projectId&&e.database===this.database}}var nt,ae;(ae=nt||(nt={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS",new He(A.comparator),new He(A.comparator),new He(A.comparator),new ye(A.comparator),new ye($);class no{constructor(){}re(e,n){this.oe(e,n),n.ue()}oe(e,n){if("nullValue"in e)this.ce(n,5);else if("booleanValue"in e)this.ce(n,10),n.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(n,15),n.ae(We(e.integerValue));else if("doubleValue"in e){const r=We(e.doubleValue);isNaN(r)?this.ce(n,13):(this.ce(n,15),function pl(t){return 0===t&&1/t==-1/0}(r)?n.ae(0):n.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(n,20),"string"==typeof r?n.he(r):(n.he(`${r.seconds||""}`),n.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,n),this.fe(n);else if("bytesValue"in e)this.ce(n,30),n.de(function zs(t){return"string"==typeof t?ct.fromBase64String(t):ct.fromUint8Array(t)}(e.bytesValue)),this.fe(n);else if("referenceValue"in e)this._e(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(n,45),n.ae(r.latitude||0),n.ae(r.longitude||0)}else"mapValue"in e?function RL(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}(e)?this.ce(n,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,n),this.fe(n)):"arrayValue"in e?(this.me(e.arrayValue,n),this.fe(n)):O()}le(e,n){this.ce(n,25),this.ge(e,n)}ge(e,n){n.he(e)}we(e,n){const r=e.fields||{};this.ce(n,55);for(const i of Object.keys(r))this.le(i,n),this.oe(r[i],n)}me(e,n){const r=e.values||[];this.ce(n,50);for(const i of r)this.oe(i,n)}_e(e,n){this.ce(n,37),A.fromName(e).path.forEach(r=>{this.ce(n,60),this.ge(r,n)})}ce(e,n){e.ae(n)}fe(e){e.ae(2)}}no.ye=new no,new Uint8Array(0);class gn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Fp(){return"undefined"!=typeof document?document:null}gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(41943040,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);class cD{constructor(e,n,r=1e3,i=1.5,s=6e4){this.js=e,this.timerId=n,this.lo=r,this.fo=i,this._o=s,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&D("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class SD{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new It,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new SD(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new T(v_CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}class jie{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=wt.UNAUTHENTICATED,this.clientId=class vL{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=nne(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=w(function*(a){D("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(D("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return w(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new T(v_FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new It;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(w(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=function Xa(t,e){if(Ke("AsyncQueue",`${e}: ${t}`),Ui(t))return new T(v_UNAVAILABLE,`${e}: ${t}`);throw t}(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}const jB=new Map;class WB{constructor(e){var n;if(void 0===e.host){if(void 0!==e.ssl)throw new T(v_INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new T(v_INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function Yie(t,e,n,r){if(!0===e&&!0===r)throw new T(v_INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zie{constructor(){this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new cD(this,"async_queue_retry"),this.Kc=()=>{const n=Fp();n&&D("AsyncQueue","Visibility state changed to "+n.visibilityState),this.So.Eo()};const e=Fp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const n=Fp();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const n=new It;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Oc.push(e),this.jc()))}jc(){var e=this;return w(function*(){if(0!==e.Oc.length){try{yield e.Oc[0](),e.Oc.shift(),e.So.reset()}catch(n){if(!Ui(n))throw n;D("AsyncQueue","Operation failed with retryable error: "+n)}e.Oc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const n=this.Mc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,Ke("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Mc=n,n}enqueueAfterDelay(e,n,r){this.Gc(),this.qc.indexOf(e)>-1&&(n=0);const i=SD.createAndSchedule(this,e,n,r,s=>this.Wc(s));return this.$c.push(i),i}Gc(){this.Bc&&O()}verifyOperationInProgress(){}zc(){var e=this;return w(function*(){let n;do{n=e.Mc,yield n}while(n!==e.Mc)})()}Hc(e){for(const n of this.$c)if(n.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.$c)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const n=this.$c.indexOf(e);this.$c.splice(n,1)}}class Oe extends class jl{constructor(e,n,r){this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new WB({}),this._settingsFrozen=!1,e instanceof $i?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new T(v_INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $i(i.options.projectId)}(e))}get app(){if(!this._app)throw new T(v_FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new T(v_FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new WB(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new Yte;switch(n.type){case"gapi":const r=n.client;return U(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new ene(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new T(v_INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=jB.get(e);n&&(D("ComponentProvider","Removing Datastore"),jB.delete(e),n.terminate())}(this),Promise.resolve()}}{constructor(e,n,r){super(e,n,r),this.type="firestore",this._queue=new Zie,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||function qB(t){var e;const n=t._freezeSettings(),r=(s=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new dne(t._databaseId,s,t._persistenceKey,(a=n).host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams));var s,a;t._firestoreClient=new jie(t._authCredentials,t._appCheckCredentials,t._queue,r)}(this),this._firestoreClient.terminate()}}function tse(t=Iy()){return nc(t,"firestore").getImmediate()}!function(t,e=!0){ul="9.9.2",jt(new St("firestore",(n,{options:r})=>{const i=n.getProvider("app").getImmediate(),s=new Oe(i,new Xte(n.getProvider("auth-internal")),new tne(n.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s},"PUBLIC")),Me(mL,"3.4.14",t),Me(mL,"3.4.14","esm2017")}();class EC{constructor(e){return e}}const p2="firestore",TC=new se("angularfire2.firestore-instances");function vse(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new EC(r)}}const wse={provide:class _se{constructor(){return _f(p2)}},deps:[[new ht,TC]]},Ise={provide:EC,useFactory:function yse(t,e){const n=mf(p2,t,e);return n&&new EC(n)},deps:[[new ht,TC],Ps]};let Ese=(()=>{class t{constructor(){Me("angularfire",gf.full,"fst")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=fi({type:t}),t.\u0275inj=Or({providers:[Ise,wse]}),t})();function Tse(t,...e){return{ngModule:Ese,providers:[{provide:TC,useFactory:vse(t),multi:!0,deps:[ft,Tn,gI,_I,[new ht,gT],[new ht,MT],...e]}]}}const bse=mI(tse,!0);let Dse=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=fi({type:t,bootstrap:[Kee]}),t.\u0275inj=Or({providers:[],imports:[[BK,AJ(()=>xJ(tF_firebase)),Gee(()=>Hee()),Tse(()=>bse())]]}),t})();(function b3(){AN=!1})(),LK().bootstrapModule(Dse).catch(t=>console.error(t))}},ce=>{ce(ce.s=635)}]);